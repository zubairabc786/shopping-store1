exports.id=19,exports.ids=[19],exports.modules={80116:(e,r,t)=>{let a={"9345326d15d744a7ba4f06b659e5e48e495f3cd4":()=>Promise.resolve().then(t.bind(t,228)).then(e=>e.addFavorite),b2dd91717a333472496154443bb7c643ae1bc319:()=>Promise.resolve().then(t.bind(t,228)).then(e=>e.$$ACTION_0),c77ff72b42060c4ca2efea77788d54db7b551599:()=>Promise.resolve().then(t.bind(t,228)).then(e=>e.addUpdatePost),d729f5111447eb8c7658917e9fdd5e9709e453f3:()=>Promise.resolve().then(t.bind(t,228)).then(e=>e.$$ACTION_1),e21e32f7517b2769aead3c8f15bd73ee304951c2:()=>Promise.resolve().then(t.bind(t,228)).then(e=>e.$$ACTION_2),e3b9846072acf6a769894810219164a2e9fa9043:()=>Promise.resolve().then(t.bind(t,228)).then(e=>e.updateProductViews)};async function d(e,...r){return(await a[e]()).apply(null,r)}e.exports={"9345326d15d744a7ba4f06b659e5e48e495f3cd4":d.bind(null,"9345326d15d744a7ba4f06b659e5e48e495f3cd4"),b2dd91717a333472496154443bb7c643ae1bc319:d.bind(null,"b2dd91717a333472496154443bb7c643ae1bc319"),c77ff72b42060c4ca2efea77788d54db7b551599:d.bind(null,"c77ff72b42060c4ca2efea77788d54db7b551599"),d729f5111447eb8c7658917e9fdd5e9709e453f3:d.bind(null,"d729f5111447eb8c7658917e9fdd5e9709e453f3"),e21e32f7517b2769aead3c8f15bd73ee304951c2:d.bind(null,"e21e32f7517b2769aead3c8f15bd73ee304951c2"),e3b9846072acf6a769894810219164a2e9fa9043:d.bind(null,"e3b9846072acf6a769894810219164a2e9fa9043")}},60121:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});var a=t(10326);t(17577);var d=t(25842),i=t(56634),c=t(56309);let s=({children:e,product:r})=>{let t=(0,d.I0)(),{cart:s}=(0,d.v9)(e=>e.auth);return a.jsx("div",{className:"w-full ",onClick:()=>{let e=s.findIndex(e=>e.product.id===r.id);if(-1!==e){let r=s.map((r,t)=>t===e?{...r,quantity:r.quantity+1}:r);t((0,i.RV)(r)),(0,c.Am)({variant:"default",title:"item already exist"})}else t((0,i.RV)([...s,{product:r,quantity:1}])),(0,c.Am)({variant:"default",title:"Add to cart successfully"})},children:e})}},6144:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});var a=t(10326),d=t(53818),i=t(67427);t(17577);var c=t(56309);let s=({id:e})=>{let r=async()=>{let{result:r,error:t}=await (0,d.a3)(e);r?(0,c.Am)({title:"product added in fav"}):(0,c.Am)({title:t})};return a.jsx("div",{className:"flex justify-center items-center bg-white p-1.5 rounded-full cursor-pointer",onClick:r,children:a.jsx(i.Z,{size:20,color:"gray"})})}},53818:(e,r,t)=>{"use strict";t.d(r,{a3:()=>d,ep:()=>i,t9:()=>c}),t(15424);var a=t(46242),d=(0,a.$)("9345326d15d744a7ba4f06b659e5e48e495f3cd4"),i=(0,a.$)("c77ff72b42060c4ca2efea77788d54db7b551599"),c=(0,a.$)("e3b9846072acf6a769894810219164a2e9fa9043")},77175:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>s});var a=t(68570);let d=(0,a.createProxy)(String.raw`D:\Shoping Store Next.Js with zubair\ecommerce\src\components\AddToCart.jsx`),{__esModule:i,$$typeof:c}=d;d.default;let s=(0,a.createProxy)(String.raw`D:\Shoping Store Next.Js with zubair\ecommerce\src\components\AddToCart.jsx#default`)},16497:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>s});var a=t(68570);let d=(0,a.createProxy)(String.raw`D:\Shoping Store Next.Js with zubair\ecommerce\src\components\Favorite.jsx`),{__esModule:i,$$typeof:c}=d;d.default;let s=(0,a.createProxy)(String.raw`D:\Shoping Store Next.Js with zubair\ecommerce\src\components\Favorite.jsx#default`)},228:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$ACTION_0:()=>f,$$ACTION_1:()=>u,$$ACTION_2:()=>g,addFavorite:()=>b,addUpdatePost:()=>o,updateProductViews:()=>l});var a=t(27745);t(26461);var d=t(30207),i=t(59280),c=t(58100),s=t(74739),n=t(85723);let o=(0,a.registerServerReference)("b2dd91717a333472496154443bb7c643ae1bc319",f);async function f(e,r,t,a){let s;if(!(await (0,i.getSession)()).isLoggedIn)return{error:"user not logged in"};let n=e.get("name"),o=e.get("description"),f=parseInt(e.get("price")),l=e.get("sku"),u=parseInt(e.get("stock")),b=parseInt(e.get("weight"));if(!n||!o||!f||!r||!l||!u||!b||!t)return{error:"Fill all fields"};let g=r.length&&!a?r?.map(({url:e})=>e):r;console.log(a);try{if(!(s=a?await c.default.product.update({where:{id:a},data:{name:n,description:o,price:f,sku:l,stock:u,weight:b,images:g,categoryId:t}}):await c.default.product.create({data:{name:n,description:o,price:f,sku:l,stock:u,weight:b,images:g,categoryId:t}})))return{error:"Product Not Created"}}catch(e){return{error:"Product Not Created"}}return(0,d.revalidatePath)("/dashboard/products"),console.log(s),{result:s}}let l=(0,a.registerServerReference)("d729f5111447eb8c7658917e9fdd5e9709e453f3",u);async function u(e){let r;if(!e)return{error:"Product not found"};try{r=await c.default.product.update({where:{id:e},data:{views:{increment:1}}})}catch(e){return{error:"product views not updated"}}(0,s.redirect)(`/products/${r?.id}`)}let b=(0,a.registerServerReference)("e21e32f7517b2769aead3c8f15bd73ee304951c2",g);async function g(e){let r;let t=await (0,i.getSession)();if(!t.isLoggedIn)return{error:"User not found"};try{let a=await c.default.favorite.findMany({where:{userId:t.user.id,productId:e}});if(console.log(t.user.id,e,"fav"),!a.length)return r=await c.default.favorite.create({data:{userId:t.user.id,productId:e}}),(0,d.revalidatePath)("/wishlist"),{result:r};return{error:"already added in favorite"}}catch(e){return{error:"already added in favorite"}}}(0,n.ensureServerEntryExports)([o,l,b]),(0,a.registerServerReference)("c77ff72b42060c4ca2efea77788d54db7b551599",o),(0,a.registerServerReference)("e3b9846072acf6a769894810219164a2e9fa9043",l),(0,a.registerServerReference)("9345326d15d744a7ba4f06b659e5e48e495f3cd4",b)},76896:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});let a=t(38160).createTransport({service:"gmail",auth:{user:process.env.SMTP_EMAIL,pass:process.env.SMTP_PASS}}),d=async(e,r,t)=>{let d={from:process.env.SMTP_EMAIL,to:e,subject:r,html:t};try{await a.sendMail(d)}catch(e){console.error("error sending email",e)}}},59280:(e,r,t)=>{"use strict";let a;t.d(r,{getSession:()=>v});var d=t(27745);t(26461);var i=t(27539),c=t(53973),s=t(57892),n=t(74987),o=t.n(n),f=t(76896),l=t(58100),u=t(74739),b=t(30207),g=t(85723);let p=function(e){let r="";for(let e=0;e<32;e++)r+="asdkjasfjdkfjsdjsdsadksd".charAt(Math.floor(24*Math.random()));return r}(0),v=(0,d.registerServerReference)("2426e3577f0ce1fba562aa0efe8ee7fa2ae9e36c",h);async function h(){let e=await (0,i.getIronSession)((0,c.cookies)(),s.sessionOptions);return e.isLoggedIn||(e.isLoggedIn=s.defaultSession.isLoggedIn),e}let w=(0,d.registerServerReference)("2e5501e243ae72514932784613a6af19574dcdf5",m);async function m(e,r){let t=e.get("name"),d=e.get("email"),i=e.get("password");if(i.length>25)return{error:"password must be min 8 char long"};a=await o().hash(i,10);let c=await l.default?.user?.findUnique({where:{email:d}});if(c&&c.emailVerified)return{error:"user already exist!"};console.log(t,d,p);let s=await l.default?.user.upsert({where:{email:d},update:{token:p},create:{name:t,email:d,password:a,token:p,image:r}});return s?(await (0,f.default)(s.email,"Email Verification",`<p>Welcome to Perfect Developer, This is your email verificaiton token. Click here to verify your email! http://localhost:3000/verify/${p}</p>`),{message:"Verify Your Email"}):{error:"Something went wrong"}}let y=(0,d.registerServerReference)("661914bfb8b3fff98fe12af7109122f78c020c4d",S);async function S(e){if(e){let r=await l.default?.user?.findUnique({where:{token:e}});if(console.log(r),!r)return{error:"Token expired"};await l.default?.user?.update({where:{id:r.id},data:{emailVerified:!0}})&&(0,u.redirect)("/login")}}let P=(0,d.registerServerReference)("c73745ab9662cebda49021b1c3accd8987cd6252",x);async function x(e){let r=await v(),t=e.get("email"),a=e.get("password"),d=await l.default.user.findUnique({where:{email:t}});return d?await o().compare(a,d?.password)?void(r.user=d,r.isLoggedIn=!0,await r.save(),(0,u.redirect)("/")):{error:"Password not matched"}:{error:"Sorry this user not exist"}}let I=(0,d.registerServerReference)("28c7623e8d6b76765657cc9afa5acdb3c92d8746",R);async function R(){(await v()).destroy(),(0,u.redirect)("/login")}let $=(0,d.registerServerReference)("61781054abe8bb761bb13d266ba01b7892f89668",k);async function k({id:e,table:r}){let t;if(!(await v()).isLoggedIn)return{error:"user not found"};try{if(!(t=await l.default[r].delete({where:{id:e}})))return{error:`${r} not deleted`}}catch(e){if(!t)return{error:`${r} not deleted`}}return(0,b.revalidatePath)(`/dashboard/${"category"==r?"categories":`${r}s`}`),{result:t}}let A=(0,d.registerServerReference)("563a6b477ad6c9033e6b512cdc184397e5632013",j);async function j(e){return console.log("sortf=",e),{sort:"hightolow",orderBy:{price:"asc"}}}let N=(0,d.registerServerReference)("5d32c20decc40764681866f6e16be047125d072d",C);async function C(e){for(let r of e){let e=await l.default?.product?.findUnique({where:{id:r?.product?.id}});if(console.log("Product=",e),!e||!(e.stock>=r.quantity))return{message:`Insufficient stock for product ID ${r?.product?.id}`};await l.default?.product?.update({where:{id:r?.product?.id},data:{stock:e.stock-r.quantity}})}}(0,g.ensureServerEntryExports)([v,w,y,P,I,$,A,N]),(0,d.registerServerReference)("1f83fe473af82a1a3d2ccfe4936dd3d59d73554a",v),(0,d.registerServerReference)("6dac97f3c90b8c960c038b086cff4b651834c2e0",w),(0,d.registerServerReference)("96b951924e1b87fc414eac6f84497b067eab7acf",y),(0,d.registerServerReference)("6e8373e57bbbec51e5162b87eacec08e5a86935a",P),(0,d.registerServerReference)("fd5d27dcef0ed9cf03f142ce566e9193aadd6457",I),(0,d.registerServerReference)("a96346e197cdb09c2d22ddc3abccd3311f0a3597",$),(0,d.registerServerReference)("2754e191ab21869eda74cf5d594929385997bcd0",A),(0,d.registerServerReference)("fb0579901161c15788a549c581a2af76a374416c",N)},58100:(e,r,t)=>{"use strict";t.d(r,{default:()=>a});let a=new(t(53524)).PrismaClient},57892:(e,r,t)=>{"use strict";t.d(r,{defaultSession:()=>d,sessionOptions:()=>a});let a={password:"nextsecretkeysdfjsadjdsfdsfkdskdsjsdfds",cookieName:"code-ecommerce",cookieOptions:{httpOnly:!0,secure:!0}},d={isLoggedIn:!1}}};