"use strict";(()=>{var e={};e.id=811,e.ids=[811],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6044:(e,t,n)=>{let s,i,r,a,o,l,c,u,p,m;n.r(t),n.d(t,{originalPathname:()=>Tp,patchFetch:()=>Tm,requestAsyncStorage:()=>Tl,routeModule:()=>To,serverHooks:()=>Tu,staticGenerationAsyncStorage:()=>Tc});var h={};n.r(h),n.d(h,{GET:()=>Tr,POST:()=>Ta});var d=n(49303),f=n(88716),g=n(60670);let b=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,n){return arguments.length>=2?t(e,n):function(n){return t(n,e)}};case 3:return function(e,n,s){return arguments.length>=3?t(e,n,s):function(s){return t(s,e,n)}};case 4:return function(e,n,s,i){return arguments.length>=4?t(e,n,s,i):function(i){return t(i,e,n,s)}};case 5:return function(e,n,s,i,r){return arguments.length>=5?t(e,n,s,i,r):function(r){return t(r,e,n,s,i)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let n=arguments;return function(e){return t(e,...n)}}}},x=e=>e,y=e=>()=>e,v=y(!0),_=y(!1),S=y(void 0);function w(e,t,n,s,i,r,a,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return s(n(t(e)));case 5:return i(s(n(t(e))));case 6:return r(i(s(n(t(e)))));case 7:return a(r(i(s(n(t(e))))));case 8:return o(a(r(i(s(n(t(e)))))));case 9:return l(o(a(r(i(s(n(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let k=()=>"3.4.5",O=Symbol.for(`effect/GlobalValue/globalStoreId/${k()}`);O in globalThis||(globalThis[O]=new Map);let E=globalThis[O],I=(e,t)=>(E.has(e)||E.set(e,t()),E.get(e)),T=e=>!!e,R=e=>"string"==typeof e,N=e=>"number"==typeof e,F=e=>"boolean"==typeof e,M=e=>"bigint"==typeof e,A=e=>"symbol"==typeof e,j=e=>"function"==typeof e,C=e=>void 0===e,L=e=>void 0!==e,U=e=>null!==e,$=e=>!1,D=e=>"object"==typeof e&&null!==e,P=e=>D(e)||j(e),z=b(2,(e,t)=>P(e)&&t in e),B=b(2,(e,t)=>z(e,"_tag")&&e._tag===t),q=e=>null==e,J=e=>null!=e,K=e=>e instanceof Date,V=e=>z(e,Symbol.iterator),G=e=>D(e)&&!Array.isArray(e),H=e=>z(e,"then")&&j(e.then),W=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;Symbol.iterator;class Y{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new Y(this.self)}}class Q{_state;constructor(e,t,n,s){return q(t)&&q(e)?(t=4294967295*Math.random()>>>0,e=0):q(t)&&(t=e,e=0),q(s)&&q(n)?(s=this._state?this._state[3]:4150755663,n=this._state?this._state[2]:335903614):q(s)&&(s=n,n=0),this._state=new Int32Array([0,0,n>>>0,(1|(s||0))>>>0]),this._next(),X(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){if(!e)return this._next();if(((e>>>=0)&e-1)==0)return this._next()&e-1;let t=0,n=(-e>>>0)%e>>>0;for(t=this._next();t<n;t=this._next());return t%e}number(){return((67108863&this._next())*134217728+(134217727&this._next())*1)/9007199254740992}_next(){var e;let t,n,s,i;let r=this._state[0]>>>0,a=this._state[1]>>>0;e=this._state,t=(a>>>16)*32557>>>0,n=(65535&a)*19605>>>0,s=(65535&a)*32557>>>0,i=(a>>>16)*19605+((n>>>16)+(t>>>16))>>>0,(s=s+(n=n<<16>>>0)>>>0)>>>0<n>>>0&&(i=i+1>>>0),(s=s+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(i=i+1>>>0),i=(i=i+Math.imul(a,1481765933)>>>0)+Math.imul(r,1284865837)>>>0,e[0]=i,e[1]=s,X(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=r>>>18,l=(a>>>18|r<<14)>>>0;o=(o^r)>>>0;let c=((l=(l^a)>>>0)>>>27|o<<5)>>>0,u=r>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function X(e,t,n,s,i){let r=t+s>>>0,a=n+i>>>0;a>>>0<n>>>0&&(r=r+1|0),e[0]=r,e[1]=a}let Z=Symbol.for("effect/Utils/YieldWrap");class ee{#e;constructor(e){this.#e=e}[Z](){return this.#e}}function et(e){if("object"==typeof e&&null!==e&&Z in e)return e[Z]();throw Error(W("yieldWrapGet"))}let en=I("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),es=(e=>{let t={[e]:e=>e()};return function(n){return t[e](n)}})("effect_internal_function"),ei=I(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),er=Symbol.for("effect/Hash"),ea=e=>{if(!0===en.enabled)return 0;switch(typeof e){case"number":return ep(e);case"bigint":return em(e.toString(10));case"boolean":case"symbol":return em(String(e));case"string":return em(e);case"undefined":return em("undefined");case"function":case"object":if(null===e)return em("null");if(e instanceof Date)return ea(e.toISOString());if(eu(e))return e[er]();return eo(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},eo=e=>(ei.has(e)||ei.set(e,ep(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),ei.get(e)),el=e=>t=>53*t^e,ec=e=>3221225471&e|e>>>1&1073741824,eu=e=>z(e,er),ep=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=4294967295*e);e>4294967295;)t^=e/=4294967295;return ec(e)},em=e=>{let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return ec(t)},eh=(e,t)=>{let n=12289;for(let s=0;s<t.length;s++)n^=w(em(t[s]),el(ea(e[t[s]])));return ec(n)},ed=e=>eh(e,Object.keys(e)),ef=e=>{let t=6151;for(let n=0;n<e.length;n++)t=w(t,el(ea(e[n])));return ec(t)},eg=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,er,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,er,{value:()=>t,enumerable:!1}),t},eb=Symbol.for("effect/Equal");function ex(){return 1==arguments.length?e=>ey(e,arguments[0]):ey(arguments[0],arguments[1])}function ey(e,t){if(e===t)return!0;let n=typeof e;if(n!==typeof t)return!1;if("object"===n||"function"===n){if(null!==e&&null!==t){if(ev(e)&&ev(t))return!!(ea(e)===ea(t)&&e[eb](t))||!!en.enabled&&!!en.tester&&en.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(en.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>ey(e,t[n]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e),s=Object.keys(t);if(n.length===s.length){for(let s of n)if(!(s in t&&ey(e[s],t[s])))return!!en.tester&&en.tester(e,t);return!0}}return!!en.tester&&en.tester(e,t)}}return!!en.enabled&&!!en.tester&&en.tester(e,t)}let ev=e=>z(e,eb),e_=()=>ex,eS=Symbol.for("nodejs.util.inspect.custom"),ew=e=>z(e,"toJSON")&&j(e.toJSON)&&0===e.toJSON.length?e.toJSON():Array.isArray(e)?e.map(ew):e,ek=e=>JSON.stringify(e,null,2),eO=(e,t=2)=>{try{return"object"==typeof e?eE(e,t):String(e)}catch(t){return String(e)}},eE=(e,t)=>{let n=[],s=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?n.includes(t)?void 0:n.push(t)&&t:t,t);return n=void 0,s},eI=(e,t)=>{switch(t.length){case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let e=0,s=t.length;e<s;e++)n=t[e](n);return n}}},eT="Async",eR="Commit",eN="Failure",eF="OnFailure",eM="OnSuccess",eA="OnSuccessAndFailure",ej="Success",eC="Sync",eL="UpdateRuntimeFlags",eU="While",e$="WithRuntime",eD="Yield",eP="RevertFlags",ez=Symbol.for("effect/Effect"),eB=Symbol.for("effect/Stream"),eq=Symbol.for("effect/Sink"),eJ=Symbol.for("effect/Channel"),eK={_R:e=>e,_E:e=>e,_A:e=>e,_V:k()},eV={[ez]:eK,[eB]:eK,[eq]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[eJ]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[eb](e){return this===e},[er](){return eg(this,eo(this))},[Symbol.iterator](){return new Y(new ee(this))},pipe(){return eI(this,arguments)}},eG={[er](){return eg(this,ed(this))},[eb](e){let t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(let n of t)if(!(n in e&&ex(this[n],e[n])))return!1;return!0}},eH={...{...eV,_op:eR},...eG},eW=Symbol.for("effect/Option"),eY={...eV,[eW]:{_A:e=>e},[eS](){return this.toJSON()},toString(){return ek(this.toJSON())}},eQ=Object.assign(Object.create(eY),{_tag:"Some",_op:"Some",[eb](e){return e0(e)&&e2(e)&&ex(this.value,e.value)},[er](){return eg(this,el(ea(this._tag))(ea(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:ew(this.value)}}}),eX=ea("None"),eZ=Object.assign(Object.create(eY),{_tag:"None",_op:"None",[eb]:e=>e0(e)&&e1(e),[er]:()=>eX,toJSON(){return{_id:"Option",_tag:this._tag}}}),e0=e=>z(e,eW),e1=e=>"None"===e._tag,e2=e=>"Some"===e._tag,e3=Object.create(eZ),e5=e=>{let t=Object.create(eQ);return t.value=e,t},e4=Symbol.for("effect/Context/Tag"),e6=Symbol.for("effect/STM"),e8={...eV,_tag:"Tag",_op:"Tag",[e6]:eK,[e4]:{_Service:e=>e,_Identifier:e=>e},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[eS](){return this.toJSON()},of:e=>e,context(e){return ti(this,e)}},e7=Symbol.for("effect/Context"),e9={[e7]:{_Services:e=>e},[eb](e){if(tn(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!ex(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[er](){return eg(this,ep(this.unsafeMap.size))},pipe(){return eI(this,arguments)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(ew)}},[eS](){return this.toJSON()}},te=e=>{let t=Object.create(e9);return t.unsafeMap=e,t},tt=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let n=e.stack.split("\n");if(n.length>2){let e=n[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},tn=e=>z(e,e7),ts=te(new Map),ti=(e,t)=>te(new Map([[e.key,t]])),tr=b(3,(e,t,n)=>{let s=new Map(e.unsafeMap);return s.set(t.key,n),te(s)}),ta=b(2,(e,t)=>{if(!e.unsafeMap.has(t.key))throw tt(t);return e.unsafeMap.get(t.key)}),to=b(2,(e,t)=>e.unsafeMap.has(t.key)?e5(e.unsafeMap.get(t.key)):e3),tl=b(2,(e,t)=>{let n=new Map(e.unsafeMap);for(let[e,s]of t.unsafeMap)n.set(e,s);return te(n)}),tc=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=Error();Error.stackTraceLimit=t;let s=Object.create(e8);return Object.defineProperty(s,"stack",{get:()=>n.stack}),s.key=e,s},tu=e=>z(e,e4),tp=()=>ts,tm=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=Error();function s(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(s,e8),s.key=e,Object.defineProperty(s,"stack",{get:()=>n.stack}),s},th=Symbol.for("effect/Either"),td={...eV,[th]:{_R:e=>e},[eS](){return this.toJSON()},toString(){return ek(this.toJSON())}},tf=Object.assign(Object.create(td),{_tag:"Right",_op:"Right",[eb](e){return tb(e)&&ty(e)&&ex(this.right,e.right)},[er](){return el(ea(this._tag))(ea(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:ew(this.right)}}}),tg=Object.assign(Object.create(td),{_tag:"Left",_op:"Left",[eb](e){return tb(e)&&tx(e)&&ex(this.left,e.left)},[er](){return el(ea(this._tag))(ea(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:ew(this.left)}}}),tb=e=>z(e,th),tx=e=>"Left"===e._tag,ty=e=>"Right"===e._tag,tv=e=>{let t=Object.create(tg);return t.left=e,t},t_=e=>{let t=Object.create(tf);return t.right=e,t},tS=b(2,(e,t)=>e1(e)?tv(t()):t_(e.value)),tw=b(2,(e,{onLeft:t,onRight:n})=>tx(e)?t(e.left):n(e.right))({onLeft:x,onRight:x}),tk=b(2,(e,t)=>{if(ty(e))return e.right;throw t(e.left)});class tO{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new tO(this.self)}}let tE=Symbol.for("effect/Micro"),tI=Symbol.for("effect/Micro/runSymbol"),tT=e=>"object"==typeof e&&null!==e&&tE in e,tR=Symbol.for("effect/Micro/Failure"),tN={_E:x};class tF extends globalThis.Error{_tag;traces;[tR];constructor(e,t,n){let s,i,r;let a=`Failure${e}`;if(t instanceof globalThis.Error){s=`(${a}) ${t.name}`;let e=(i=t.message).split("\n").length;r=t.stack?`(${a}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${s}: ${i}`}else s=a,i=eO(t,0),r=`${s}: ${i}`;n.length>0&&(r+=`
    ${n.join("\n    ")}`),super(i),this._tag=e,this.traces=n,this[tR]=tN,this.name=s,this.stack=r}pipe(){return eI(this,arguments)}toString(){return this.stack}[eS](){return this.stack}}class tM extends tF{error;constructor(e,t=[]){super("Expected",e,t),this.error=e}}let tA=(e,t=[])=>new tM(e,t);class tj extends tF{defect;constructor(e,t=[]){super("Unexpected",e,t),this.defect=e}}let tC=(e,t=[])=>new tj(e,t);class tL extends tF{constructor(e=[]){super("Aborted","aborted",e)}}let tU=(e=[])=>new tL(e),t$=b(2,(e,t)=>"Expected"===e._tag?tA(e.error,[...e.traces,t]):"Unexpected"===e._tag?tC(e.defect,[...e.traces,t]):tU([...e.traces,t])),tD=tv(tU()),tP=e=>tv(tA(e)),tz=e=>tv(tC(e)),tB=Symbol.for("effect/Micro/Env"),tq=Symbol.for("effect/Micro/EnvRef"),tJ={[tB]:{_R:x},pipe(){return eI(this,arguments)}},tK=e=>{let t=Object.create(tJ);return t.refs=e,t},tV=()=>{let e=new AbortController,t=Object.create(null);return t[tZ.key]=e,t[t0.key]=e.signal,tK(t)},tG=b(2,(e,t)=>t.key in e.refs?e.refs[t.key]:t.initial),tH=b(3,(e,t,n)=>{let s=Object.assign(Object.create(null),e.refs);return s[t.key]=n,tK(s)}),tW=b(2,(e,t)=>tK(t(Object.assign(Object.create(null),e.refs)))),tY=e=>t7(function(t,n){n(t_(ta(tG(t,t1),e)))}),tQ={[tq]:tq},tX=(e,t)=>I(e,()=>{let n=Object.create(tQ);return n.key=e,n.initial=t(),n}),tZ=tX("effect/Micro/currentAbortController",()=>void 0),t0=tX("effect/Micro/currentAbortSignal",()=>void 0),t1=tX("effect/Micro/currentContext",()=>tp()),t2=tX("effect/Micro/currentMaxDepthBeforeYield",()=>2048),t3=tX("effect/Micro/currentInterruptible",()=>!0),t5={...eV,_op:"Micro",[tE]:{_A:x,_E:x,_R:x},[Symbol.iterator](){return new tO(new ee(this))}},t4=I("effect/Micro/microDepthState",()=>({depth:0,maxDepthBeforeYield:t2.initial})),t6=e=>{let t=Object.create(t5);return t[tI]=e,t},t8=(e,t)=>t6(function n(s,i){if(t&&!1!==s.refs[t3.key]&&s.refs[t0.key].aborted)return i(tD);if(t4.depth++,1===t4.depth&&(t4.maxDepthBeforeYield=tG(s,t2)),t4.depth>=t4.maxDepthBeforeYield)np(()=>n(s,i));else try{e(s,i)}catch(e){i(tz(e))}t4.depth--}),t7=e=>t8(e,!0),t9=e=>t7(function(t,n){n(e)}),ne=e=>t9(t_(e)),nt=e=>t9(tP(e)),nn=e=>t7(function(t,n){n(t_(e()))}),ns=e=>t7(function(t,n){e()[tI](t,n)}),ni=ne(void 0),nr=e=>t7(function(t,n){let s,i=!1,r=e.length>1?new AbortController:void 0,a=tG(t,t0);function o(){s?l(nS(nf(s,t9(tD)))):l(t9(tD)),void 0!==r&&r.abort()}function l(e){i||(i=!0,a.removeEventListener("abort",o),e[tI](t,n))}s=void 0===r?e(l):e(l,r.signal),i||a.addEventListener("abort",o)}),na=e=>t7(function(t,n){try{n(t_(e.try()))}catch(t){n(tP(e.catch(t)))}}),no=e=>nr(function(t,n){try{e.try(n).then(e=>t(ne(e)),n=>t(nt(e.catch(n))))}catch(n){t(nt(e.catch(n)))}}),nl=I("effect/Micro/yieldState",()=>({tasks:[],working:!1})),nc=()=>{let e=nl.tasks;nl.tasks=[];for(let t=0,n=e.length;t<n;t++)e[t]()},nu="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0),np=e=>{nl.tasks.push(e),nl.working||(nl.working=!0,nu(()=>{nl.working=!1,nc()}))},nm=(...e)=>t7(function(t,n){let s;let i=1===e.length?e[0]():e[1].call(e[0]),r=!1;!function e(){r=!0;try{let a=!0;for(;a;){let o=i.next(s);if(o.done)return n(t_(o.value));a=!1,et(o.value)[tI](t,function(t){"Left"===t._tag?n(t):(a=!0,s=t.right,r||e())})}}catch(e){n(tz(e))}r=!1}()}),nh=b(2,(e,t)=>t7(function(n,s){e[tI](n,function(e){s("Left"===e._tag?e:t_(t(e.right)))})})),nd=b(2,(e,t)=>t7(function(n,s){e[tI](n,function(e){if("Left"===e._tag)return s(e);t(e.right)[tI](n,s)})})),nf=b(2,(e,t)=>t7(function(n,s){e[tI](n,function(e){if("Left"===e._tag)return s(e);if(tG(n,t0).aborted)return s(tD);let i=tT(t)?t:"function"==typeof t?t(e.right):t;tT(i)?i[tI](n,s):s(t_(i))})})),ng=e=>nh(e,e=>void 0),nb=e=>t7(function(t,n){e[tI](t,function(e){n(t_(e))})}),nx=b(e=>tT(e[0]),(e,t,n)=>nd(e,e=>t(e)?ne(e):nt(n(e)))),ny=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let n=e=>n=>t8(function(s,i){n[tI](s,function(n){i("Left"===n._tag?tv(function(e,n){let s=t.stack;if(!s)return n;let i=s.split("\n")[2]?.trim().replace(/^at /,"");if(!i)return n;let r=i.match(/\((.*)\)$/);return t$(n,`at ${e} (${r?r[1]:i})`)}(e,n.left)):n)})},!1);return 2==arguments.length?n(arguments[1])(arguments[0]):n(arguments[0])},nv=Symbol.for("effect/Micro/MicroScope");class n_{[nv];state={_tag:"Open",finalizers:new Set};constructor(){this[nv]=nv}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return ns(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),ni):e(this.state.result))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return ns(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",result:e},nd(nw(t,t=>nb(t(e))),e=>ng(t9(Either.all(e))))}return ni})}get fork(){return nn(()=>{let e=new n_;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>nn(()=>this.unsafeRemoveFinalizer(t))),e})}}let nS=e=>t8(function(t,n){let s=tW(t,function(e){return e[t3.key]=!1,e[t0.key]=new AbortController().signal,e});e[tI](s,n)},!1),nw=(e,t,n)=>t7(function(s,i){let r;let a=n?.concurrency==="inherit"?tG(s,null):n?.concurrency??1,o="unbounded"===a?Number.POSITIVE_INFINITY:Math.max(1,a),[l,c]=function(e){let t=new AbortController,n=tG(e,t0);function s(){t.abort(),n.removeEventListener("abort",s)}return n.addEventListener("abort",s),[tW(e,function(e){return e[tZ.key]=t,e[t0.key]=t.signal,e}),s]}(s),u=Array.from(e),p=u.length,m=n?.discard?void 0:Array(p),h=0,d=0,f=0,g=!1;!function e(){for(g=!0;d<o&&h<p;){let n=h,s=u[n];h++,d++;try{t(s,n)[tI](l,function(t){"Left"===t._tag?void 0===r&&(r=t,p=h,c()):void 0!==m&&(m[n]=t.right),f++,d--,f===p?i(r??Either.right(m)):!g&&d<o&&e()})}catch(e){r=tz(e),p=h,c()}}g=!1}()}),nk=function(){class e extends globalThis.Error{[tI](e,t){t(tP(this))}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eS](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,t5,eG),e}(),nO=class extends nk{constructor(e){super(),e&&Object.assign(this,e)}},nE=e=>{class t extends nO{_tag=e}return t.prototype.name=e,t},nI=Object.create(null),nT=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?nI:globalThis),nR=new Proxy(nI,{get:(e,t)=>nT()[t]??nI[t],has:(e,t)=>t in nT()||t in nI,set:(e,t,n)=>(nT(!0)[t]=n,!0),deleteProperty(e,t){if(!t)return!1;let n=nT(!0);return delete n[t],!0},ownKeys:()=>Object.keys(nT(!0))}),nN="u">typeof process&&process.env&&"production"||"",nF=[["APPVEYOR"],["AWS_AMPLIFY","AWS_APP_ID",{ci:!0}],["AZURE_PIPELINES","SYSTEM_TEAMFOUNDATIONCOLLECTIONURI"],["AZURE_STATIC","INPUT_AZURE_STATIC_WEB_APPS_API_TOKEN"],["APPCIRCLE","AC_APPCIRCLE"],["BAMBOO","bamboo_planKey"],["BITBUCKET","BITBUCKET_COMMIT"],["BITRISE","BITRISE_IO"],["BUDDY","BUDDY_WORKSPACE_ID"],["BUILDKITE"],["CIRCLE","CIRCLECI"],["CIRRUS","CIRRUS_CI"],["CLOUDFLARE_PAGES","CF_PAGES",{ci:!0}],["CODEBUILD","CODEBUILD_BUILD_ARN"],["CODEFRESH","CF_BUILD_ID"],["DRONE"],["DRONE","DRONE_BUILD_EVENT"],["DSARI"],["GITHUB_ACTIONS"],["GITLAB","GITLAB_CI"],["GITLAB","CI_MERGE_REQUEST_ID"],["GOCD","GO_PIPELINE_LABEL"],["LAYERCI"],["HUDSON","HUDSON_URL"],["JENKINS","JENKINS_URL"],["MAGNUM"],["NETLIFY"],["NETLIFY","NETLIFY_LOCAL",{ci:!1}],["NEVERCODE"],["RENDER"],["SAIL","SAILCI"],["SEMAPHORE"],["SCREWDRIVER"],["SHIPPABLE"],["SOLANO","TDDIUM"],["STRIDER"],["TEAMCITY","TEAMCITY_VERSION"],["TRAVIS"],["VERCEL","NOW_BUILDER"],["VERCEL","VERCEL",{ci:!1}],["VERCEL","VERCEL_ENV",{ci:!1}],["APPCENTER","APPCENTER_BUILD_ID"],["CODESANDBOX","CODESANDBOX_SSE",{ci:!1}],["STACKBLITZ"],["STORMKIT"],["CLEAVR"],["ZEABUR"],["CODESPHERE","CODESPHERE_APP_ID",{ci:!0}],["RAILWAY","RAILWAY_PROJECT_ID"],["RAILWAY","RAILWAY_SERVICE_ID"]],nM=function(){if(globalThis.process?.env)for(let e of nF){let t=e[1]||e[0];if(globalThis.process?.env[t])return{name:e[0].toLowerCase(),...e[2]}}return globalThis.process?.env?.SHELL==="/bin/jsh"&&globalThis.process?.versions?.webcontainer?{name:"stackblitz",ci:!1}:{name:"",ci:!1}}();function nA(e){return!!e&&"false"!==e}nM.name;let nj=globalThis.process?.platform||"",nC=(nA(nR.CI)||nM.ci,nA(globalThis.process?.stdout&&globalThis.process?.stdout.isTTY)),nL=(nA(nR.DEBUG),"test"===nN||nA(nR.TEST),"dev"===nN||"development"===nN),nU=(nA(nR.MINIMAL),/^win/i.test(nj)),n$=(/^linux/i.test(nj),/^darwin/i.test(nj),!nA(nR.NO_COLOR)&&(nA(nR.FORCE_COLOR)||(nC||nU)&&nR.TERM),(globalThis.process?.versions?.node||"").replace(/^v/,"")||null),nD=(n$?.split(".")[0],globalThis.process||Object.create(null)),nP={versions:{}},nz=new Proxy(nD,{get:(e,t)=>"env"===t?nR:t in e?e[t]:t in nP?nP[t]:void 0}),nB=globalThis.process?.release?.name==="node",nq=!!globalThis.Bun||!!globalThis.process?.versions?.bun,nJ=!!globalThis.Deno,nK=!!globalThis.fastly,nV=[[!!globalThis.Netlify,"netlify"],[!!globalThis.EdgeRuntime,"edge-light"],[globalThis.navigator?.userAgent==="Cloudflare-Workers","workerd"],[nK,"fastly"],[nJ,"deno"],[nq,"bun"],[nB,"node"],[!!globalThis.__lagon__,"lagon"]],nG=function(){let e=nV.find(e=>e[0]);if(e)return{name:e[1]}}();nG?.name;let nH={"application/andrew-inset":{source:"iana",extensions:["ez"],compressible:null},"application/applixware":{source:"apache",extensions:["aw"],compressible:null},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"],compressible:null},"application/cdmi-container":{source:"iana",extensions:["cdmic"],compressible:null},"application/cdmi-domain":{source:"iana",extensions:["cdmid"],compressible:null},"application/cdmi-object":{source:"iana",extensions:["cdmio"],compressible:null},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"],compressible:null},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"],compressible:null},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dicom":{source:"iana",compressible:!1,extensions:["dcm"]},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"],compressible:null},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"],compressible:null},"application/express":{source:"iana",extensions:["exp"],compressible:null},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"],compressible:null},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"],compressible:null},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"],compressible:null},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"],compressible:null},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"],compressible:null},"application/mac-compactpro":{source:"apache",extensions:["cpt"],compressible:null},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"],compressible:null},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"],compressible:null},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"],compressible:null},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"],compressible:null},"application/mp4":{source:"iana",extensions:["mp4s","m4p"],compressible:null},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"],compressible:null},"application/n-quads":{source:"iana",extensions:["nq"],compressible:null},"application/n-triples":{source:"iana",extensions:["nt"],compressible:null},"application/node":{source:"iana",extensions:["cjs"],compressible:null},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"],compressible:null},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"],compressible:null},"application/oxps":{source:"iana",extensions:["oxps"],compressible:null},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"],compressible:null},"application/pgp-signature":{source:"iana",extensions:["asc","sig"],compressible:null},"application/pics-rules":{source:"apache",extensions:["prf"],compressible:null},"application/pkcs10":{source:"iana",extensions:["p10"],compressible:null},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"],compressible:null},"application/pkcs7-signature":{source:"iana",extensions:["p7s"],compressible:null},"application/pkcs8":{source:"iana",extensions:["p8"],compressible:null},"application/pkix-attr-cert":{source:"iana",extensions:["ac"],compressible:null},"application/pkix-cert":{source:"iana",extensions:["cer"],compressible:null},"application/pkix-crl":{source:"iana",extensions:["crl"],compressible:null},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"],compressible:null},"application/pkixcmp":{source:"iana",extensions:["pki"],compressible:null},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"],compressible:null},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"],compressible:null},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"],compressible:null},"application/rpki-manifest":{source:"iana",extensions:["mft"],compressible:null},"application/rpki-roa":{source:"iana",extensions:["roa"],compressible:null},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"],compressible:null},"application/scvp-cv-response":{source:"iana",extensions:["scs"],compressible:null},"application/scvp-vp-request":{source:"iana",extensions:["spq"],compressible:null},"application/scvp-vp-response":{source:"iana",extensions:["spp"],compressible:null},"application/sdp":{source:"iana",extensions:["sdp"],compressible:null},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"],compressible:null},"application/set-registration-initiation":{source:"iana",extensions:["setreg"],compressible:null},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"],compressible:null},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"],compressible:null},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"],compressible:null},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"],compressible:null},"application/trig":{source:"iana",extensions:["trig"],compressible:null},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"],compressible:null},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"],compressible:null},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"],compressible:null},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"],compressible:null},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"],compressible:null},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"],compressible:null},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"],compressible:null},"application/vnd.acucobol":{source:"iana",extensions:["acu"],compressible:null},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"],compressible:null},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"],compressible:null},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"],compressible:null},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"],compressible:null},"application/vnd.age":{source:"iana",extensions:["age"],compressible:null},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"],compressible:null},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"],compressible:null},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"],compressible:null},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"],compressible:null},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"],compressible:null},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"],compressible:null},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"],compressible:null},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"],compressible:null},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"],compressible:null},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"],compressible:null},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"],compressible:null},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"],compressible:null},"application/vnd.apple.pages":{source:"iana",extensions:["pages"],compressible:null},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"],compressible:null},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"],compressible:null},"application/vnd.audiograph":{source:"iana",extensions:["aep"],compressible:null},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"],compressible:null},"application/vnd.bmi":{source:"iana",extensions:["bmi"],compressible:null},"application/vnd.businessobjects":{source:"iana",extensions:["rep"],compressible:null},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"],compressible:null},"application/vnd.cinderella":{source:"iana",extensions:["cdy"],compressible:null},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"],compressible:null},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"],compressible:null},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"],compressible:null},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"],compressible:null},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"],compressible:null},"application/vnd.commonspace":{source:"iana",extensions:["csp"],compressible:null},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"],compressible:null},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"],compressible:null},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"],compressible:null},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"],compressible:null},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"],compressible:null},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"],compressible:null},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"],compressible:null},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"],compressible:null},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"],compressible:null},"application/vnd.curl.car":{source:"apache",extensions:["car"],compressible:null},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"],compressible:null},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"],compressible:null},"application/vnd.dbf":{source:"iana",extensions:["dbf"],compressible:null},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"],compressible:null},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"],compressible:null},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"],compressible:null},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"],compressible:null},"application/vnd.dna":{source:"iana",extensions:["dna"],compressible:null},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"],compressible:null},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"],compressible:null},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"],compressible:null},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"],compressible:null},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"],compressible:null},"application/vnd.dvb.service":{source:"iana",extensions:["svc"],compressible:null},"application/vnd.dynageo":{source:"iana",extensions:["geo"],compressible:null},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"],compressible:null},"application/vnd.enliven":{source:"iana",extensions:["nml"],compressible:null},"application/vnd.epson.esf":{source:"iana",extensions:["esf"],compressible:null},"application/vnd.epson.msf":{source:"iana",extensions:["msf"],compressible:null},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"],compressible:null},"application/vnd.epson.salt":{source:"iana",extensions:["slt"],compressible:null},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"],compressible:null},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"],compressible:null},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"],compressible:null},"application/vnd.fdf":{source:"iana",extensions:["fdf"],compressible:null},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"],compressible:null},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"],compressible:null},"application/vnd.flographit":{source:"iana",extensions:["gph"],compressible:null},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"],compressible:null},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"],compressible:null},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"],compressible:null},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"],compressible:null},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"],compressible:null},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"],compressible:null},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"],compressible:null},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"],compressible:null},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"],compressible:null},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"],compressible:null},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"],compressible:null},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"],compressible:null},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"],compressible:null},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"],compressible:null},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"],compressible:null},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"],compressible:null},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"],compressible:null},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"],compressible:null},"application/vnd.geonext":{source:"iana",extensions:["gxt"],compressible:null},"application/vnd.geoplan":{source:"iana",extensions:["g2w"],compressible:null},"application/vnd.geospace":{source:"iana",extensions:["g3w"],compressible:null},"application/vnd.gmx":{source:"iana",extensions:["gmx"],compressible:null},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"],compressible:null},"application/vnd.groove-account":{source:"iana",extensions:["gac"],compressible:null},"application/vnd.groove-help":{source:"iana",extensions:["ghf"],compressible:null},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"],compressible:null},"application/vnd.groove-injector":{source:"iana",extensions:["grv"],compressible:null},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"],compressible:null},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"],compressible:null},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"],compressible:null},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"],compressible:null},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"],compressible:null},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"],compressible:null},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"],compressible:null},"application/vnd.hp-hps":{source:"iana",extensions:["hps"],compressible:null},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"],compressible:null},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"],compressible:null},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"],compressible:null},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"],compressible:null},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"],compressible:null},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"],compressible:null},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"],compressible:null},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"],compressible:null},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"],compressible:null},"application/vnd.igloader":{source:"iana",extensions:["igl"],compressible:null},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"],compressible:null},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"],compressible:null},"application/vnd.insors.igm":{source:"iana",extensions:["igm"],compressible:null},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"],compressible:null},"application/vnd.intergeo":{source:"iana",extensions:["i2g"],compressible:null},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"],compressible:null},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"],compressible:null},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"],compressible:null},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"],compressible:null},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"],compressible:null},"application/vnd.jam":{source:"iana",extensions:["jam"],compressible:null},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"],compressible:null},"application/vnd.jisp":{source:"iana",extensions:["jisp"],compressible:null},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"],compressible:null},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"],compressible:null},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"],compressible:null},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"],compressible:null},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"],compressible:null},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"],compressible:null},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"],compressible:null},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"],compressible:null},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"],compressible:null},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"],compressible:null},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"],compressible:null},"application/vnd.kidspiration":{source:"iana",extensions:["kia"],compressible:null},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"],compressible:null},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"],compressible:null},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"],compressible:null},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"],compressible:null},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"],compressible:null},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"],compressible:null},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"],compressible:null},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"],compressible:null},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"],compressible:null},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"],compressible:null},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"],compressible:null},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"],compressible:null},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"],compressible:null},"application/vnd.mcd":{source:"iana",extensions:["mcd"],compressible:null},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"],compressible:null},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"],compressible:null},"application/vnd.mfer":{source:"iana",extensions:["mwf"],compressible:null},"application/vnd.mfmp":{source:"iana",extensions:["mfm"],compressible:null},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"],compressible:null},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"],compressible:null},"application/vnd.mif":{source:"iana",extensions:["mif"],compressible:null},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"],compressible:null},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"],compressible:null},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"],compressible:null},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"],compressible:null},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"],compressible:null},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"],compressible:null},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"],compressible:null},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"],compressible:null},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"],compressible:null},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"],compressible:null},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"],compressible:null},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"],compressible:null},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"],compressible:null},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"],compressible:null},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"],compressible:null},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"],compressible:null},"application/vnd.ms-ims":{source:"iana",extensions:["ims"],compressible:null},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"],compressible:null},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"],compressible:null},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"],compressible:null},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"],compressible:null},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"],compressible:null},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"],compressible:null},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"],compressible:null},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"],compressible:null},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"],compressible:null},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"],compressible:null},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"],compressible:null},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"],compressible:null},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"],compressible:null},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"],compressible:null},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"],compressible:null},"application/vnd.musician":{source:"iana",extensions:["mus"],compressible:null},"application/vnd.muvee.style":{source:"iana",extensions:["msty"],compressible:null},"application/vnd.mynfc":{source:"iana",extensions:["taglet"],compressible:null},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"],compressible:null},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"],compressible:null},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"],compressible:null},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"],compressible:null},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"],compressible:null},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"],compressible:null},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"],compressible:null},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"],compressible:null},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"],compressible:null},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"],compressible:null},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"],compressible:null},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"],compressible:null},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"],compressible:null},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"],compressible:null},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"],compressible:null},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"],compressible:null},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"],compressible:null},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"],compressible:null},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"],compressible:null},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"],compressible:null},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"],compressible:null},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"],compressible:null},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"],compressible:null},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"],compressible:null},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"],compressible:null},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"],compressible:null},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"],compressible:null},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"],compressible:null},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"],compressible:null},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"],compressible:null},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"],compressible:null},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"],compressible:null},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"],compressible:null},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"],compressible:null},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"],compressible:null},"application/vnd.pawaafile":{source:"iana",extensions:["paw"],compressible:null},"application/vnd.pg.format":{source:"iana",extensions:["str"],compressible:null},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"],compressible:null},"application/vnd.picsel":{source:"iana",extensions:["efif"],compressible:null},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"],compressible:null},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"],compressible:null},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"],compressible:null},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"],compressible:null},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"],compressible:null},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"],compressible:null},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"],compressible:null},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"],compressible:null},"application/vnd.rar":{source:"iana",extensions:["rar"],compressible:null},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"],compressible:null},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"],compressible:null},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"],compressible:null},"application/vnd.rim.cod":{source:"apache",extensions:["cod"],compressible:null},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"],compressible:null},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"],compressible:null},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"],compressible:null},"application/vnd.seemail":{source:"iana",extensions:["see"],compressible:null},"application/vnd.sema":{source:"iana",extensions:["sema"],compressible:null},"application/vnd.semd":{source:"iana",extensions:["semd"],compressible:null},"application/vnd.semf":{source:"iana",extensions:["semf"],compressible:null},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"],compressible:null},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"],compressible:null},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"],compressible:null},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"],compressible:null},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"],compressible:null},"application/vnd.smaf":{source:"iana",extensions:["mmf"],compressible:null},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"],compressible:null},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"],compressible:null},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"],compressible:null},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"],compressible:null},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"],compressible:null},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"],compressible:null},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"],compressible:null},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"],compressible:null},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"],compressible:null},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"],compressible:null},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"],compressible:null},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"],compressible:null},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"],compressible:null},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"],compressible:null},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"],compressible:null},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"],compressible:null},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"],compressible:null},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"],compressible:null},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"],compressible:null},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"],compressible:null},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"],compressible:null},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"],compressible:null},"application/vnd.svd":{source:"iana",extensions:["svd"],compressible:null},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"],compressible:null},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"],compressible:null},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"],compressible:null},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"],compressible:null},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"],compressible:null},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"],compressible:null},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"],compressible:null},"application/vnd.trueapp":{source:"iana",extensions:["tra"],compressible:null},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"],compressible:null},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"],compressible:null},"application/vnd.umajin":{source:"iana",extensions:["umj"],compressible:null},"application/vnd.unity":{source:"iana",extensions:["unityweb"],compressible:null},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"],compressible:null},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"],compressible:null},"application/vnd.visionary":{source:"iana",extensions:["vis"],compressible:null},"application/vnd.vsf":{source:"iana",extensions:["vsf"],compressible:null},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"],compressible:null},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"],compressible:null},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"],compressible:null},"application/vnd.webturbo":{source:"iana",extensions:["wtb"],compressible:null},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"],compressible:null},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"],compressible:null},"application/vnd.wqd":{source:"iana",extensions:["wqd"],compressible:null},"application/vnd.wt.stf":{source:"iana",extensions:["stf"],compressible:null},"application/vnd.xara":{source:"iana",extensions:["xar"],compressible:null},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"],compressible:null},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"],compressible:null},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"],compressible:null},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"],compressible:null},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"],compressible:null},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"],compressible:null},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"],compressible:null},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"],compressible:null},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"],compressible:null},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"],compressible:null},"application/winhlp":{source:"apache",extensions:["hlp"],compressible:null},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"],compressible:null},"application/x-ace-compressed":{source:"apache",extensions:["ace"],compressible:null},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"],compressible:null},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"],compressible:null},"application/x-authorware-map":{source:"apache",extensions:["aam"],compressible:null},"application/x-authorware-seg":{source:"apache",extensions:["aas"],compressible:null},"application/x-bcpio":{source:"apache",extensions:["bcpio"],compressible:null},"application/x-bittorrent":{source:"apache",extensions:["torrent"],compressible:null},"application/x-blorb":{source:"apache",extensions:["blb","blorb"],compressible:null},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"],compressible:null},"application/x-cdlink":{source:"apache",extensions:["vcd"],compressible:null},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"],compressible:null},"application/x-chat":{source:"apache",extensions:["chat"],compressible:null},"application/x-chess-pgn":{source:"apache",extensions:["pgn"],compressible:null},"application/x-cocoa":{source:"nginx",extensions:["cco"],compressible:null},"application/x-conference":{source:"apache",extensions:["nsc"],compressible:null},"application/x-cpio":{source:"apache",extensions:["cpio"],compressible:null},"application/x-csh":{source:"apache",extensions:["csh"],compressible:null},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"],compressible:null},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"],compressible:null},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],compressible:null},"application/x-doom":{source:"apache",extensions:["wad"],compressible:null},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"],compressible:null},"application/x-eva":{source:"apache",extensions:["eva"],compressible:null},"application/x-font-bdf":{source:"apache",extensions:["bdf"],compressible:null},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"],compressible:null},"application/x-font-linux-psf":{source:"apache",extensions:["psf"],compressible:null},"application/x-font-pcf":{source:"apache",extensions:["pcf"],compressible:null},"application/x-font-snf":{source:"apache",extensions:["snf"],compressible:null},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"],compressible:null},"application/x-freearc":{source:"apache",extensions:["arc"],compressible:null},"application/x-futuresplash":{source:"apache",extensions:["spl"],compressible:null},"application/x-gca-compressed":{source:"apache",extensions:["gca"],compressible:null},"application/x-glulx":{source:"apache",extensions:["ulx"],compressible:null},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"],compressible:null},"application/x-gramps-xml":{source:"apache",extensions:["gramps"],compressible:null},"application/x-gtar":{source:"apache",extensions:["gtar"],compressible:null},"application/x-hdf":{source:"apache",extensions:["hdf"],compressible:null},"application/x-install-instructions":{source:"apache",extensions:["install"],compressible:null},"application/x-iso9660-image":{source:"apache",extensions:["iso"],compressible:null},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"],compressible:null},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"],compressible:null},"application/x-makeself":{source:"nginx",extensions:["run"],compressible:null},"application/x-mie":{source:"apache",extensions:["mie"],compressible:null},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"],compressible:null},"application/x-ms-application":{source:"apache",extensions:["application"],compressible:null},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"],compressible:null},"application/x-ms-wmd":{source:"apache",extensions:["wmd"],compressible:null},"application/x-ms-wmz":{source:"apache",extensions:["wmz"],compressible:null},"application/x-ms-xbap":{source:"apache",extensions:["xbap"],compressible:null},"application/x-msaccess":{source:"apache",extensions:["mdb"],compressible:null},"application/x-msbinder":{source:"apache",extensions:["obd"],compressible:null},"application/x-mscardfile":{source:"apache",extensions:["crd"],compressible:null},"application/x-msclip":{source:"apache",extensions:["clp"],compressible:null},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"],compressible:null},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"],compressible:null},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"],compressible:null},"application/x-msmoney":{source:"apache",extensions:["mny"],compressible:null},"application/x-mspublisher":{source:"apache",extensions:["pub"],compressible:null},"application/x-msschedule":{source:"apache",extensions:["scd"],compressible:null},"application/x-msterminal":{source:"apache",extensions:["trm"],compressible:null},"application/x-mswrite":{source:"apache",extensions:["wri"],compressible:null},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"],compressible:null},"application/x-nzb":{source:"apache",extensions:["nzb"],compressible:null},"application/x-perl":{source:"nginx",extensions:["pl","pm"],compressible:null},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"],compressible:null},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"],compressible:null},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"],compressible:null},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"],compressible:null},"application/x-research-info-systems":{source:"apache",extensions:["ris"],compressible:null},"application/x-sea":{source:"nginx",extensions:["sea"],compressible:null},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"],compressible:null},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"],compressible:null},"application/x-sql":{source:"apache",extensions:["sql"],compressible:null},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"],compressible:null},"application/x-subrip":{source:"apache",extensions:["srt"],compressible:null},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"],compressible:null},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"],compressible:null},"application/x-t3vm-image":{source:"apache",extensions:["t3"],compressible:null},"application/x-tads":{source:"apache",extensions:["gam"],compressible:null},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"],compressible:null},"application/x-tex":{source:"apache",extensions:["tex"],compressible:null},"application/x-tex-tfm":{source:"apache",extensions:["tfm"],compressible:null},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"],compressible:null},"application/x-tgif":{source:"apache",extensions:["obj"],compressible:null},"application/x-ustar":{source:"apache",extensions:["ustar"],compressible:null},"application/x-wais-source":{source:"apache",extensions:["src"],compressible:null},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"],compressible:null},"application/x-xfig":{source:"apache",extensions:["fig"],compressible:null},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"],compressible:null},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"],compressible:null},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"],compressible:null},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"],compressible:null},"audio/amr":{source:"iana",extensions:["amr"],compressible:null},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"],compressible:null},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"],compressible:null},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"],compressible:null},"audio/silk":{source:"apache",extensions:["sil"],compressible:null},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"],compressible:null},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"],compressible:null},"audio/vnd.dra":{source:"iana",extensions:["dra"],compressible:null},"audio/vnd.dts":{source:"iana",extensions:["dts"],compressible:null},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"],compressible:null},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"],compressible:null},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"],compressible:null},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"],compressible:null},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"],compressible:null},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"],compressible:null},"audio/vnd.rip":{source:"iana",extensions:["rip"],compressible:null},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"],compressible:null},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"],compressible:null},"audio/x-m4a":{source:"nginx",extensions:["m4a"],compressible:null},"audio/x-matroska":{source:"apache",extensions:["mka"],compressible:null},"audio/x-mpegurl":{source:"apache",extensions:["m3u"],compressible:null},"audio/x-ms-wax":{source:"apache",extensions:["wax"],compressible:null},"audio/x-ms-wma":{source:"apache",extensions:["wma"],compressible:null},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"],compressible:null},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"],compressible:null},"audio/x-realaudio":{source:"nginx",extensions:["ra"],compressible:null},"audio/x-wav":{source:"apache",extensions:["wav"],compressible:null},"audio/x-gsm":{source:"apache",extensions:["gsm"],compressible:null},"audio/xm":{source:"apache",extensions:["xm"],compressible:null},"chemical/x-cdx":{source:"apache",extensions:["cdx"],compressible:null},"chemical/x-cif":{source:"apache",extensions:["cif"],compressible:null},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"],compressible:null},"chemical/x-cml":{source:"apache",extensions:["cml"],compressible:null},"chemical/x-csml":{source:"apache",extensions:["csml"],compressible:null},"chemical/x-xyz":{source:"apache",extensions:["xyz"],compressible:null},"font/collection":{source:"iana",extensions:["ttc"],compressible:null},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"],compressible:null},"font/woff2":{source:"iana",extensions:["woff2"],compressible:null},"image/aces":{source:"iana",extensions:["exr"],compressible:null},"image/avci":{source:"iana",extensions:["avci"],compressible:null},"image/avcs":{source:"iana",extensions:["avcs"],compressible:null},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"],compressible:null},"image/dicom-rle":{source:"iana",extensions:["drle"],compressible:null},"image/emf":{source:"iana",extensions:["emf"],compressible:null},"image/fits":{source:"iana",extensions:["fits"],compressible:null},"image/g3fax":{source:"iana",extensions:["g3"],compressible:null},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"],compressible:null},"image/heic-sequence":{source:"iana",extensions:["heics"],compressible:null},"image/heif":{source:"iana",extensions:["heif"],compressible:null},"image/heif-sequence":{source:"iana",extensions:["heifs"],compressible:null},"image/hej2k":{source:"iana",extensions:["hej2"],compressible:null},"image/hsj2":{source:"iana",extensions:["hsj2"],compressible:null},"image/ief":{source:"iana",extensions:["ief"],compressible:null},"image/jls":{source:"iana",extensions:["jls"],compressible:null},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"],compressible:null},"image/jphc":{source:"iana",extensions:["jhc"],compressible:null},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"],compressible:null},"image/jxra":{source:"iana",extensions:["jxra"],compressible:null},"image/jxrs":{source:"iana",extensions:["jxrs"],compressible:null},"image/jxs":{source:"iana",extensions:["jxs"],compressible:null},"image/jxsc":{source:"iana",extensions:["jxsc"],compressible:null},"image/jxsi":{source:"iana",extensions:["jxsi"],compressible:null},"image/jxss":{source:"iana",extensions:["jxss"],compressible:null},"image/ktx":{source:"iana",extensions:["ktx"],compressible:null},"image/ktx2":{source:"iana",extensions:["ktx2"],compressible:null},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"],compressible:null},"image/prs.pti":{source:"iana",extensions:["pti"],compressible:null},"image/sgi":{source:"apache",extensions:["sgi"],compressible:null},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"],compressible:null},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"],compressible:null},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"],compressible:null},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"],compressible:null},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"],compressible:null},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"image/vnd.dwg":{source:"iana",extensions:["dwg"],compressible:null},"image/vnd.dxf":{source:"iana",extensions:["dxf"],compressible:null},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"],compressible:null},"image/vnd.fpx":{source:"iana",extensions:["fpx"],compressible:null},"image/vnd.fst":{source:"iana",extensions:["fst"],compressible:null},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"],compressible:null},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"],compressible:null},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"],compressible:null},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"],compressible:null},"image/vnd.net-fpx":{source:"iana",extensions:["npx"],compressible:null},"image/vnd.pco.b16":{source:"iana",extensions:["b16"],compressible:null},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"],compressible:null},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"],compressible:null},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"],compressible:null},"image/vnd.xiff":{source:"iana",extensions:["xif"],compressible:null},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"],compressible:null},"image/webp":{source:"apache",extensions:["webp"],compressible:null},"image/wmf":{source:"iana",extensions:["wmf"],compressible:null},"image/x-3ds":{source:"apache",extensions:["3ds"],compressible:null},"image/x-cmu-raster":{source:"apache",extensions:["ras"],compressible:null},"image/x-cmx":{source:"apache",extensions:["cmx"],compressible:null},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"],compressible:null},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"],compressible:null},"image/x-mrsid-image":{source:"apache",extensions:["sid"],compressible:null},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"],compressible:null},"image/x-pict":{source:"apache",extensions:["pic","pct"],compressible:null},"image/x-portable-anymap":{source:"apache",extensions:["pnm"],compressible:null},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"],compressible:null},"image/x-portable-graymap":{source:"apache",extensions:["pgm"],compressible:null},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"],compressible:null},"image/x-rgb":{source:"apache",extensions:["rgb"],compressible:null},"image/x-tga":{source:"apache",extensions:["tga"],compressible:null},"image/x-xbitmap":{source:"apache",extensions:["xbm"],compressible:null},"image/x-xpixmap":{source:"apache",extensions:["xpm"],compressible:null},"image/x-xwindowdump":{source:"apache",extensions:["xwd"],compressible:null},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"],compressible:null},"message/global":{source:"iana",extensions:["u8msg"],compressible:null},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"],compressible:null},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"],compressible:null},"message/global-headers":{source:"iana",extensions:["u8hdr"],compressible:null},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"],compressible:null},"model/3mf":{source:"iana",extensions:["3mf"],compressible:null},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"],compressible:null},"model/obj":{source:"iana",extensions:["obj"],compressible:null},"model/step":{source:"iana",compressible:!1,extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"],compressible:null},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"],compressible:null},"model/vnd.gdl":{source:"iana",extensions:["gdl"],compressible:null},"model/vnd.gtw":{source:"iana",extensions:["gtw"],compressible:null},"model/vnd.mts":{source:"iana",extensions:["mts"],compressible:null},"model/vnd.opengex":{source:"iana",extensions:["ogex"],compressible:null},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"],compressible:null},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"],compressible:null},"model/vnd.sap.vds":{source:"iana",extensions:["vds"],compressible:null},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"],compressible:null},"model/vnd.vtu":{source:"iana",extensions:["vtu"],compressible:null},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"],compressible:null},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"],compressible:null},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"],compressible:null},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"],compressible:null},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"],compressible:null},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"],compressible:null},"text/shex":{source:"iana",extensions:["shex"],compressible:null},"text/spdx":{source:"iana",extensions:["spdx"],compressible:null},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"],compressible:null},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"],compressible:null},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"],compressible:null},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"],compressible:null},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"],compressible:null},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"],compressible:null},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"],compressible:null},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"],compressible:null},"text/vnd.fly":{source:"iana",extensions:["fly"],compressible:null},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"],compressible:null},"text/vnd.graphviz":{source:"iana",extensions:["gv"],compressible:null},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"],compressible:null},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"],compressible:null},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"],compressible:null},"text/vnd.wap.wml":{source:"iana",extensions:["wml"],compressible:null},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"],compressible:null},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"],compressible:null},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"],compressible:null},"text/x-component":{source:"nginx",extensions:["htc"],compressible:null},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"],compressible:null},"text/x-java-source":{source:"apache",extensions:["java"],compressible:null},"text/x-nfo":{source:"apache",extensions:["nfo"],compressible:null},"text/x-opml":{source:"apache",extensions:["opml"],compressible:null},"text/x-pascal":{source:"apache",extensions:["p","pas"],compressible:null},"text/x-setext":{source:"apache",extensions:["etx"],compressible:null},"text/x-sfv":{source:"apache",extensions:["sfv"],compressible:null},"text/x-uuencode":{source:"apache",extensions:["uu"],compressible:null},"text/x-vcalendar":{source:"apache",extensions:["vcs"],compressible:null},"text/x-vcard":{source:"apache",extensions:["vcf"],compressible:null},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"],compressible:null},"video/3gpp2":{source:"iana",extensions:["3g2"],compressible:null},"video/h261":{source:"iana",extensions:["h261"],compressible:null},"video/h263":{source:"iana",extensions:["h263"],compressible:null},"video/h264":{source:"iana",extensions:["h264"],compressible:null},"video/iso.segment":{source:"iana",extensions:["m4s"],compressible:null},"video/jpeg":{source:"iana",extensions:["jpgv"],compressible:null},"video/jpm":{source:"apache",extensions:["jpm","jpgm"],compressible:null},"video/mj2":{source:"iana",extensions:["mj2","mjp2"],compressible:null},"video/mp2t":{source:"iana",extensions:["ts"],compressible:null},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"],compressible:null},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"],compressible:null},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"],compressible:null},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"],compressible:null},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"],compressible:null},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"],compressible:null},"video/vnd.fvt":{source:"iana",extensions:["fvt"],compressible:null},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"],compressible:null},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"],compressible:null},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"],compressible:null},"video/vnd.vivo":{source:"iana",extensions:["viv"],compressible:null},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"],compressible:null},"video/x-fli":{source:"apache",extensions:["fli"],compressible:null},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"],compressible:null},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"],compressible:null},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"],compressible:null},"video/x-ms-vob":{source:"apache",extensions:["vob"],compressible:null},"video/x-ms-wm":{source:"apache",extensions:["wm"],compressible:null},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"],compressible:null},"video/x-ms-wvx":{source:"apache",extensions:["wvx"],compressible:null},"video/x-msvideo":{source:"apache",extensions:["avi"],compressible:null},"video/x-sgi-movie":{source:"apache",extensions:["movie"],compressible:null},"video/x-smv":{source:"apache",extensions:["smv"],compressible:null},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"],compressible:null}},nW={},nY={},nQ=!1;class nX extends nE("InvalidRouteConfig"){constructor(e,t){super({reason:t?`Expected route config to have a ${t} for key ${e} but none was found.`:`Encountered an invalid route config during backfilling. ${e} was not found.`})}}class nZ extends nE("UnknownFileType"){constructor(e){super({reason:`Could not determine type for ${e}`})}}class n0 extends nE("InvalidFileType"){constructor(e,t){super({reason:`File type ${e} not allowed for ${t}`})}}class n1 extends nE("InvalidFileSize"){constructor(e){super({reason:`Invalid file size: ${e}`})}}class n2 extends nE("InvalidURL"){constructor(e){super({reason:`Failed to parse '${e}' as a URL.`})}}class n3 extends nE("RetryError"){}class n5 extends nE("FetchError"){}class n4 extends nE("InvalidJson"){}class n6 extends nE("BadRequestError"){getMessage(){return G(this.json)&&"string"==typeof this.json.message?this.json.message:this.message}}function n8(e){return"image"===e?"4MB":"video"===e?"16MB":"audio"===e||"blob"===e?"8MB":"pdf"===e?"4MB":"text"===e?"64KB":"4MB"}let n7=e=>{if(Array.isArray(e))return ne(e.reduce((e,t)=>(e[t]={maxFileSize:n8(t),maxFileCount:1,minFileCount:1,contentDisposition:"inline"},e),{}));let t={};for(let n of si(e)){let s=e[n];if(!s)return nt(new nX(n));let i={maxFileSize:n8(n),maxFileCount:1,minFileCount:1,contentDisposition:"inline"};t[n]={...i,...s}}return ne(t)},n9=(e,t)=>{let n=function(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if(nQ)return;nQ=!0;let n=["nginx","apache",void 0,"iana"];Object.keys(nH).forEach(s=>{let i=nH[s],r=i.extensions;if(r?.length)for(let a of(e[s]=r,r)){if(t[a]){let e=n.indexOf(nH[t[a]].source),s=n.indexOf(i.source);if("application/octet-stream"!==t[a]&&(e>s||e===s&&t[a].startsWith("application/")))continue}t[a]=s}})}(nW,nY),nY)[t]||!1)}(e);if(!n)return t.includes("blob")?ne("blob"):nt(new nZ(e));if(t.some(e=>e.includes("/"))&&t.includes(n))return ne(n);let s="application/pdf"===n.toLowerCase()?"pdf":n.split("/")[0];return t.includes(s)?ne(s):t.includes("blob")?ne("blob"):nt(new n0(s,e))};function se(e){let t="https://uploadthing.com";return nz.env.CUSTOM_INFRA_URL&&(t=nz.env.CUSTOM_INFRA_URL),`${t}${e}`}let st=["B","KB","MB","GB"],sn=e=>{let t=RegExp(`^(\\d+)(\\.\\d+)?\\s*(${st.join("|")})$`,"i"),n=e.match(t);if(!n)return nt(new n1(e));let s=parseFloat(n[1]),i=n[3].toUpperCase();return ne(Math.floor(s*Math.pow(1024,st.indexOf(i))))},ss=e=>{if(0===e||-1===e)return"0B";let t=Math.floor(Math.log(e)/Math.log(1e3));return`${(e/Math.pow(1e3,t)).toFixed(2)}${st[t]}`};function si(e){return Object.keys(e)}function sr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let sa=e=>nm(function*(){let t="undefined"!=typeof window?window.location.origin:nz.env?.VERCEL_URL?`https://${nz.env.VERCEL_URL}`:"http://localhost:3000",n=yield*na({try:()=>new URL(e??"/api/uploadthing",t),catch:()=>new n2(e??"/api/uploadthing")});return"/"===n.pathname&&(n.pathname="/api/uploadthing"),n}),so={BAD_REQUEST:400,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500,INTERNAL_CLIENT_ERROR:500,TOO_LARGE:413,TOO_SMALL:400,TOO_MANY_FILES:400,KEY_TOO_LONG:400,URL_GENERATION_FAILED:500,UPLOAD_FAILED:500,MISSING_ENV:500,FILE_LIMIT_EXCEEDED:500};class sl extends nO{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:sr(t.cause)&&"number"==typeof t.cause.status&&"string"==typeof t.cause.statusText?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):"string"==typeof t.cause?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(sl.toObject(e))}}class sc extends tm("uploadthing/FetchContext")(){}let su=(e,t)=>nd(tY(sc),({fetch:n,baseHeaders:s})=>{let i=new Headers(t?.headers??[]);for(let[e,t]of Object.entries(s))"string"==typeof t&&i.set(e,t);let r={url:e.toString(),method:t?.method,body:t?.body,headers:Object.fromEntries(i)};return no({try:s=>n(e,{...t,headers:i,signal:s}),catch:e=>new n5({error:e instanceof Error?{...e,name:e.name,message:e.message,stack:e.stack}:e,input:r})}).pipe(nh(e=>Object.assign(e,{requestUrl:r.url})),ny("fetch"))}),sp=e=>no({try:async()=>({json:await e.json(),ok:e.ok,status:e.status}),catch:t=>new n4({error:t,input:e.requestUrl})}).pipe(nx(({ok:e})=>e,({json:t,status:n})=>new n6({status:n,message:`Request to ${e.requestUrl} failed with status ${n}`,json:t})),nh(({json:e})=>e),ny("parseJson")),sm=e=>no({try:()=>e.json(),catch:t=>new n4({error:t,input:e.url})}).pipe(ny("parseRequestJson")),sh="hmac-sha256=",sd={name:"HMAC",hash:"SHA-256"},sf=async(e,t)=>{let n=new TextEncoder,s=await crypto.subtle.importKey("raw",n.encode(t),sd,!1,["sign"]),i=await crypto.subtle.sign(sd,s,n.encode(e)).then(e=>Buffer.from(e).toString("hex"));return`${sh}${i}`},sg=async(e,t,n)=>{let s=t?.slice(sh.length);if(!s)return!1;let i=new TextEncoder,r=await crypto.subtle.importKey("raw",i.encode(n),sd,!1,["verify"]);return await crypto.subtle.verify(sd,r,Uint8Array.from(Buffer.from(s,"hex")),i.encode(e))},sb=e=>(t,n)=>t===n||e(t,n),sx=(e,t)=>e===t,sy=b(2,(e,t)=>sb((n,s)=>e(t(n),t(s)))),sv=sy(sx,e=>e.getTime()),s_=e=>sb((t,n)=>{if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],n[s]))return!1;return!0}),sS=e=>e.length>0,sw=()=>e3,sk=b(2,(e,{onNone:t,onSome:n})=>e1(e)?t():n(e.value)),sO=b(2,(e,t)=>e1(e)?t():e.value),sE=b(2,(e,t)=>e1(e)?t():e),sI=b(2,(e,t)=>e1(e)?e5(t()):e),sT=e=>null==e?sw():e5(e),sR=sO(S),sN=e=>(...t)=>{try{return e5(e(...t))}catch(e){return sw()}},sF=b(2,(e,t)=>{if(e2(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),sM=b(2,(e,t)=>e1(e)?sw():e5(t(e.value))),sA=b(2,(e,t)=>e1(e)?sw():t(e.value)),sj=b(2,(e,t)=>e1(e)?sw():t(e.value)),sC=b(2,(e,t)=>sj(e,e=>t(e)?e5(e):e3)),sL=e=>sb((t,n)=>e1(t)?e1(n):!e1(n)&&e(t.value,n.value)),sU=(s=e_(),b(2,(e,t)=>!e1(e)&&s(e.value,t)));Symbol.iterator,()=>s$;let s$={next:()=>({done:!0,value:void 0})},sD=e=>(t,n)=>t===n?0:e(t,n),sP=sD((e,t)=>e<t?-1:1),sz=((e,t)=>e<t?-1:1,b(2,(e,t)=>sD((n,s)=>e(t(n),t(s)))));Object.fromEntries,(e,t)=>{let n=[];for(let s of sB(e))n.push(t(s,e[s]));return n};let sB=e=>Object.keys(e),sq=(...e)=>e,sJ=e=>Array(e),sK=e=>Array.isArray(e)?e:Array.from(e),sV=b(2,(e,{onEmpty:t,onNonEmpty:n})=>sX(e)?n(s5(e),s8(e)):t()),sG=b(2,(e,t)=>[t,...e]),sH=b(2,(e,t)=>[...e,t]),sW=b(2,(e,t)=>sK(e).concat(sK(t))),sY=Array.isArray,sQ=e=>0===e.length,sX=sS,sZ=(e,t)=>e<0||e>=t.length,s0=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),s1=b(2,(e,t)=>{let n=Math.floor(t);return sZ(n,e)?sw():e5(e[n])}),s2=b(2,(e,t)=>{let n=Math.floor(t);if(sZ(n,e))throw Error(`Index ${n} out of bounds`);return e[n]}),s3=s1(0),s5=s2(0),s4=e=>sX(e)?e5(s6(e)):sw(),s6=e=>e[e.length-1],s8=e=>e.slice(1),s7=(e,t)=>{let n=0;for(let s of e){if(!t(s,n))break;n++}return n},s9=b(2,(e,t)=>io(e,s7(e,t))),ie=b(2,(e,t)=>{let n=sK(e);return n.slice(s0(t,n),n.length)}),it=e=>Array.from(e).reverse(),is=b(2,(e,t)=>{let n=Array.from(e);return n.sort(t),n}),ii=b(2,(e,t)=>ir(e,t,sq)),ir=b(3,(e,t,n)=>{let s=sK(e),i=sK(t);if(sX(s)&&sX(i)){let e=[n(s5(s),s5(i))],t=Math.min(s.length,i.length);for(let r=1;r<t;r++)e[r]=n(s[r],i[r]);return e}return[]}),ia=e_(),io=b(2,(e,t)=>{let n=Array.from(e),s=Math.floor(t);return sX(n)?s>=1?il(n,s):[[],n]:[n,[]]}),il=b(2,(e,t)=>{let n=Math.max(1,Math.floor(t));return n>=e.length?[ic(e),[]]:[sG(e.slice(1,n),s5(e)),e.slice(n)]}),ic=e=>e.slice(),iu=b(3,(e,t,n)=>{let s=sK(e),i=sK(t);return sX(s)?sX(i)?i_(n)(sW(s,i)):s:i}),ip=b(2,(e,t)=>iu(e,t,ia)),im=()=>[],ih=e=>[e],id=b(2,(e,t)=>e.map(t)),ig=b(2,(e,t)=>{if(sQ(e))return[];let n=[];for(let s=0;s<e.length;s++){let i=t(e[s],s);for(let e=0;e<i.length;e++)n.push(i[e])}return n}),ib=ig(x),ix=b(2,(e,t)=>{let n=sK(e),s=[];for(let e=0;e<n.length;e++){let i=t(n[e],e);e2(i)&&s.push(i.value)}return s}),iy=b(3,(e,t,n)=>sK(e).reduce((e,t,s)=>n(e,t,s),t)),iv=((e,t,n)=>sK(e).reduceRight((e,t,s)=>n(e,t,s),t),(e,t)=>{let n;let s=[],i=e;for(;e2(n=t(i));){let[e,t]=n.value;s.push(e),i=t}return s}),i_=b(2,(e,t)=>{let n=sK(e);if(sX(n)){let e=[s5(n)];for(let s of s8(n))e.every(e=>!t(s,e))&&e.push(s);return e}return[]}),iS=e=>i_(e,e_()),iw=b(2,(e,t)=>sK(e).join(t)),ik=Symbol.for("effect/BigDecimal"),iO={[ik]:ik,[er](){let e=iM(this);return w(ea(e.value),el(ep(e.scale)),eg(this))},[eb](e){return iE(e)&&iC(this,e)},toString(){return`BigDecimal(${i$(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},iE=e=>z(e,ik),iI=(e,t)=>{let n=Object.create(iO);return n.value=e,n.scale=t,n},iT=(e,t)=>{if(e!==iR&&e%iN===iR)throw RangeError("Value must be normalized");let n=iI(e,t);return n.normalized=n,n},iR=BigInt(0),iN=BigInt(10),iF=iT(iR,0),iM=e=>{if(void 0===e.normalized){if(e.value===iR)e.normalized=iF;else{let t=`${e.value}`,n=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])n++;else break;0===n&&(e.normalized=e);let s=BigInt(t.substring(0,t.length-n)),i=e.scale-n;e.normalized=iT(s,i)}}return e.normalized},iA=(e,t)=>t>e.scale?iI(e.value*iN**BigInt(t-e.scale),t):t<e.scale?iI(e.value/iN**BigInt(e.scale-t),t):e,ij=sb((e,t)=>e.scale>t.scale?iA(t,e.scale).value===e.value:e.scale<t.scale?iA(e,t.scale).value===t.value:e.value===t.value),iC=b(2,(e,t)=>ij(e,t)),iL=e=>{let[t,n=""]=`${e}`.split(".");return iI(BigInt(`${t}${n}`),n.length)},iU=e=>{let t,n;let s=e.search(/\./);if(-1!==s){let i=e.slice(0,s),r=e.slice(s+1);t=`${i}${r}`,n=r.length}else t=e,n=0;return""===t?e5(iF):/^(?:\+|-)?\d+$/.test(t)?e5(iI(BigInt(t),n)):sw()},i$=e=>{let t,n;let s=e.value<iR,i=s?`${e.value}`.substring(1):`${e.value}`;if(e.scale>=i.length)t="0",n="0".repeat(e.scale-i.length)+i;else{let s=i.length-e.scale;if(s>i.length){let e=s-i.length;t=`${i}${"0".repeat(e)}`,n=""}else n=i.slice(s),t=i.slice(0,s)}let r=""===n?t:`${t}.${n}`;return s?`-${r}`:r},iD=e=>Number(i$(e)),iP=e=>e>BigInt(Number.MAX_SAFE_INTEGER)||e<BigInt(Number.MIN_SAFE_INTEGER)?sw():e5(Number(e)),iz=e=>{try{return""===e.trim()?sw():e5(BigInt(e))}catch(e){return sw()}},iB=e=>{if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)return sw();try{return e5(BigInt(e))}catch(e){return sw()}},iq=e=>!e,iJ=Symbol.for("effect/Chunk"),iK=[],iV=sb((e,t)=>e.length===t.length&&i2(e).every((e,n)=>ex(e,i8(t,n)))),iG={[iJ]:{_A:e=>e},toString(){return ek(this.toJSON())},toJSON(){return{_id:"Chunk",values:i2(this).map(ew)}},[eS](){return this.toJSON()},[eb](e){return iW(e)&&iV(this,e)},[er](){return eg(this,ef(i2(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return iK[Symbol.iterator]();default:return i2(this)[Symbol.iterator]()}},pipe(){return eI(this,arguments)}},iH=e=>{let t=Object.create(iG);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=iY,t.right=iY;break;case"ISingleton":t.length=1,t.depth=0,t.left=iY,t.right=iY;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=iY,t.right=iY}return t},iW=e=>z(e,iJ),iY=iH({_tag:"IEmpty"}),iQ=()=>iY,iX=(...e)=>1===e.length?iZ(e[0]):i6(e),iZ=e=>iH({_tag:"ISingleton",a:e}),i0=e=>iW(e)?e:iH({_tag:"IArray",array:sK(e)}),i1=(e,t,n)=>{switch(e.backing._tag){case"IArray":!function(e,t,n,s,i){for(let t=0;t<Math.min(e.length,0+i);t++)n[s+t-0]=e[t]}(e.backing.array,0,t,n,e.length);break;case"IConcat":i1(e.left,t,n),i1(e.right,t,n+e.left.length);break;case"ISingleton":t[n]=e.backing.a;break;case"ISlice":{let s=0,i=n;for(;s<e.length;)t[i]=i8(e,s),s+=1,i+=1}}},i2=e=>{switch(e.backing._tag){case"IEmpty":return iK;case"IArray":return e.backing.array;default:{let t=Array(e.length);return i1(e,t,0),e.backing={_tag:"IArray",array:t},e.left=iY,e.right=iY,e.depth=0,t}}},i3=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return iH({_tag:"IArray",array:it(e.backing.array)});case"IConcat":return iH({_tag:"IConcat",left:i3(e.backing.right),right:i3(e.backing.left)});case"ISlice":return i4(it(i2(e)))}},i5=b(2,(e,t)=>t<0||t>=e.length?sw():e5(i8(e,t))),i4=e=>iH({_tag:"IArray",array:e}),i6=e=>i4(e),i8=b(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?i8(e.left,t):i8(e.right,t-e.left.length);case"ISlice":return i8(e.backing.chunk,t+e.backing.offset)}}),i7=b(2,(e,t)=>rt(e,iZ(t))),i9=b(2,(e,t)=>rt(iZ(t),e)),re=b(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return iY;switch(e.backing._tag){case"ISlice":return iH({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return re(e.right,t-e.left.length);return iH({_tag:"IConcat",left:re(e.left,t),right:e.right});default:return iH({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),rt=b(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let n=t.depth-e.depth;if(1>=Math.abs(n))return iH({_tag:"IConcat",left:e,right:t});if(n<-1){if(e.left.depth>=e.right.depth){let n=rt(e.right,t);return iH({_tag:"IConcat",left:e.left,right:n})}{let n=rt(e.right.right,t);if(n.depth===e.depth-3){let t=iH({_tag:"IConcat",left:e.right.left,right:n});return iH({_tag:"IConcat",left:e.left,right:t})}{let t=iH({_tag:"IConcat",left:e.left,right:e.right.left});return iH({_tag:"IConcat",left:t,right:n})}}}if(t.right.depth>=t.left.depth)return iH({_tag:"IConcat",left:rt(e,t.left),right:t.right});{let n=rt(e,t.left.left);if(n.depth===t.depth-3){let e=iH({_tag:"IConcat",left:n,right:t.left.right});return iH({_tag:"IConcat",left:e,right:t.right})}{let e=iH({_tag:"IConcat",left:t.left.right,right:t.right});return iH({_tag:"IConcat",left:n,right:e})}}}),rn=e=>0===e.length,rs=e=>e.length>0,ri=i5(0),rr=e=>i8(e,0),ra=e=>re(e,1);function ro(e,t){var n;return n=e&t-1,n-=n>>1&1431655765,n=(n=(858993459&n)+(n>>2&858993459))+(n>>4)&252645135,n+=n>>8,127&(n+=n>>16)}let rl=(e,t)=>({value:e,previous:t});function rc(e,t,n,s){let i=s;if(!e){let e=s.length;i=Array(e);for(let t=0;t<e;++t)i[t]=s[t]}return i[t]=n,i}function ru(e,t,n){let s=n.length-1,i=0,r=0,a=n;if(e)i=r=t;else for(a=Array(s);i<t;)a[r++]=n[i++];for(++i;i<=s;)a[r++]=n[i++];return e&&(a.length=s),a}class rp{_tag="EmptyNode";modify(e,t,n,s,i,r){let a=n(sw());return e1(a)?new rp:(++r.value,new rd(e,s,i,a))}}function rm(e){return B(e,"EmptyNode")}function rh(e,t){return!rm(e)&&t===e.edit}class rd{edit;hash;key;value;_tag="LeafNode";constructor(e,t,n,s){this.edit=e,this.hash=t,this.key=n,this.value=s}modify(e,t,n,s,i,r){if(ex(i,this.key)){let t=n(this.value);return t===this.value?this:e1(t)?(--r.value,new rp):rh(this,e)?(this.value=t,this):new rd(e,s,i,t)}let a=n(sw());return e1(a)?this:(++r.value,rx(e,t,this.hash,this,s,new rd(e,s,i,a)))}}class rf{edit;hash;children;_tag="CollisionNode";constructor(e,t,n){this.edit=e,this.hash=t,this.children=n}modify(e,t,n,s,i,r){if(s===this.hash){let t=rh(this,e),s=this.updateCollisionList(t,e,this.hash,this.children,n,i,r);return s===this.children?this:s.length>1?new rf(e,this.hash,s):s[0]}let a=n(sw());return e1(a)?this:(++r.value,rx(e,t,this.hash,this,s,new rd(e,s,i,a)))}updateCollisionList(e,t,n,s,i,r,a){let o=s.length;for(let l=0;l<o;++l){let o=s[l];if("key"in o&&ex(r,o.key)){let c=o.value,u=i(c);if(u===c)return s;if(e1(u))return--a.value,ru(e,l,s);return rc(e,l,new rd(t,n,r,u),s)}}let l=i(sw());return e1(l)?s:(++a.value,rc(e,o,new rd(t,n,r,l),s))}}class rg{edit;mask;children;_tag="IndexedNode";constructor(e,t,n){this.edit=e,this.mask=t,this.children=n}modify(e,t,n,s,i,r){let a;let o=this.mask,l=this.children,c=s>>>t&31,u=1<<c,p=ro(o,u),m=o&u,h=rh(this,e);if(!m){let a=new rp().modify(e,t+5,n,s,i,r);return a?l.length>=16?function(e,t,n,s,i){let r=[],a=s,o=0;for(let e=0;a;++e)1&a&&(r[e]=i[o++]),a>>>=1;return r[t]=n,new rb(e,o+1,r)}(e,c,a,o,l):new rg(e,o|u,function(e,t,n,s){let i=s.length;if(e){let e=i;for(;e>=t;)s[e--]=s[e];return s[t]=n,s}let r=0,a=0,o=Array(i+1);for(;r<t;)o[a++]=s[r++];for(o[t]=n;r<i;)o[++a]=s[r++];return o}(h,p,a,l)):this}let d=l[p],f=d.modify(e,t+5,n,s,i,r);if(d===f)return this;let g=o;if(rm(f)){var b;if(!(g&=~u))return new rp;if(l.length<=2&&(rm(b=l[1^p])||"LeafNode"===b._tag||"CollisionNode"===b._tag))return l[1^p];a=ru(h,p,l)}else a=rc(h,p,f,l);return h?(this.mask=g,this.children=a,this):new rg(e,g,a)}}class rb{edit;size;children;_tag="ArrayNode";constructor(e,t,n){this.edit=e,this.size=t,this.children=n}modify(e,t,n,s,i,r){let a,o=this.size,l=this.children,c=s>>>t&31,u=l[c],p=(u||new rp).modify(e,t+5,n,s,i,r);if(u===p)return this;let m=rh(this,e);if(rm(u)&&!rm(p))++o,a=rc(m,c,p,l);else if(!rm(u)&&rm(p)){if(--o<=8)return function(e,t,n,s){let i=Array(t-1),r=0,a=0;for(let e=0,t=s.length;e<t;++e)if(e!==n){let t=s[e];t&&!rm(t)&&(i[r++]=t,a|=1<<e)}return new rg(e,a,i)}(e,o,c,l);a=rc(m,c,new rp,l)}else a=rc(m,c,p,l);return m?(this.size=o,this.children=a,this):new rb(e,o,a)}}function rx(e,t,n,s,i,r){let a;let o=t;for(;;){let t=function(e,t,n,s,i,r){if(n===i)return new rf(e,n,[r,s]);let a=n>>>t&31,o=i>>>t&31;return a===o?t=>new rg(e,1<<a|1<<o,[t]):new rg(e,1<<a|1<<o,a<o?[s,r]:[r,s])}(e,o,n,s,i,r);if("function"==typeof t)a=rl(t,a),o+=5;else{let e=t;for(;null!=a;)e=a.value(e),a=a.previous;return e}}}let ry="effect/HashMap",rv=Symbol.for(ry),r_={[rv]:rv,[Symbol.iterator](){return new rw(this,(e,t)=>[e,t])},[er](){let e=ea(ry);for(let t of this)e^=w(ea(t[0]),el(ea(t[1])));return eg(this,e)},[eb](e){if(rR(e)){if(e._size!==this._size)return!1;for(let t of this){let n=w(e,rF(t[0],ea(t[0])));if(e1(n)||!ex(t[1],n.value))return!1}return!0}return!1},toString(){return ek(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},rS=(e,t,n,s)=>{let i=Object.create(r_);return i._editable=e,i._edit=t,i._root=n,i._size=s,i};class rw{map;f;v;constructor(e,t){this.map=e,this.f=t,this.v=rO(this.map._root,this.f,void 0)}next(){if(e1(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=rk(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new rw(this.map,this.f)}}let rk=e=>e?rE(e[0],e[1],e[2],e[3],e[4]):sw(),rO=(e,t,n)=>{switch(e._tag){case"LeafNode":if(e2(e.value))return e5({value:t(e.key,e.value.value),cont:n});return rk(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let s=e.children;return rE(s.length,s,0,t,n)}default:return rk(n)}},rE=(e,t,n,s,i)=>{for(;n<e;){let r=t[n++];if(r&&!rm(r))return rO(r,s,[e,t,n,s,i])}return rk(i)},rI=rS(!1,0,new rp,0),rT=()=>rI,rR=e=>z(e,rv),rN=b(2,(e,t)=>rF(e,t,ea(t))),rF=b(3,(e,t,n)=>{let s=e._root,i=0;for(;;)switch(s._tag){case"LeafNode":return ex(t,s.key)?s.value:sw();case"CollisionNode":if(n===s.hash){let e=s.children;for(let n=0,s=e.length;n<s;++n){let s=e[n];if("key"in s&&ex(t,s.key))return s.value}}return sw();case"IndexedNode":{let e=1<<(n>>>i&31);if(s.mask&e){s=s.children[ro(s.mask,e)],i+=5;break}return sw()}case"ArrayNode":if(s=s.children[n>>>i&31]){i+=5;break}return sw();default:return sw()}}),rM=b(2,(e,t)=>e2(rF(e,t,ea(t)))),rA=b(3,(e,t,n)=>rD(e,t,()=>e5(n))),rj=b(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:rS(e._editable,e._edit,t,n)),rC=e=>new rw(e,e=>e),rL=e=>e._size,rU=e=>rS(!0,e._edit+1,e._root,e._size),r$=e=>(e._editable=!1,e),rD=((e,t)=>{let n=rU(e);return t(n),r$(n)},b(3,(e,t,n)=>rP(e,t,ea(t),n))),rP=b(4,(e,t,n,s)=>{let i={value:e._size},r=e._root.modify(e._editable?e._edit:NaN,0,s,n,t,i);return w(e,rj(r,i.value))}),rz=b(2,(e,t)=>rD(e,t,sw)),rB=b(2,(e,t)=>rJ(e,rT(),(e,n,s)=>rA(e,s,t(n,s)))),rq=b(2,(e,t)=>rJ(e,void 0,(e,n,s)=>t(n,s))),rJ=b(3,(e,t,n)=>{let s;let i=e._root;if("LeafNode"===i._tag)return e2(i.value)?n(t,i.value.value,i.key):t;if("EmptyNode"===i._tag)return t;let r=[i.children];for(;s=r.pop();)for(let e=0,i=s.length;e<i;){let i=s[e++];i&&!rm(i)&&("LeafNode"===i._tag?e2(i.value)&&(t=n(t,i.value.value,i.key)):r.push(i.children))}return t}),rK="effect/HashSet",rV=Symbol.for(rK),rG={[rV]:rV,[Symbol.iterator](){return rC(this._keyMap)},[er](){return eg(this,el(ea(this._keyMap))(ea(rK)))},[eb](e){return!!rW(e)&&rL(this._keyMap)===rL(e._keyMap)&&ex(this._keyMap,e._keyMap)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},rH=e=>{let t=Object.create(rG);return t._keyMap=e,t},rW=e=>z(e,rV),rY=rH(rT()),rQ=()=>rY,rX=b(2,(e,t)=>rM(e._keyMap,t)),rZ=b(2,(e,t)=>{let n=!1;for(let s of e)if(n=t(s))break;return n}),r0=b(2,(e,t)=>!rZ(e,e=>!t(e))),r1=e=>rH(rU(e._keyMap)),r2=e=>(e._keyMap._editable=!1,e),r3=b(2,(e,t)=>{let n=r1(e);return t(n),r2(n)}),r5=b(2,(e,t)=>e._keyMap._editable?(rA(t,!0)(e._keyMap),e):rH(rA(t,!0)(e._keyMap))),r4=b(2,(e,t)=>e._keyMap._editable?(rz(t)(e._keyMap),e):rH(rz(t)(e._keyMap))),r6=b(2,(e,t)=>r3(e,e=>{for(let n of t)r4(e,n)})),r8=b(2,(e,t)=>r3(rQ(),n=>{for(let s of(r7(e,e=>r5(n,e)),t))r5(n,s)})),r7=b(2,(e,t)=>rq(e._keyMap,(e,n)=>t(n))),r9=b(3,(e,t,n)=>rJ(e._keyMap,t,(e,t,s)=>n(e,s))),ae=e=>{let t=r1(rQ());for(let n of e)r5(t,n);return r2(t)},at=(...e)=>{let t=r1(rQ());for(let n of e)r5(t,n);return r2(t)},an=e=>rL(e._keyMap),as=Symbol.for("effect/MutableRef"),ai={[as]:as,toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableRef",current:ew(this.current)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},ar=e=>{let t=Object.create(ai);return t.current=e,t},aa=b(3,(e,t,n)=>!!ex(t,e.current)&&(e.current=n,!0)),ao=e=>e.current,al=b(2,(e,t)=>(e.current=t,e)),ac="effect/FiberId",au=Symbol.for(ac),ap="None",am="Runtime",ah="Composite",ad=em(`${ac}-${ap}`);class af{[au]=au;_tag=ap;id=-1;startTimeMillis=-1;[er](){return ad}[eb](e){return ay(e)&&e._tag===ap}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[eS](){return this.toJSON()}}class ag{id;startTimeMillis;[au]=au;_tag=am;constructor(e,t){this.id=e,this.startTimeMillis=t}[er](){return eg(this,em(`${ac}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[eb](e){return ay(e)&&e._tag===am&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[eS](){return this.toJSON()}}class ab{left;right;[au]=au;_tag=ah;constructor(e,t){this.left=e,this.right=t}_hash;[er](){return w(em(`${ac}-${this._tag}`),el(ea(this.left)),el(ea(this.right)),eg(this))}[eb](e){return ay(e)&&e._tag===ah&&ex(this.left,e.left)&&ex(this.right,e.right)}toString(){return ek(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:ew(this.left),right:ew(this.right)}}[eS](){return this.toJSON()}}let ax=new af,ay=e=>z(e,au),av=e=>e._tag===ap||w(aE(e),r0(e=>av(e))),a_=b(2,(e,t)=>e._tag===ap?t:t._tag===ap?e:new ab(e,t)),aS=b(2,(e,t)=>av(e)?t:e),aw=e=>{switch(e._tag){case ap:return rQ();case am:return at(e.id);case ah:return w(aw(e.left),r8(aw(e.right)))}},ak=I(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>ar(0)),aO=e=>Array.from(aw(e)).map(e=>`#${e}`).join(","),aE=e=>{switch(e._tag){case ap:return rQ();case am:return at(e);case ah:return w(aE(e.left),r8(aE(e.right)))}},aI=ax,aT=(e,t)=>new ag(e,t),aR=(e,t)=>new ab(e,t),aN=ay,aF=()=>{let e=ao(ak);return w(ak,al(e+1)),new ag(e,Date.now())},aM=e=>{let t=rU(rT());for(let n of e)rA(t,n[0],n[1]);return r$(t)},aA=e=>e&&rm(e._root),aj=Symbol.for("effect/List"),aC=e=>sK(e),aL=sy(s_(ex),aC),aU={[aj]:aj,_tag:"Cons",toString(){return ek(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:aC(this).map(ew)}},[eS](){return this.toJSON()},[eb](e){return az(e)&&this._tag===e._tag&&aL(this,e)},[er](){return eg(this,ef(aC(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let n=t.head;return t=t.tail,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eI(this,arguments)}},a$=(e,t)=>{let n=Object.create(aU);return n.head=e,n.tail=t,n},aD=em("Nil"),aP=Object.create({[aj]:aj,_tag:"Nil",toString(){return ek(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[eS](){return this.toJSON()},[er]:()=>aD,[eb](e){return az(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eI(this,arguments)}}),az=e=>z(e,aj),aB=e=>"Nil"===e._tag,aq=e=>"Cons"===e._tag,aJ=(e,t)=>a$(e,t),aK=()=>aP,aV=e=>a$(e,aP),aG=b(2,(e,t)=>aW(t,e)),aH=b(2,(e,t)=>aJ(t,e)),aW=b(2,(e,t)=>{if(aB(e))return t;if(aB(t))return e;{let n=a$(t.head,e),s=n,i=t.tail;for(;!aB(i);){let t=a$(i.head,e);s.tail=t,s=t,i=i.tail}return n}}),aY=b(3,(e,t,n)=>{let s=t,i=e;for(;!aB(i);)s=n(s,i.head),i=i.tail;return s}),aQ=e=>{let t=aK(),n=e;for(;!aB(n);)t=aH(t,n.head),n=n.tail;return t},aX="Expected List to be non-empty",aZ=e=>{if(aB(e))throw Error(aX);return e.head},a0=e=>{if(aB(e))throw Error(aX);return e.tail};Array.prototype;let a1=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=eG,e}(),a2=e=>Object.assign(Object.create(eG),e),a3=Symbol.for("effect/DifferChunkPatch");function a5(e){return e}({...a1.prototype,[a3]:{_Value:a5,_Patch:a5}});let a4=Symbol.for("effect/DifferContextPatch");function a6(e){return e}let a8={...a1.prototype,[a4]:{_Value:a6,_Patch:a6}},a7=Object.create(Object.assign(Object.create(a8),{_tag:"Empty"})),a9=()=>a7,oe=Object.assign(Object.create(a8),{_tag:"AndThen"}),ot=(e,t)=>{let n=Object.create(oe);return n.first=e,n.second=t,n},on=Object.assign(Object.create(a8),{_tag:"AddService"}),os=(e,t)=>{let n=Object.create(on);return n.key=e,n.service=t,n},oi=Object.assign(Object.create(a8),{_tag:"RemoveService"}),or=e=>{let t=Object.create(oi);return t.key=e,t},oa=Object.assign(Object.create(a8),{_tag:"UpdateService"}),oo=(e,t)=>{let n=Object.create(oa);return n.key=e,n.update=t,n},ol=(e,t)=>{let n=new Map(e.unsafeMap),s=a9();for(let[e,i]of t.unsafeMap.entries())if(n.has(e)){let t=n.get(e);n.delete(e),ex(t,i)||(s=oc(oo(e,()=>i))(s))}else n.delete(e),s=oc(os(e,i))(s);for(let[e]of n.entries())s=oc(or(e))(s);return s},oc=b(2,(e,t)=>ot(e,t)),ou=b(2,(e,t)=>{if("Empty"===e._tag)return t;let n=!1,s=iZ(e),i=new Map(t.unsafeMap);for(;rs(s);){let e=rr(s),t=ra(s);switch(e._tag){case"Empty":s=t;break;case"AddService":i.set(e.key,e.service),s=t;break;case"AndThen":s=i9(i9(t,e.second),e.first);break;case"RemoveService":i.delete(e.key),s=t;break;case"UpdateService":i.set(e.key,e.update(i.get(e.key))),n=!0,s=t}}if(!n)return te(i);let r=new Map;for(let[e]of t.unsafeMap)i.has(e)&&(r.set(e,i.get(e)),i.delete(e));for(let[e,t]of i)r.set(e,t);return te(r)}),op=Symbol.for("effect/DifferHashMapPatch");function om(e){return e}({...a1.prototype,[op]:{_Value:om,_Key:om,_Patch:om}});let oh=Symbol.for("effect/DifferHashSetPatch");function od(e){return e}let of={...a1.prototype,[oh]:{_Value:od,_Key:od,_Patch:od}},og=Object.create(Object.assign(Object.create(of),{_tag:"Empty"})),ob=()=>og,ox=Object.assign(Object.create(of),{_tag:"AndThen"}),oy=(e,t)=>{let n=Object.create(ox);return n.first=e,n.second=t,n},ov=Object.assign(Object.create(of),{_tag:"Add"}),o_=e=>{let t=Object.create(ov);return t.value=e,t},oS=Object.assign(Object.create(of),{_tag:"Remove"}),ow=e=>{let t=Object.create(oS);return t.value=e,t},ok=(e,t)=>{let[n,s]=r9([e,ob()],([e,t],n)=>rX(n)(e)?[r4(n)(e),t]:[e,oO(o_(n))(t)])(t);return r9(s,(e,t)=>oO(ow(t))(e))(n)},oO=b(2,(e,t)=>oy(e,t)),oE=b(2,(e,t)=>{if("Empty"===e._tag)return t;let n=t,s=iZ(e);for(;rs(s);){let e=rr(s),t=ra(s);switch(e._tag){case"Empty":s=t;break;case"AndThen":s=i9(e.first)(i9(e.second)(t));break;case"Add":n=r5(e.value)(n),s=t;break;case"Remove":n=r4(e.value)(n),s=t}}return n}),oI=Symbol.for("effect/DifferOrPatch");function oT(e){return e}let oR={...a1.prototype,[oI]:{_Value:oT,_Key:oT,_Patch:oT}},oN=Object.create(Object.assign(Object.create(oR),{_tag:"Empty"})),oF=Object.assign(Object.create(oR),{_tag:"AndThen"}),oM=(e,t)=>{let n=Object.create(oF);return n.first=e,n.second=t,n},oA=Object.assign(Object.create(oR),{_tag:"SetLeft"}),oj=Object.assign(Object.create(oR),{_tag:"SetRight"}),oC=Object.assign(Object.create(oR),{_tag:"UpdateLeft"}),oL=Object.assign(Object.create(oR),{_tag:"UpdateRight"}),oU=((e,t)=>oM(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function o$(e){return e}let oD={...a1.prototype,[oU]:{_Value:o$,_Patch:o$}},oP=Object.create(Object.assign(Object.create(oD),{_tag:"Empty"})),oz=()=>oP,oB=Object.assign(Object.create(oD),{_tag:"AndThen"}),oq=(e,t)=>{let n=Object.create(oB);return n.first=e,n.second=t,n},oJ=Object.assign(Object.create(oD),{_tag:"Append"}),oK=e=>{let t=Object.create(oJ);return t.values=e,t},oV=Object.assign(Object.create(oD),{_tag:"Slice"}),oG=(e,t)=>{let n=Object.create(oV);return n.from=e,n.until=t,n},oH=Object.assign(Object.create(oD),{_tag:"Update"}),oW=(e,t)=>{let n=Object.create(oH);return n.index=e,n.patch=t,n},oY=e=>{let t=0,n=oz();for(;t<e.oldValue.length&&t<e.newValue.length;){let s=e.oldValue[t],i=e.newValue[t],r=e.differ.diff(s,i);ex(r,e.differ.empty)||(n=oQ(n,oW(t,r))),t+=1}return t<e.oldValue.length&&(n=oQ(n,oG(0,t))),t<e.newValue.length&&(n=oQ(n,oK(ie(t)(e.newValue)))),n},oQ=b(2,(e,t)=>oq(e,t)),oX=b(3,(e,t,n)=>{if("Empty"===e._tag)return t;let s=t.slice(),i=ih(e);for(;sS(i);){let e=s5(i),t=s8(i);switch(e._tag){case"Empty":i=t;break;case"AndThen":t.unshift(e.first,e.second),i=t;break;case"Append":for(let t of e.values)s.push(t);i=t;break;case"Slice":s=s.slice(e.from,e.until),i=t;break;case"Update":s[e.index]=n.patch(e.patch,s[e.index]),i=t}}return s}),oZ={[Symbol.for("effect/Differ")]:{_P:x,_V:x}},o0=e=>{let t=Object.create(oZ);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},o1=()=>o0({empty:a9(),combine:(e,t)=>oc(t)(e),diff:(e,t)=>ol(e,t),patch:(e,t)=>ou(t)(e)}),o2=()=>o0({empty:ob(),combine:(e,t)=>oO(t)(e),diff:(e,t)=>ok(e,t),patch:(e,t)=>oE(t)(e)}),o3=e=>o0({empty:oz(),combine:(e,t)=>oQ(e,t),diff:(t,n)=>oY({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>oX(t,n,e)}),o5=()=>o4((e,t)=>t),o4=e=>o0({empty:x,combine:(e,t)=>e===x?t:t===x?e:n=>t(e(n)),diff:(e,t)=>ex(e,t)?x:y(t),patch:(t,n)=>e(n,t(n))}),o6=e=>255&e,o8=e=>e>>8&255,o7=(e,t)=>(255&e)+((t&e&255)<<8),o9=o7(0,0),le=b(2,(e,t)=>o7(o6(e)&~t,o8(e))),lt=b(2,(e,t)=>e|t),ln=e=>~e>>>0&255,ls=e=>lo(e,32),li=b(2,(e,t)=>e|t),lr=e=>la(e)&&!lp(e),la=e=>lo(e,1),lo=b(2,(e,t)=>(e&t)!=0),ll=(...e)=>e.reduce((e,t)=>e|t,0),lc=ll(0),lu=e=>lo(e,4),lp=e=>lo(e,16),lm=b(2,(e,t)=>o7(e^t,t)),lh=b(2,(e,t)=>e&(ln(o6(t))|o8(t))|o6(t)&o8(t)),ld=o0({empty:o9,diff:(e,t)=>lm(e,t),combine:(e,t)=>lt(t)(e),patch:(e,t)=>lh(t,e)}),lf=e=>o7(e,e),lg=e=>o7(e,0),lb="Empty",lx="Fail",ly="Interrupt",lv="Parallel",l_="Sequential",lS="effect/Cause",lw=Symbol.for(lS),lk={[lw]:{_E:e=>e},[er](){return w(ea(lS),el(ea(lG(this))),eg(this))},[eb](e){return lF(e)&&lV(this,e)},pipe(){return eI(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:ew(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:ew(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:ew(this.left),right:ew(this.right)}}},toString(){return l3(this)},[eS](){return this.toJSON()}},lO=(()=>{let e=Object.create(lk);return e._tag=lb,e})(),lE=e=>{let t=Object.create(lk);return t._tag=lx,t.error=e,t},lI=e=>{let t=Object.create(lk);return t._tag="Die",t.defect=e,t},lT=e=>{let t=Object.create(lk);return t._tag=ly,t.fiberId=e,t},lR=(e,t)=>{let n=Object.create(lk);return n._tag=lv,n.left=e,n.right=t,n},lN=(e,t)=>{let n=Object.create(lk);return n._tag=l_,n.left=e,n.right=t,n},lF=e=>z(e,lw),lM=e=>"Die"===e._tag,lA=e=>e._tag===lb||l1(e,!0,(e,t)=>{switch(t._tag){case lb:return e5(e);case"Die":case lx:case ly:return e5(!1);default:return sw()}}),lj=e=>e2(lz(e)),lC=e=>l2(void 0,lQ)(e),lL=e=>i3(l1(e,iQ(),(e,t)=>t._tag===lx?e5(w(e,i9(t.error))):sw())),lU=e=>i3(l1(e,iQ(),(e,t)=>"Die"===t._tag?e5(w(e,i9(t.defect))):sw())),l$=e=>l1(e,rQ(),(e,t)=>t._tag===ly?e5(w(e,r5(t.fiberId))):sw()),lD=e=>lW(e,e=>e._tag===lx?e5(e.error):sw()),lP=e=>{let t=lD(e);switch(t._tag){case"None":return t_(e);case"Some":return tv(t.value)}},lz=e=>lW(e,e=>e._tag===ly?e5(e.fiberId):sw()),lB=e=>l0(e,{onEmpty:sw(),onFail:e=>e5(lI(e)),onDie:e=>e5(lI(e)),onInterrupt:()=>sw(),onSequential:(e,t)=>e2(e)&&e2(t)?e5(lN(e.value,t.value)):e2(e)&&e1(t)?e5(e.value):e1(e)&&e2(t)?e5(t.value):sw(),onParallel:(e,t)=>e2(e)&&e2(t)?e5(lR(e.value,t.value)):e2(e)&&e1(t)?e5(e.value):e1(e)&&e2(t)?e5(t.value):sw()}),lq=e=>l0(e,{onEmpty:lO,onFail:()=>lO,onDie:e=>lI(e),onInterrupt:e=>lT(e),onSequential:lN,onParallel:lR}),lJ=e=>l0(e,{onEmpty:lO,onFail:e=>lI(e),onDie:e=>lI(e),onInterrupt:e=>lT(e),onSequential:(e,t)=>lN(e,t),onParallel:(e,t)=>lR(e,t)}),lK=((e,t)=>lK(e,e=>lE(t(e))),b(2,(e,t)=>l0(e,{onEmpty:lO,onFail:e=>t(e),onDie:e=>lI(e),onInterrupt:e=>lT(e),onSequential:(e,t)=>lN(e,t),onParallel:(e,t)=>lR(e,t)}))),lV=(e,t)=>{let n=iZ(e),s=iZ(t);for(;rs(n)&&rs(s);){let[e,t]=w(rr(n),l1([rQ(),iQ()],([e,t],n)=>{let[s,i]=lY(n);return e5([w(e,r8(s)),w(t,rt(i))])})),[i,r]=w(rr(s),l1([rQ(),iQ()],([e,t],n)=>{let[s,i]=lY(n);return e5([w(e,r8(s)),w(t,rt(i))])}));if(!ex(e,i))return!1;n=t,s=r}return!0},lG=e=>lH(iZ(e),iQ()),lH=(e,t)=>{for(;;){let[n,s]=w(e,iy([rQ(),iQ()],([e,t],n)=>{let[s,i]=lY(n);return[w(e,r8(s)),w(t,rt(i))]})),i=an(n)>0?w(t,i9(n)):t;if(rn(s))return i3(i);e=s,t=i}throw Error(W("Cause.flattenCauseLoop"))},lW=b(2,(e,t)=>{let n=[e];for(;n.length>0;){let e=n.pop(),s=t(e);switch(s._tag){case"None":switch(e._tag){case l_:case lv:n.push(e.right),n.push(e.left)}break;case"Some":return s}}return sw()}),lY=e=>{let t=e,n=[],s=rQ(),i=iQ();for(;void 0!==t;)switch(t._tag){case lb:if(0===n.length)return[s,i];t=n.pop();break;case lx:if(s=r5(s,iX(t._tag,t.error)),0===n.length)return[s,i];t=n.pop();break;case"Die":if(s=r5(s,iX(t._tag,t.defect)),0===n.length)return[s,i];t=n.pop();break;case ly:if(s=r5(s,iX(t._tag,t.fiberId)),0===n.length)return[s,i];t=n.pop();break;case l_:switch(t.left._tag){case lb:t=t.right;break;case l_:t=lN(t.left.left,lN(t.left.right,t.right));break;case lv:t=lR(lN(t.left.left,t.right),lN(t.left.right,t.right));break;default:i=i9(i,t.right),t=t.left}break;case lv:n.push(t.right),t=t.left}throw Error(W("Cause.evaluateCauseLoop"))},lQ={emptyCase:v,failCase:_,dieCase:_,interruptCase:v,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},lX="SequentialCase",lZ="ParallelCase",l0=b(2,(e,{onDie:t,onEmpty:n,onFail:s,onInterrupt:i,onParallel:r,onSequential:a})=>l2(e,void 0,{emptyCase:()=>n,failCase:(e,t)=>s(t),dieCase:(e,n)=>t(n),interruptCase:(e,t)=>i(t),sequentialCase:(e,t,n)=>a(t,n),parallelCase:(e,t,n)=>r(t,n)})),l1=b(3,(e,t,n)=>{let s=t,i=e,r=[];for(;void 0!==i;){let e=n(s,i);switch(s=e2(e)?e.value:s,i._tag){case l_:case lv:r.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&r.length>0&&(i=r.pop())}return s}),l2=b(3,(e,t,n)=>{let s=[e],i=[];for(;s.length>0;){let e=s.pop();switch(e._tag){case lb:i.push(t_(n.emptyCase(t)));break;case lx:i.push(t_(n.failCase(t,e.error)));break;case"Die":i.push(t_(n.dieCase(t,e.defect)));break;case ly:i.push(t_(n.interruptCase(t,e.fiberId)));break;case l_:s.push(e.right),s.push(e.left),i.push(tv({_tag:lX}));break;case lv:s.push(e.right),s.push(e.left),i.push(tv({_tag:lZ}))}}let r=[];for(;i.length>0;){let e=i.pop();switch(e._tag){case"Left":switch(e.left._tag){case lX:{let e=r.pop(),s=r.pop(),i=n.sequentialCase(t,e,s);r.push(i);break}case lZ:{let e=r.pop(),s=r.pop(),i=n.parallelCase(t,e,s);r.push(i)}}break;case"Right":r.push(e.right)}}if(0===r.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return r.pop()}),l3=e=>lC(e)?"All fibers interrupted without errors.":ce(e).map(e=>e.stack).join("\n");class l5 extends globalThis.Error{span=void 0;constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=0,super(l4(e)),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=t,this.name=e instanceof Error?e.name:"Error","object"==typeof e&&null!==e&&(l9 in e&&(this.span=e[l9]),Object.keys(e).forEach(t=>{t in this||(this[t]=e[t])})),this.stack=l7(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}let l4=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if(z(e,"toString")&&j(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return JSON.stringify(e)},l6=/\((.*)\)/,l8=I("effect/Tracer/spanToTrace",()=>new WeakMap),l7=(e,t,n)=>{let s=[e],i=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<i.length&&!i[e].includes("Generator.next");e++){if(i[e].includes("effect_internal_function")){s.pop();break}s.push(i[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let e=n,t=0;for(;e&&"Span"===e._tag&&t<10;){let n=l8.get(e);if("function"==typeof n){let t=n(),i=t.match(l6),r=i?i[1]:t.replace(/^at /,"");s.push(`    at ${e.name} (${r})`)}else s.push(`    at ${e.name}`);e=sR(e.parent),t++}}return s.join("\n")},l9=Symbol.for("effect/SpanAnnotation"),ce=e=>l2(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new l5(t)],failCase:(e,t)=>[new l5(t)],interruptCase:()=>[],parallelCase:(e,t,n)=>[...t,...n],sequentialCase:(e,t,n)=>[...t,...n]}),ct="Pending",cn="Done",cs=Symbol.for("effect/Deferred"),ci={_E:e=>e,_A:e=>e},cr=e=>({_tag:ct,joiners:e}),ca=e=>({_tag:cn,effect:e}),co=Symbol.for("effect/Tracer"),cl=tc("effect/Tracer"),cc=tc("effect/ParentSpan"),cu=function(){let e="abcdef0123456789",t=e.length;return function(n){let s="";for(let i=0;i<n;i++)s+=e.charAt(Math.floor(Math.random()*t));return s}}();class cp{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,t,n,s,i,r){this.name=e,this.parent=t,this.context=n,this.links=s,this.startTime=i,this.kind=r,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:cu(32),this.spanId=cu(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,n){this.events.push([e,t,n??{}])}}let cm=e=>{if(e?.captureStackTrace===!1||e?.captureStackTrace!==void 0&&"boolean"!=typeof e.captureStackTrace)return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let n=Error();Error.stackTraceLimit=t;let s=!1;return{...e,captureStackTrace:()=>{if(!1!==s)return s;if(void 0!==n.stack){let e=n.stack.split("\n");if(void 0!==e[3])return s=e[3].trim()}}}},ch=Symbol.for("effect/EffectError"),cd=e=>z(e,ch),cf=e=>({[ch]:ch,_tag:"EffectError",cause:e}),cg=(e,t)=>{let n=new cv("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},cb=e=>{let t=new cv("RunBlocked");return t.effect_instruction_i0=e,t},cx=Symbol.for("effect/Effect");class cy{patch;op;_op=eP;constructor(e,t){this.patch=e,this.op=t}}class cv{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cx]=eK;constructor(e){this._op=e}[eb](e){return this===e}[er](){return eg(this,eo(this))}pipe(){return eI(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:ew(this.effect_instruction_i0),effect_instruction_i1:ew(this.effect_instruction_i1),effect_instruction_i2:ew(this.effect_instruction_i2)}}toString(){return ek(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new tO(new ee(this))}}class c_{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cx]=eK;constructor(e){this._op=e,this._tag=e}[eb](e){return pd(e)&&"Failure"===e._op&&ex(this.effect_instruction_i0,e.effect_instruction_i0)}[er](){return w(em(this._tag),el(ea(this.effect_instruction_i0)),eg(this))}get cause(){return this.effect_instruction_i0}pipe(){return eI(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return ek(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new tO(new ee(this))}}class cS{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[cx]=eK;constructor(e){this._op=e,this._tag=e}[eb](e){return pd(e)&&"Success"===e._op&&ex(this.effect_instruction_i0,e.effect_instruction_i0)}[er](){return w(em(this._tag),el(ea(this.effect_instruction_i0)),eg(this))}get value(){return this.effect_instruction_i0}pipe(){return eI(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:ew(this.value)}}toString(){return ek(this.toJSON())}[eS](){return this.toJSON()}[Symbol.iterator](){return new tO(new ee(this))}}let cw=e=>z(e,cx),ck=e=>{let t=new cv(e$);return t.effect_instruction_i0=e,t},cO=b(3,(e,t,n)=>up(s=>cG(e,e=>cG(cP(ur(()=>s(t(e)))),t=>ur(()=>n(e,t)).pipe(cX({onFailure:e=>{switch(t._tag){case eN:return cq(lR(t.effect_instruction_i0,e));case ej:return cq(e)}},onSuccess:()=>t})))))),cE=b(2,(e,t)=>cG(e,()=>ui(t))),cI=e=>cE(e,void 0),cT=function(){let e=new cv(eR);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(W("you're not supposed to end up here"))}return e},cR=(e,t=aI)=>{let n;let s=new cv(eT);return s.effect_instruction_i0=t=>{n=e(t)},s.effect_instruction_i1=t,void 0!==n?c9(s,e=>n):s},cN=(e,t=aI)=>cT(e,function(){let e,n,s,i;function r(t){e?e(t):void 0===n&&(n=t)}let a=new cv(eT);return a.effect_instruction_i0=t=>{e=t,n&&t(n)},a.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(i=new AbortController,s=es(()=>this.effect_instruction_i0(r,i.signal))):s=es(()=>this.effect_instruction_i0(r)),s||i?c9(a,e=>(i&&i.abort(),s??um)):a}),cF=b(2,(e,t)=>{let n=new cv(eF);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),cM=b(2,(e,t)=>cZ(e,{onFailure:t,onSuccess:ui})),cA=b(3,(e,t,n)=>cF(e,e=>{let s=lP(e);switch(s._tag){case"Left":return t(s.left)?n(s.left):cq(e);case"Right":return cq(s.right)}})),cj=Symbol.for("effect/SpanAnnotation"),cC=Symbol.for("effect/OriginalAnnotation"),cL=(e,t)=>e2(t)?new Proxy(e,{has:(e,t)=>t===cj||t===cC||t in e,get:(n,s)=>s===cj?t.value:s===cC?e:n[s]}):e,cU=e=>!P(e)||cj in e?cq(lI(e)):ck(t=>cq(lI(cL(e,pG(t))))),c$=e=>cJ(()=>lI(new po(e))),cD=e=>cZ(e,{onFailure:e=>ui(tv(e)),onSuccess:e=>ui(t_(e))}),cP=e=>cQ(e,{onFailure:p_,onSuccess:pI}),cz=e=>!P(e)||cj in e?cq(lE(e)):ck(t=>cq(lE(cL(e,pG(t))))),cB=e=>cG(ua(e),cz),cq=e=>{let t=new c_(eN);return t.effect_instruction_i0=e,t},cJ=e=>cG(ua(e),cq),cK=ck(e=>ui(e.id())),cV=e=>ck(t=>e(t.id())),cG=b(2,(e,t)=>{let n=new cv(eM);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),cH=b(2,(e,t)=>cG(e,e=>{let n="function"==typeof t?t(e):t;return cw(n)?n:H(n)?cN(e=>{n.then(t=>e(ui(t)),t=>e(cz(new ph(t))))}):ui(n)})),cW=e=>{let t=new cv("OnStep");return t.effect_instruction_i0=e,t},cY=e=>cG(e,x),cQ=b(2,(e,t)=>cX(e,{onFailure:e=>ui(t.onFailure(e)),onSuccess:e=>ui(t.onSuccess(e))})),cX=b(2,(e,t)=>{let n=new cv(eA);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),cZ=b(2,(e,t)=>cX(e,{onFailure:e=>{if(lU(e).length>0)return cq(lJ(e));let n=lL(e);return n.length>0?t.onFailure(rr(n)):cq(e)},onSuccess:t.onSuccess})),c0=b(2,(e,t)=>ur(()=>{let n=sK(e),s=sJ(n.length),i=0;return cE(uf({while:()=>i<n.length,body:()=>t(n[i],i),step:e=>{s[i++]=e}}),s)})),c1=b(2,(e,t)=>ur(()=>{let n=sK(e),s=0;return uf({while:()=>s<n.length,body:()=>t(n[s],s),step:()=>{s++}})})),c2=(e=>"boolean"==typeof e[0]||cw(e[0]),e=>cq(lT(e))),c3=e=>{let t=new cv(eL);return t.effect_instruction_i0=lf(1),t.effect_instruction_i1=()=>e,t},c5=b(2,(e,t)=>up(n=>cG(cP(n(e)),e=>pL(t,e)))),c4=b(2,(e,t)=>cG(e,e=>ua(()=>t(e)))),c6=b(2,(e,t)=>cZ(e,{onFailure:e=>cB(()=>t.onFailure(e)),onSuccess:e=>ua(()=>t.onSuccess(e))})),c8=b(2,(e,t)=>cX(e,{onFailure:e=>{let n=lP(e);switch(n._tag){case"Left":return cB(()=>t(n.left));case"Right":return cq(n.right)}},onSuccess:ui})),c7=((e,t)=>c7(e,e=>pg(e)?um:t(e.effect_instruction_i0)),b(2,(e,t)=>up(n=>cX(n(e),{onFailure:e=>{let n=p_(e);return cX(t(n),{onFailure:t=>p_(lN(e,t)),onSuccess:()=>n})},onSuccess:e=>{let n=pI(e);return uv(t(n),n)}})))),c9=b(2,(e,t)=>c7(e,pO({onFailure:e=>lC(e)?cI(t(l$(e))):um,onSuccess:()=>um}))),ue=b(2,(e,t)=>uc(e,t,ui)),ut=e=>un(e,x),un=b(2,(e,t)=>cZ(e,{onFailure:e=>cU(t(e)),onSuccess:ui})),us=(e,t)=>sK(e).reduceRight(([e,n],s)=>{let i=t(s);switch(i._tag){case"Left":return[[i.left,...e],n];case"Right":return[e,[i.right,...n]]}},[im(),im()]),ui=((e,t)=>ui(t.runtimeFlags),e=>{let t=new cS(ej);return t.effect_instruction_i0=e,t}),ur=e=>cG(ua(e),x),ua=e=>{let t=new cv(eC);return t.effect_instruction_i0=e,t},uo=b(2,(e,t)=>cG(e,e=>{let n="function"==typeof t?t(e):t;return cw(n)?cE(n,e):H(n)?cN(t=>{n.then(n=>t(ui(e)),e=>t(cz(new ph(e))))}):ui(e)})),ul=e=>ck(t=>{let n=w(t.getFiberRef(u2),sO(()=>t.scope()));return e(u$(u2,e5(n)))}),uc=b(3,(e,t,n)=>cX(e,{onFailure:e=>lU(e).length>0?cq(sF(lB(e))):t(),onSuccess:n})),uu=e=>{let t=new cv(eL);return t.effect_instruction_i0=lg(1),t.effect_instruction_i1=()=>e,t},up=e=>cT(e,function(){let e=new cv(eL);return e.effect_instruction_i0=lg(1),e.effect_instruction_i1=e=>la(e)?es(()=>this.effect_instruction_i0(c3)):es(()=>this.effect_instruction_i0(uu)),e}),um=ui(void 0),uh=e=>{let t=new cv(eL);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},ud=b(2,(e,t)=>cG(t,t=>t?w(e,c4(e5)):ui(sw()))),uf=e=>{let t=new cv(eU);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},ug=b(2,(e,t)=>{let n=new cv(eL);return n.effect_instruction_i0=t,n.effect_instruction_i1=()=>e,n}),ub=e=>{let t=new cv(eD);return void 0!==e?.priority?uQ(t,e.priority):t},ux=b(2,(e,t)=>cG(e,e=>c4(t,t=>[e,t]))),uy=b(2,(e,t)=>cG(e,e=>cE(t,e))),uv=b(2,(e,t)=>cG(e,()=>t)),u_=b(3,(e,t,n)=>cG(e,e=>c4(t,t=>n(e,t)))),uS=(()=>{let e=setInterval(()=>{},2147483648-1);return ua(()=>clearInterval(e))},e=>cG(cK,t=>w(e,uw(t)))),uw=b(2,(e,t)=>cG(e.interruptAsFork(t),()=>e.await)),uk={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eI(this,arguments)}},uO={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eI(this,arguments)}},uE={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eI(this,arguments)}},uI={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eI(this,arguments)}},uT=Symbol.for("effect/FiberRef"),uR={_A:e=>e},uN=e=>uA(e,e=>[e,e]),uF=b(2,(e,t)=>cG(uN(e),t)),uM=b(2,(e,t)=>uA(e,()=>[void 0,t])),uA=b(2,(e,t)=>ck(n=>{let[s,i]=t(n.getFiberRef(e));return n.setFiberRef(e,i),ui(s)})),uj=Symbol.for("effect/RequestResolver"),uC={_A:e=>e,_R:e=>e};class uL{runAll;target;[uj]=uC;constructor(e,t){this.runAll=e,this.target=t}[er](){return eg(this,this.target?ea(this.target):eo(this))}[eb](e){return this.target?uU(e)&&ex(this.target,e.target):this===e}identified(...e){return new uL(this.runAll,i0(e))}pipe(){return eI(this,arguments)}}let uU=e=>z(e,uj),u$=b(3,(e,t,n)=>cO(uy(uN(t),uM(t,n)),()=>e,e=>uM(t,e))),uD=b(3,(e,t,n)=>uF(t,s=>u$(e,t,n(s)))),uP=(e,t)=>uJ(e,{differ:o5(),fork:t?.fork??x,join:t?.join}),uz=e=>{let t=o2();return uJ(e,{differ:t,fork:t.empty})},uB=e=>{let t=o3(o5());return uJ(e,{differ:t,fork:t.empty})},uq=e=>{let t=o1();return uJ(e,{differ:t,fork:t.empty})},uJ=(e,t)=>({[uT]:uR,initial:e,diff:(e,n)=>t.differ.diff(e,n),combine:(e,n)=>t.differ.combine(e,n),patch:e=>n=>t.differ.patch(e,n),fork:t.fork,join:t.join??((e,t)=>t),pipe(){return eI(this,arguments)}}),uK=I(Symbol.for("effect/FiberRef/currentContext"),()=>uq(tp())),uV=I(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>uP(0)),uG=I(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>uP(2048)),uH=I(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>uP(rT())),uW=I(Symbol.for("effect/FiberRef/currentLogLevel"),()=>uP(uO)),uY=I(Symbol.for("effect/FiberRef/currentLogSpan"),()=>uP(aK())),uQ=b(2,(e,t)=>u$(e,uV,t)),uX=I(Symbol.for("effect/FiberRef/currentConcurrency"),()=>uP("unbounded")),uZ=I(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>uP(!0)),u0=I(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>uP(e5(uE))),u1=I(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>uB(im())),u2=I(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>uP(sw(),{fork:()=>sw(),join:(e,t)=>e})),u3=I(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>uP(lO,{fork:()=>lO,join:(e,t)=>e})),u5=I(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>uP(!0)),u4=I(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>uP(!0)),u6=I(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>uP(rT())),u8=I(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>uP(iQ())),u7=Symbol.for("effect/Scope"),u9=Symbol.for("effect/CloseableScope"),pe=(e,t)=>e.addFinalizer(()=>cI(t)),pt=(e,t)=>e.addFinalizer(t),pn=(e,t)=>e.close(t),ps=(e,t)=>e.fork(t),pi=function(){class e extends globalThis.Error{commit(){return cz(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[eS](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}return Object.assign(e.prototype,eH),e}(),pr=(e,t)=>{class n extends pi{_tag=t}return Object.assign(n.prototype,e),n.prototype.name=t,n},pa=Symbol.for("effect/Cause/errors/RuntimeException"),po=pr({[pa]:pa},"RuntimeException"),pl=Symbol.for("effect/Cause/errors/InterruptedException"),pc=e=>z(e,pl),pu=Symbol.for("effect/Cause/errors/NoSuchElement"),pp=pr({[pu]:pu},"NoSuchElementException"),pm=Symbol.for("effect/Cause/errors/UnknownException"),ph=function(){class e extends pi{error;_tag="UnknownException";constructor(e,t){super(t??(z(e,"message")&&R(e.message)?e.message:void 0)),this.error=e}}return Object.assign(e.prototype,{[pm]:pm,name:"UnknownException"}),e}(),pd=e=>cw(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),pf=e=>"Failure"===e._tag,pg=e=>"Success"===e._tag,pb=b(2,(e,t)=>{switch(e._tag){case eN:return p_(e.effect_instruction_i0);case ej:return pI(t)}}),px=e=>pb(e,void 0),py=(e,t)=>pN(e,t?.parallel?lR:lN),pv=e=>p_(lE(e)),p_=e=>{let t=new c_(eN);return t.effect_instruction_i0=e,t},pS=((e,t)=>{switch(e._tag){case eN:return p_(e.effect_instruction_i0);case ej:return t(e.effect_instruction_i0)}},b(2,(e,t)=>{switch(e._tag){case eN:return ui(p_(e.effect_instruction_i0));case ej:return cP(t(e.effect_instruction_i0))}})),pw=e=>p_(lT(e)),pk=b(2,(e,t)=>{switch(e._tag){case eN:return p_(e.effect_instruction_i0);case ej:return pI(t(e.effect_instruction_i0))}}),pO=b(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case eN:return t(e.effect_instruction_i0);case ej:return n(e.effect_instruction_i0)}}),pE=b(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case eN:return t(e.effect_instruction_i0);case ej:return n(e.effect_instruction_i0)}}),pI=e=>{let t=new cS(ej);return t.effect_instruction_i0=e,t},pT=pI(void 0),pR=b(3,(e,t,{onFailure:n,onSuccess:s})=>{switch(e._tag){case eN:switch(t._tag){case ej:return p_(e.effect_instruction_i0);case eN:return p_(n(e.effect_instruction_i0,t.effect_instruction_i0))}case ej:switch(t._tag){case ej:return pI(s(e.effect_instruction_i0,t.effect_instruction_i0));case eN:return p_(t.effect_instruction_i0)}}}),pN=(e,t)=>{let n=i0(e);return rs(n)?w(ra(n),iy(w(rr(n),pk(iZ)),(e,n)=>w(e,pR(n,{onSuccess:(e,t)=>w(e,i9(t)),onFailure:t}))),pk(i3),pk(e=>i2(e)),e5):sw()},pF=e=>({[cs]:ci,state:ar(cr([])),blockingOn:e,pipe(){return eI(this,arguments)}}),pM=()=>cG(cK,e=>pA(e)),pA=e=>ua(()=>pF(e)),pj=e=>cN(t=>{let n=ao(e.state);switch(n._tag){case cn:return t(n.effect);case ct:return n.joiners.push(t),pP(e,t)}},e.blockingOn),pC=b(2,(e,t)=>ua(()=>{let n=ao(e.state);switch(n._tag){case cn:return!1;case ct:al(e.state,ca(t));for(let e=0,s=n.joiners.length;e<s;e++)n.joiners[e](t);return!0}})),pL=b(2,(e,t)=>pC(e,t)),pU=b(2,(e,t)=>pC(e,cq(t))),p$=b(2,(e,t)=>pC(e,ui(t))),pD=(e,t)=>{let n=ao(e.state);if(n._tag===ct){al(e.state,ca(t));for(let e=0,s=n.joiners.length;e<s;e++)n.joiners[e](t)}},pP=(e,t)=>ua(()=>{let n=ao(e.state);if(n._tag===ct){let e=n.joiners.indexOf(t);e>=0&&n.joiners.splice(e,1)}}),pz=uN(uK),pB=()=>pz,pq=e=>cG(pB(),e),pJ=b(2,(e,t)=>u$(uK,t)(e)),pK=b(2,(e,t)=>uD(uK,e=>tl(e,t))(e)),pV=b(2,(e,t)=>pq(n=>pJ(e,t(n)))),pG=e=>{let t=e.getFiberRef(uK).unsafeMap.get(cc.key);return void 0!==t&&"Span"===t._tag?e5(t):sw()},pH={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:sw(),context:tp(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:pT},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},pW=e=>{let t=Object.create(pH);return t.name=e,t},pY=class extends pi{constructor(e){super(),e&&Object.assign(this,e)}},pQ=e=>{class t extends pY{_tag=e}return t.prototype.name=e,t},pX=Symbol.for("effect/Duration"),pZ=BigInt(0),p0=BigInt(24),p1=BigInt(60),p2=BigInt(1e3),p3=BigInt(1e6),p5=BigInt(1e9),p4=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,p6=e=>{if(mt(e))return e;if(N(e))return ma(e);if(M(e))return mi(e);if(Array.isArray(e)){if(2===e.length&&N(e[0])&&N(e[1]))return mi(BigInt(e[0])*p5+BigInt(e[1]))}else if(R(e)){p4.lastIndex=0;let t=p4.exec(e);if(t){let[e,n,s]=t,i=Number(n);switch(s){case"nano":case"nanos":return mi(BigInt(n));case"micro":case"micros":return mr(BigInt(n));case"milli":case"millis":return ma(i);case"second":case"seconds":return mo(i);case"minute":case"minutes":return ml(i);case"hour":case"hours":return mc(i);case"day":case"days":return mu(i);case"week":case"weeks":return mp(i)}}}throw Error("Invalid DurationInput")},p8={_tag:"Millis",millis:0},p7={_tag:"Infinity"},p9={[pX]:pX,[er](){return eg(this,ed(this.value))},[eb](e){return mt(e)&&mw(this,e)},toString(){return`Duration(${mk(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:mf(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},me=e=>{let t=Object.create(p9);return N(e)?isNaN(e)||e<=0?t.value=p8:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=p7:e<=pZ?t.value=p8:t.value={_tag:"Nanos",nanos:e},t},mt=e=>z(e,pX),mn=me(0),ms=me(1/0),mi=e=>me(e),mr=e=>me(e*p2),ma=e=>me(e),mo=e=>me(1e3*e),ml=e=>me(6e4*e),mc=e=>me(36e5*e),mu=e=>me(864e5*e),mp=e=>me(6048e5*e),mm=e=>{let t=p6(e);switch(t.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(t.value.nanos)/1e6;case"Millis":return t.value.millis}},mh=e=>{let t=p6(e);switch(t.value._tag){case"Infinity":return sw();case"Nanos":return e5(t.value.nanos);case"Millis":return e5(BigInt(Math.round(1e6*t.value.millis)))}},md=e=>{let t=p6(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},mf=e=>{let t=p6(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/p5),Number(t.value.nanos%p5)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},mg=b(2,(e,t)=>{let n=p6(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),mb=b(3,(e,t,n)=>{let s=p6(e),i=p6(t);if("Infinity"===s.value._tag||"Infinity"===i.value._tag)return n.onMillis(mm(s),mm(i));if("Nanos"===s.value._tag||"Nanos"===i.value._tag){let e="Nanos"===s.value._tag?s.value.nanos:BigInt(Math.round(1e6*s.value.millis)),t="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return n.onNanos(e,t)}return n.onMillis(s.value.millis,i.value.millis)}),mx=(e,t)=>mb(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),my=b(2,(e,t)=>mg(e,{onMillis:e=>me(e*t),onNanos:e=>me(e*BigInt(t))})),mv=b(2,(e,t)=>mb(e,t,{onMillis:(e,t)=>me(e+t),onNanos:(e,t)=>me(e+t)})),m_=((e,t)=>mb(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),b(2,(e,t)=>mb(e,t,{onMillis:(e,t)=>e<=t,onNanos:(e,t)=>e<=t}))),mS=b(2,(e,t)=>mb(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),mw=b(2,(e,t)=>mx(p6(e),p6(t))),mk=e=>{let t=p6(e),n=[];if("Infinity"===t.value._tag)return"Infinity";let s=md(t);s%p3&&n.push(`${s%p3}ns`);let i=s/p3;i%p2!==pZ&&n.push(`${i%p2}ms`);let r=i/p2;r%p1!==pZ&&n.push(`${r%p1}s`);let a=r/p1;a%p1!==pZ&&n.push(`${a%p1}m`);let o=a/p1;o%p0!==pZ&&n.push(`${o%p0}h`);let l=o/p0;return l!==pZ&&n.push(`${l}d`),n.reverse().join(" ")},mO=Symbol.for("effect/Encoding/errors/Decode"),mE=(e,t)=>{let n={_tag:"DecodeException",[mO]:mO,input:e};return R(t)&&(n.message=t),n};function mI(e){if(e>=mR.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=mR[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let mT=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],mR=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],mN=e=>{if("NaN"===e)return e5(NaN);if("Infinity"===e)return e5(1/0);if("-Infinity"===e)return e5(-1/0);if(""===e.trim())return e3;let t=Number(e);return Number.isNaN(t)?e3:e5(t)},mF=Symbol.for("@effect/schema/ArbitraryHookId"),mM=(e,t,n,s)=>(s.isSuspend?e.oneof({depthSize:1},e.constant([]),e.array(e.tuple(t,n),{minLength:1,maxLength:2})):e.array(e.tuple(t,n))).map(e=>{let t={};for(let[n,s]of e)t[n]=s;return t}),mA=(e,t,n)=>{let s=mz(t.constraints,mP(e));return mj(e.from,s?{...t,constraints:s}:t,n)},mj=(e,t,n)=>{let s=(null)(e);if(Option.isSome(s))switch(e._tag){case"Declaration":return s.value(...e.typeParameters.map(e=>mj(e,t,n)));case"Refinement":return s.value(mA(e,t,n));default:return s.value()}switch(e._tag){case"Declaration":throw Error(errors_.getArbitraryMissingAnnotationErrorMessage(n,e));case"Literal":return t=>t.constant(e.literal);case"UniqueSymbol":return t=>t.constant(e.symbol);case"UndefinedKeyword":case"VoidKeyword":return e=>e.constant(void 0);case"NeverKeyword":return()=>{throw Error(errors_.getArbitraryUnsupportedErrorMessage(n,e))};case"UnknownKeyword":case"AnyKeyword":return e=>e.anything();case"StringKeyword":return e=>t.constraints&&"StringConstraints"===t.constraints._tag?e.string(t.constraints.constraints):e.string();case"NumberKeyword":return e=>{if(t.constraints)switch(t.constraints._tag){case"NumberConstraints":return e.float(t.constraints.constraints);case"IntegerConstraints":return e.integer(t.constraints.constraints)}return e.float()};case"BooleanKeyword":return e=>e.boolean();case"BigIntKeyword":return e=>t.constraints&&"BigIntConstraints"===t.constraints._tag?e.bigInt(t.constraints.constraints):e.bigInt();case"SymbolKeyword":return e=>e.string().map(e=>Symbol.for(e));case"ObjectKeyword":return e=>e.oneof(e.object(),e.array(e.anything()));case"TemplateLiteral":return t=>{let n=t.string({maxLength:5}),s=t.float({noDefaultInfinity:!0}).filter(e=>!Number.isNaN(e)),i=[t.constant(e.head)];for(let r of e.spans)AST.isStringKeyword(r.type)?i.push(n):i.push(s),i.push(t.constant(r.literal));return t.tuple(...i).map(e=>e.join(""))};case"TupleType":{let s=[],i=!1,r=0;for(let a of e.elements)s.push(mj(a.type,t,n.concat(r++))),a.isOptional&&(i=!0);let a=e.rest.map(e=>mj(e.type,t,n));return n=>{let r=n.tuple(...s.map(e=>e(n)));if(i){let t=n.tuple(...e.elements.map(e=>e.isOptional?n.boolean():n.constant(!0)));r=r.chain(e=>t.map(t=>{for(let[n,s]of t.reverse().entries())s||e.splice(t.length-n,1);return e}))}if(Arr.isNonEmptyReadonlyArray(a)){let[e,...s]=a,i=e(n),o=t.constraints;r=r.chain(e=>{let s=n.array(i);return t.isSuspend?s=n.oneof({depthSize:1},n.constant([]),n.array(i,{minLength:1,maxLength:2})):o&&"ArrayConstraints"===o._tag&&(s=n.array(i,o.constraints)),s.map(t=>[...e,...t])});for(let e=0;e<s.length;e++)r=r.chain(t=>s[e](n).map(e=>[...t,e]))}return r}}case"TypeLiteral":{let s=e.propertySignatures.map(e=>mj(e.type,t,n.concat(e.name))),i=e.indexSignatures.map(e=>[mj(e.parameter,t,n),mj(e.type,t,n)]);return n=>{let r={},a=[];for(let t=0;t<s.length;t++){let i=e.propertySignatures[t],o=i.name;i.isOptional||a.push(o),r[o]=s[t](n)}let o=n.record(r,{requiredKeys:a});for(let e=0;e<i.length;e++){let s=i[e][0](n),r=i[e][1](n);o=o.chain(e=>mM(n,s,r,t).map(t=>({...t,...e})))}return o}}case"Union":{let s=e.types.map(e=>mj(e,t,n));return e=>e.oneof({depthSize:1},...s.map(t=>t(e)))}case"Enums":if(0===e.enums.length)throw Error(errors_.getArbitraryEmptyEnumErrorMessage(n));return t=>t.oneof(...e.enums.map(([e,n])=>t.constant(n)));case"Refinement":{let s=mA(e,t,n);return t=>s(t).filter(t=>Option.isNone(e.filter(t,AST.defaultParseOption,e)))}case"Suspend":{let s=util_.memoizeThunk(()=>mj(e.f(),{...t,isSuspend:!0},n));return e=>e.constant(null).chain(()=>s()(e))}case"Transformation":return mj(e.to,t,n)}};class mC{_tag="NumberConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=Math.fround(e.min)),Predicate.isNumber(e.max)&&(this.constraints.max=Math.fround(e.max)),Predicate.isBoolean(e.noNaN)&&(this.constraints.noNaN=e.noNaN),Predicate.isBoolean(e.noDefaultInfinity)&&(this.constraints.noDefaultInfinity=e.noDefaultInfinity)}}class mL{_tag="StringConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class mU{_tag="IntegerConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.min)&&(this.constraints.min=e.min),Predicate.isNumber(e.max)&&(this.constraints.max=e.max)}}class m${_tag="ArrayConstraints";constraints;constructor(e){this.constraints={},Predicate.isNumber(e.minLength)&&(this.constraints.minLength=e.minLength),Predicate.isNumber(e.maxLength)&&(this.constraints.maxLength=e.maxLength)}}class mD{_tag="BigIntConstraints";constraints;constructor(e){this.constraints={},Predicate.isBigInt(e.min)&&(this.constraints.min=e.min),Predicate.isBigInt(e.max)&&(this.constraints.max=e.max)}}let mP=e=>{let t=e.annotations[AST.TypeAnnotationId],n=e.annotations[AST.JSONSchemaAnnotationId];switch(t){case filters_.IntTypeId:return new mU({});case filters_.GreaterThanTypeId:case filters_.GreaterThanOrEqualToTypeId:case filters_.LessThanTypeId:case filters_.LessThanOrEqualToTypeId:case filters_.BetweenTypeId:return new mC({min:n.exclusiveMinimum??n.minimum,max:n.exclusiveMaximum??n.maximum});case filters_.GreaterThanBigintTypeId:case filters_.GreaterThanOrEqualToBigIntTypeId:case filters_.LessThanBigIntTypeId:case filters_.LessThanOrEqualToBigIntTypeId:case filters_.BetweenBigintTypeId:return new mD(e.annotations[t]);case filters_.MinLengthTypeId:case filters_.MaxLengthTypeId:case filters_.LengthTypeId:return new mL(n);case filters_.MinItemsTypeId:case filters_.MaxItemsTypeId:case filters_.ItemsCountTypeId:return new m$({minLength:n.minItems,maxLength:n.maxItems})}},mz=(e,t)=>{if(void 0===e)return t;if(void 0===t)return e;switch(e._tag){case"ArrayConstraints":if("ArrayConstraints"===t._tag)return new m$({minLength:mq(e.constraints.minLength,t.constraints.minLength),maxLength:mJ(e.constraints.maxLength,t.constraints.maxLength)});break;case"NumberConstraints":switch(t._tag){case"NumberConstraints":return new mC({min:mq(e.constraints.min,t.constraints.min),max:mJ(e.constraints.max,t.constraints.max),noNaN:mB(e.constraints.noNaN,t.constraints.noNaN),noDefaultInfinity:mB(e.constraints.noDefaultInfinity,t.constraints.noDefaultInfinity)});case"IntegerConstraints":return new mU({min:mq(e.constraints.min,t.constraints.min),max:mJ(e.constraints.max,t.constraints.max)})}break;case"BigIntConstraints":if("BigIntConstraints"===t._tag)return new mD({min:mq(e.constraints.min,t.constraints.min),max:mJ(e.constraints.max,t.constraints.max)});break;case"StringConstraints":if("StringConstraints"===t._tag)return new mL({minLength:mq(e.constraints.minLength,t.constraints.minLength),maxLength:mJ(e.constraints.maxLength,t.constraints.maxLength)});break;case"IntegerConstraints":switch(t._tag){case"NumberConstraints":case"IntegerConstraints":return new mU({min:mq(e.constraints.min,t.constraints.min),max:mJ(e.constraints.max,t.constraints.max)})}}},mB=(e,t)=>void 0===e?t:void 0===t?e:e||t;function mq(e,t){return void 0===e?t:void 0===t?e:e<=t?t:e}function mJ(e,t){return void 0===e?t:void 0===t?e:e<=t?e:t}let mK=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),mV=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return mV(e,t.from)}},mG=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),mH=e=>{let t,n=!1;return()=>(n||(t=e(),n=!0),t)},mW=e=>{if(R(e))return JSON.stringify(e);if(N(e)||null==e||F(e)||A(e)||K(e))return String(e);if(M(e))return String(e)+"n";if(!sY(e)&&z(e,"toString")&&j(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),sY(e))return`[${e.map(mW).join(",")}]`;return`{${mG(e).map(t=>`${R(t)?JSON.stringify(t):String(t)}:${mW(e[t])}`).join(",")}}`}catch(t){return String(e)}},mY=e=>"string"==typeof e?JSON.stringify(e):String(e),mQ=e=>Array.isArray(e),mX=e=>!Array.isArray(e),mZ=e=>`[${mY(e)}]`,m0=e=>mQ(e)?e.map(mZ).join(""):mZ(e),m1=(e,t,n,s)=>{let i=e;return n&&sX(n)&&(i+=`
at path: ${m0(n)}`),void 0!==t&&(i+=`
details: ${t}`),s&&(i+=`
schema (${s._tag}): ${s}`),i},m2=(e,t,n)=>m1("Missing annotation",e,t,n),m3=(e,t,n)=>m1("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,n),m5=e=>m1("Unsupported key schema",void 0,void 0,e),m4=e=>m1("Unsupported literal",`literal value: ${mW(e)}`),m6=e=>m1("Duplicate index signature",`${e} index signature`),m8=m1("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),m7=m1("Invalid element","A required element cannot follow an optional element. ts(1257)"),m9=e=>m1("Duplicate property signature transformation",`Duplicate key ${mW(e)}`),he=e=>m1("Duplicate property signature",`Duplicate key ${mW(e)}`),ht=Symbol.for("@effect/schema/annotation/Type"),hn=Symbol.for("@effect/schema/annotation/Message"),hs=Symbol.for("@effect/schema/annotation/MissingMessage"),hi=Symbol.for("@effect/schema/annotation/Identifier"),hr=Symbol.for("@effect/schema/annotation/Title"),ha=Symbol.for("@effect/schema/annotation/Description"),ho=Symbol.for("@effect/schema/annotation/Examples"),hl=Symbol.for("@effect/schema/annotation/Default"),hc=Symbol.for("@effect/schema/annotation/JSONSchema"),hu=Symbol.for("@effect/schema/annotation/Documentation"),hp=Symbol.for("@effect/schema/annotation/Concurrency"),hm=Symbol.for("@effect/schema/annotation/Batching"),hh=Symbol.for("@effect/schema/annotation/ParseIssueTitle"),hd=Symbol.for("@effect/schema/annotation/ParseOptions"),hf=Symbol.for("@effect/schema/annotation/Surrogate"),hg=Symbol.for("@effect/schema/annotation/StableFilter"),hb=b(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?e5(e.annotations[t]):sw()),hx=hb(hn),hy=hb(hs),hv=hb(hr),h_=hb(hi),hS=hb(ha),hw=hb(hp),hk=hb(hm),hO=hb(hh),hE=hb(hd),hI=hb(hf),hT=hb(hg),hR=Symbol.for("@effect/schema/annotation/JSONIdentifier"),hN=hb(hR);class hF{typeParameters;decodeUnknown;encodeUnknown;annotations;_tag="Declaration";constructor(e,t,n,s={}){this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=n,this.annotations=s}toString(){return sO(dY(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:dB(this.annotations)}}}let hM=e=>t=>t._tag===e;class hA{literal;annotations;_tag="Literal";constructor(e,t={}){this.literal=e,this.annotations=t}toString(){return sO(dY(this),()=>mW(this.literal))}toJSON(){return{_tag:this._tag,literal:M(this.literal)?String(this.literal):this.literal,annotations:dB(this.annotations)}}}let hj=hM("Literal"),hC=new hA(null,{[hi]:"null"});class hL{symbol;annotations;_tag="UniqueSymbol";constructor(e,t={}){this.symbol=e,this.annotations=t}toString(){return sO(dY(this),()=>mW(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:dB(this.annotations)}}}class hU{annotations;_tag="UndefinedKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let h$=new hU({[hr]:"undefined"});class hD{annotations;_tag="VoidKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let hP=new hD({[hr]:"void"});class hz{annotations;_tag="NeverKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let hB=new hz({[hr]:"never"});class hq{annotations;_tag="UnknownKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let hJ=new hq({[hr]:"unknown"});class hK{annotations;_tag="AnyKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let hV=new hK({[hr]:"any"});class hG{annotations;_tag="StringKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let hH=new hG({[hr]:"string",[ha]:"a string"}),hW=hM("StringKeyword");class hY{annotations;_tag="NumberKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let hQ=new hY({[hr]:"number",[ha]:"a number"}),hX=hM("NumberKeyword");class hZ{annotations;_tag="BooleanKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let h0=new hZ({[hr]:"boolean",[ha]:"a boolean"});class h1{annotations;_tag="BigIntKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let h2=new h1({[hr]:"bigint",[ha]:"a bigint"});class h3{annotations;_tag="SymbolKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let h5=new h3({[hr]:"symbol",[ha]:"a symbol"}),h4=hM("SymbolKeyword");class h6{annotations;_tag="ObjectKeyword";constructor(e={}){this.annotations=e}toString(){return dW(this)}toJSON(){return{_tag:this._tag,annotations:dB(this.annotations)}}}let h8=new h6({[hi]:"object",[hr]:"object",[ha]:"an object in the TypeScript meaning, i.e. the `object` type"});class h7{type;annotations;constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:dB(this.annotations)}}toString(){return String(this.type)}}class h9 extends h7{isOptional;constructor(e,t,n={}){super(e,n),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:dB(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}let de=e=>e.map(e=>e.type);class dt{elements;rest;isReadonly;annotations;_tag="TupleType";constructor(e,t,n,s={}){this.elements=e,this.rest=t,this.isReadonly=n,this.annotations=s;let i=!1,r=!1;for(let t of e)if(t.isOptional)i=!0;else if(i){r=!0;break}if(r||i&&t.length>1)throw Error(m7)}toString(){return sO(dY(this),()=>dn(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:dB(this.annotations)}}}let dn=e=>{let t=e.elements.map(String).join(", ");return sV(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,s)=>{let i=String(n),r=i.includes(" | ")?`(${i})`:i;if(s.length>0){let n=s.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${r}[], ${n}]`:`readonly [...${r}[], ${n}]`}return e.elements.length>0?`readonly [${t}, ...${r}[]]`:`ReadonlyArray<${i}>`}})};class ds extends h9{name;isReadonly;constructor(e,t,n,s,i){super(t,n,i),this.name=e,this.isReadonly=s}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:dB(this.annotations)}}}let di=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return di(e.from)}return!1};class dr{type;isReadonly;parameter;constructor(e,t,n){if(this.type=t,this.isReadonly=n,di(e))this.parameter=e;else throw Error(m8)}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class da{annotations;_tag="TypeLiteral";propertySignatures;indexSignatures;constructor(e,t,n={}){this.annotations=n;let s={};for(let t=0;t<e.length;t++){let n=e[t].name;if(Object.prototype.hasOwnProperty.call(s,n))throw Error(he(n));s[n]=null}let i={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let n=dH(t[e].parameter);if(hW(n)){if(i.string)throw Error(m6("string"));i.string=!0}else if(h4(n)){if(i.symbol)throw Error(m6("symbol"));i.symbol=!0}}this.propertySignatures=dJ(e),this.indexSignatures=dK(t)}toString(){return sO(dY(this),()=>dl(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:dB(this.annotations)}}}let dl=e=>{let t=e.propertySignatures.map(e=>(e.isReadonly?"readonly ":"")+String(e.name)+(e.isOptional?"?":"")+": "+e.type).join("; ");if(e.indexSignatures.length>0){let n=e.indexSignatures.map(e=>(e.isReadonly?"readonly ":"")+`[x: ${dH(e.parameter)}]: ${e.type}`).join("; ");return e.propertySignatures.length>0?`{ ${t}; ${n} }`:`{ ${n} }`}return e.propertySignatures.length>0?`{ ${t} }`:"{}"},dc=hM("TypeLiteral"),du=e=>e.filter(e=>e!==hB),dp=is(sz(sP,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),dm={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},dh=e=>ig(e,e=>dx(e)?dh(e.types):[e]),dd=e=>{let t=dp(e),n=[],s={},i=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[hV];case"UnknownKeyword":return[hJ];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":s[e._tag]||(s[e._tag]=e,n.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":s[dm[t]]||i.includes(e.literal)||(i.push(e.literal),n.push(e));break;case"object":i.includes(e.literal)||(i.push(e.literal),n.push(e))}break}case"UniqueSymbol":s.SymbolKeyword||i.includes(e.symbol)||(i.push(e.symbol),n.push(e));break;case"TupleType":s.ObjectKeyword||n.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?s["{}"]||(s["{}"]=e,n.push(e)):s.ObjectKeyword||n.push(e);break;default:n.push(e)}return n};class df{types;annotations;static make=(e,t)=>{let n=[],s=new Set;for(let t=0;t<e.length;t++){let i=e[t];i===hB||s.has(i)||(s.add(i),n.push(i))}return df.union(n,t)};static members=(e,t)=>df.union(du(e),t);static unify=(e,t)=>df.union(dd(dh(e)),t);static union=(e,t)=>db(e)?new df(e,t):1===e.length?e[0]:hB;_tag="Union";constructor(e,t={}){this.types=e,this.annotations=t}toString(){return sO(dY(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:dB(this.annotations)}}}let dg=(e,t)=>e.map(t),db=e=>e.length>1,dx=hM("Union"),dy=I(Symbol.for("@effect/schema/AST/toJSONMemoMap"),()=>new WeakMap);class dv{f;annotations;_tag="Suspend";constructor(e,t={}){this.f=e,this.annotations=t,this.f=mH(e)}toString(){return dY(this).pipe(sE(()=>sA(sN(this.f)(),e=>dY(e))),sO(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=dy.get(e);return t||(dy.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:dB(this.annotations)},dy.set(e,t)),t}}class d_{from;filter;annotations;_tag="Refinement";constructor(e,t,n={}){this.from=e,this.filter=t,this.annotations=n}toString(){return sO(dY(this),()=>`{ ${this.from} | filter }`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:dB(this.annotations)}}}let dS=hM("Refinement"),dw={};class dk{from;to;transformation;annotations;_tag="Transformation";constructor(e,t,n,s={}){this.from=e,this.to=t,this.transformation=n,this.annotations=s}toString(){return sO(dY(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:dB(this.annotations)}}}let dO=hM("Transformation");class dE{decode;encode;_tag="FinalTransformation";constructor(e,t){this.decode=e,this.encode=t}}class dI{_tag="ComposeTransformation"}class dT{from;to;decode;encode;constructor(e,t,n,s){this.from=e,this.to=t,this.decode=n,this.encode=s}}class dR{propertySignatureTransformations;_tag="TypeLiteralTransformation";constructor(e){this.propertySignatureTransformations=e;let t={},n={};for(let s of e){let e=s.from;if(t[e])throw Error(m9(e));t[e]=!0;let i=s.to;if(n[i])throw Error(m9(i));n[i]=!0}}}let dN=(i="TypeLiteralTransformation",e=>e._tag===i),dF=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e);return n.annotations.value={...e.annotations,...t},Object.create(Object.getPrototypeOf(e),n)},dM=e=>{let t=`^${mK(e.head)}`;for(let n of e.spans)hW(n.type)?t+=".*":hX(n.type)&&(t+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),t+=mK(n.literal);return new RegExp(t+="$")},dA=e=>{switch(e._tag){case"TupleType":{let t=!1,n=[];for(let s of e.elements)s.isOptional&&(t=!0),n.push(s.type);return t&&n.push(h$),n=n.concat(de(e.rest)),df.make(n)}case"Refinement":return dA(e.from);case"Union":return df.make(e.types.map(dA));case"Suspend":return dA(e.f())}throw Error(errors_.getASTUnsupportedSchema(e))},dj=(e,t)=>{let n=[],s=[],i=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":s.push(new dr(e,t,!0));break;case"Literal":if(R(e.literal)||N(e.literal))n.push(new ds(e.literal,t,!1,!0));else throw Error(m4(e.literal));break;case"Enums":for(let[s,i]of e.enums)n.push(new ds(i,t,!1,!0));break;case"UniqueSymbol":n.push(new ds(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(i);break;default:throw Error(m5(e))}};return i(e),{propertySignatures:n,indexSignatures:s}},dC=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new dt(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=dD(e.propertySignatures,e=>!1===e.isReadonly?e:new ds(e.name,e.type,e.isOptional,!1,e.annotations)),n=dD(e.indexSignatures,e=>!1===e.isReadonly?e:new dr(e.parameter,e.type,!1));return t===e.propertySignatures&&n===e.indexSignatures?e:new da(t,n,e.annotations)}case"Union":{let t=dD(e.types,dC);return t===e.types?e:df.make(t,e.annotations)}case"Suspend":return new dv(()=>dC(e.f()),e.annotations);case"Refinement":{let t=dC(e.from);return t===e.from?e:new d_(t,e.filter,e.annotations)}case"Transformation":{let t=dC(e.from),n=dC(e.to);return t===e.from&&n===e.to?e:new dk(t,n,e.transformation,e.annotations)}}return e},dL=e=>{switch(e._tag){case"Declaration":{let t=dD(e.typeParameters,dL);return t===e.typeParameters?e:new hF(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=dD(e.elements,e=>{let t=dL(e.type);return t===e.type?e:new h9(t,e.isOptional)}),n=de(e.rest),s=dD(n,dL);return t===e.elements&&s===n?e:new dt(t,s.map(e=>new h7(e)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=dD(e.propertySignatures,e=>{let t=dL(e.type);return t===e.type?e:new ds(e.name,t,e.isOptional,e.isReadonly)}),n=dD(e.indexSignatures,e=>{let t=dL(e.type);return t===e.type?e:new dr(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new da(t,n,e.annotations)}case"Union":{let t=dD(e.types,dL);return t===e.types?e:df.make(t,e.annotations)}case"Suspend":return new dv(()=>dL(e.f()),e.annotations);case"Refinement":{let t=dL(e.from);return t===e.from?e:new d_(t,e.filter,e.annotations)}case"Transformation":return dL(e.to)}return e},dU=e=>sE(hN(e),()=>h_(e)),d$=e=>sk(dU(e),{onNone:()=>void 0,onSome:e=>({[hR]:e})});function dD(e,t){let n=!1,s=sJ(e.length);for(let i=0;i<e.length;i++){let r=e[i],a=t(r);a!==r&&(n=!0),s[i]=a}return n?s:e}let dP=(e,t)=>{switch(e._tag){case"Declaration":{let n=dD(e.typeParameters,e=>dP(e,t));return n===e.typeParameters?e:new hF(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let n=dD(e.elements,e=>{let n=dP(e.type,t);return n===e.type?e:new h9(n,e.isOptional)}),s=de(e.rest),i=dD(s,e=>dP(e,t));return n===e.elements&&i===s?e:new dt(n,i.map(e=>new h7(e)),e.isReadonly,d$(e))}case"TypeLiteral":{let n=dD(e.propertySignatures,e=>{let n=dP(e.type,t);return n===e.type?e:new ds(e.name,n,e.isOptional,e.isReadonly)}),s=dD(e.indexSignatures,e=>{let n=dP(e.type,t);return n===e.type?e:new dr(e.parameter,n,e.isReadonly)});return n===e.propertySignatures&&s===e.indexSignatures?e:new da(n,s,d$(e))}case"Union":{let n=dD(e.types,e=>dP(e,t));return n===e.types?e:df.make(n,d$(e))}case"Suspend":return new dv(()=>dP(e.f(),t),d$(e));case"Refinement":{let n=dP(e.from,t);if(t){if(n===e.from)return e;if(!dO(e.from)){let t=hT(e);if(e2(t)&&!0===t.value)return new d_(n,e.filter)}}return n}case"Transformation":return dP(e.from,t)}return e},dz=e=>dP(e,!1),dB=e=>{let t={};for(let n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},dq=e=>{switch(e._tag){case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},dJ=is(sz(sP,e=>dq(e.type))),dK=is(sz(sP,e=>{switch(dH(e.parameter)._tag){case"StringKeyword":return 2;case"SymbolKeyword":return 3;case"TemplateLiteral":return 1}})),dV=e=>e.reduce(null,null),dG=e=>{switch(e._tag){case"TupleType":return[2,e.elements.length,e.rest.length];case"TypeLiteral":{let t=e.propertySignatures.length,n=e.indexSignatures.length;return t+n===0?[-4,0,0]:[4,t,n]}case"Declaration":{let t=hI(e);if(Option.isSome(t)){let[e,n,s]=dG(t.value);return[6,n,s]}return[6,0,0]}case"Suspend":return[8,0,0];case"Union":return dV(e.types.map(dG));case"Refinement":{let[t,n,s]=dG(e.from);return[t+1,n,s]}case"Transformation":return dG(e.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return null}},dH=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return dH(e.from)}},dW=e=>sO(dY(e),()=>e._tag),dY=e=>h_(e).pipe(sE(()=>hv(e)),sE(()=>hS(e))),dQ=Symbol.for("@effect/schema/EquivalenceHookId"),dX=Symbol.for("@effect/schema/TypeId/GreaterThan"),dZ=Symbol.for("@effect/schema/TypeId/GreaterThanOrEqualTo"),d0=Symbol.for("@effect/schema/TypeId/LessThan"),d1=Symbol.for("@effect/schema/TypeId/LessThanOrEqualTo"),d2=Symbol.for("@effect/schema/TypeId/Int"),d3=Symbol.for("@effect/schema/TypeId/MinLength"),d5=Symbol.for("@effect/schema/TypeId/Length"),d4=Symbol.for("effect/Clock"),d6=tc("effect/Clock"),d8=2147483648-1,d7={unsafeSchedule(e,t){let n=mm(t);if(n>d8)return _;let s=!1,i=setTimeout(()=>{s=!0,e()},n);return()=>(clearTimeout(i),!s)}},d9=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;let t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),fe=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return d9;let t=d9()-e.bigint();return()=>t+e.bigint()}();class ft{[d4]=d4;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return fe()}currentTimeMillis=ua(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=ua(()=>this.unsafeCurrentTimeNanos());scheduler(){return ui(d7)}sleep(e){return cN(t=>cI(ua(d7.unsafeSchedule(()=>t(um),e))))}}let fn="InvalidData",fs="MissingData",fi="SourceUnavailable",fr="Unsupported",fa=Symbol.for("effect/ConfigError"),fo={_tag:"ConfigError",[fa]:fa},fl=(e,t)=>{let n=Object.create(fo);return n._op="And",n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},fc=(e,t)=>{let n=Object.create(fo);return n._op="Or",n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},fu=(e,t,n={pathDelim:"."})=>{let s=Object.create(fo);return s._op=fn,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){let e=w(this.path,iw(n.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),s},fp=(e,t,n={pathDelim:"."})=>{let s=Object.create(fo);return s._op=fs,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){let e=w(this.path,iw(n.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),s},fm=(e,t,n,s={pathDelim:"."})=>{let i=Object.create(fo);return i._op=fi,i.path=e,i.message=t,i.cause=n,Object.defineProperty(i,"toString",{enumerable:!1,value(){let e=w(this.path,iw(s.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),i},fh=(e,t,n={pathDelim:"."})=>{let s=Object.create(fo);return s._op=fr,s.path=e,s.message=t,Object.defineProperty(s,"toString",{enumerable:!1,value(){let e=w(this.path,iw(n.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),s},fd=b(2,(e,t)=>{switch(e._op){case"And":return fl(fd(e.left,t),fd(e.right,t));case"Or":return fc(fd(e.left,t),fd(e.right,t));case fn:return fu([...t,...e.path],e.message);case fs:return fp([...t,...e.path],e.message);case fi:return fm([...t,...e.path],e.message,e.cause);case fr:return fh([...t,...e.path],e.message)}}),ff={_tag:"Empty"},fg=b(2,(e,t)=>{let n=aV(t),s=e;for(;aq(n);){let e=n.head;switch(e._tag){case"Empty":n=n.tail;break;case"AndThen":n=aJ(e.first,aJ(e.second,n.tail));break;case"MapName":s=id(s,e.f),n=n.tail;break;case"Nested":s=sG(s,e.name),n=n.tail;break;case"Unnested":if(!w(s3(s),sU(e.name)))return tv(fp(s,`Expected ${e.name} to be in path in ConfigProvider#unnested`));s=s8(s),n=n.tail}}return t_(s)}),fb=(e,t)=>[...e,...t],fx=Symbol.for("effect/ConfigProvider"),fy=tc("effect/ConfigProvider"),fv=Symbol.for("effect/ConfigProviderFlat"),f_=e=>({[fx]:fx,pipe(){return eI(this,arguments)},...e}),fS=e=>({[fv]:fv,patch:e.patch,load:(t,n,s=!0)=>e.load(t,n,s),enumerateChildren:e.enumerateChildren}),fw=e=>f_({load:t=>cG(fE(e,im(),t,!1),e=>sk(s3(e),{onNone:()=>cz(fp(im(),`Expected a single value having structure: ${t}`)),onSome:ui})),flattened:e}),fk=(e,t,n,s)=>{let i=iv(n.length,t=>t>=s.length?sw():e5([e(t),t+1])),r=iv(s.length,e=>e>=n.length?sw():e5([t(e),e+1]));return[fb(n,i),fb(s,r)]},fO=(e,t)=>{let n=t;if("Nested"===n._tag){let t=e.slice();for(;"Nested"===n._tag;)t.push(n.name),n=n.config;return t}return e},fE=(e,t,n,s)=>{switch(n._tag){case"Constant":return ui(ih(n.value));case"Described":return ur(()=>fE(e,t,n.config,s));case"Fail":return cz(fp(t,n.message));case"Fallback":return w(ur(()=>fE(e,t,n.first,s)),cM(i=>n.condition(i)?w(fE(e,t,n.second,s),cM(e=>cz(fc(i,e)))):cz(i)));case"Lazy":return ur(()=>fE(e,t,n.config(),s));case"MapOrFail":return ur(()=>w(fE(e,t,n.original,s),cG(c0(e=>w(n.mapOrFail(e),c8(fd(fO(t,n.original))))))));case"Nested":return ur(()=>fE(e,fb(t,ih(n.name)),n.config,s));case"Primitive":return w(fg(t,e.patch),cG(t=>w(e.load(t,n,s),cG(e=>{if(0===e.length){let e=w(s4(t),sO(()=>"<n/a>"));return cz(fp([],`Expected ${n.description} with name ${e}`))}return ui(e)}))));case"Sequence":return w(fg(t,e.patch),cG(s=>w(e.enumerateChildren(s),cG(fF),cG(i=>0===i.length?ur(()=>c4(fE(e,s,n.config,!0),ih)):w(c0(i,s=>fE(e,sH(t,`[${s}]`),n.config,!0)),c4(e=>{let t=ib(e);return 0===t.length?ih(im()):ih(t)}))))));case"HashMap":return ur(()=>w(fg(t,e.patch),cG(t=>w(e.enumerateChildren(t),cG(i=>w(i,c0(i=>fE(e,fb(t,ih(i)),n.valueConfig,s)),c4(e=>0===e.length?ih(rT()):w(fN(e),id(e=>aM(ii(sK(i),e)))))))))));case"ZipWith":return ur(()=>w(fE(e,t,n.left,s),cD,cG(i=>w(fE(e,t,n.right,s),cD,cG(e=>{if(tx(i)&&tx(e))return cz(fl(i.left,e.left));if(tx(i)&&ty(e))return cz(i.left);if(ty(i)&&tx(e))return cz(e.left);if(ty(i)&&ty(e)){let s=w(t,iw(".")),r=fI(t,s),[a,o]=fk(r,r,w(i.right,id(t_)),w(e.right,id(t_)));return w(a,ii(o),c0(([e,t])=>w(ux(e,t),c4(([e,t])=>n.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},fI=(e,t)=>n=>tv(fp(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),fT=(e,t)=>e.split(RegExp(`\\s*${mK(t)}\\s*`)),fR=(e,t,n,s,i)=>i?w(fT(e,s),c0(e=>n.parse(e.trim())),c8(fd(t))):w(n.parse(e),c6({onFailure:fd(t),onSuccess:ih})),fN=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),fF=e=>w(c0(e,fA),c6({onFailure:()=>im(),onSuccess:is(sP)}),cD,c4(tw)),fM=/^(\[(\d+)\])$/,fA=e=>{let t=e.match(fM);if(null!==t){let e=t[2];return w(void 0!==e&&e.length>0?e5(e):sw(),sA(fj))}return sw()},fj=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?sw():e5(t)},fC=Symbol.for("effect/Console"),fL=tc("effect/Console"),fU={[fC]:fC,assert:(e,...t)=>ua(()=>{console.assert(e,...t)}),clear:ua(()=>{console.clear()}),count:e=>ua(()=>{console.count(e)}),countReset:e=>ua(()=>{console.countReset(e)}),debug:(...e)=>ua(()=>{console.debug(...e)}),dir:(e,t)=>ua(()=>{console.dir(e,t)}),dirxml:(...e)=>ua(()=>{console.dirxml(...e)}),error:(...e)=>ua(()=>{console.error(...e)}),group:e=>e?.collapsed?ua(()=>console.groupCollapsed(e?.label)):ua(()=>console.group(e?.label)),groupEnd:ua(()=>{console.groupEnd()}),info:(...e)=>ua(()=>{console.info(...e)}),log:(...e)=>ua(()=>{console.log(...e)}),table:(e,t)=>ua(()=>{console.table(e,t)}),time:e=>ua(()=>console.time(e)),timeEnd:e=>ua(()=>console.timeEnd(e)),timeLog:(e,...t)=>ua(()=>{console.timeLog(e,...t)}),trace:(...e)=>ua(()=>{console.trace(...e)}),warn:(...e)=>ua(()=>{console.warn(...e)}),unsafe:console},f$=Symbol.for("effect/Random"),fD=tc("effect/Random");class fP{seed;[f$]=f$;PRNG;constructor(e){this.seed=e,this.PRNG=new Q(e)}get next(){return ua(()=>this.PRNG.number())}get nextBoolean(){return c4(this.next,e=>e>.5)}get nextInt(){return ua(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return c4(this.next,n=>(t-e)*n+e)}nextIntBetween(e,t){return ua(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return fz(e,e=>this.nextIntBetween(0,e))}}let fz=(e,t)=>ur(()=>w(ua(()=>Array.from(e)),cG(e=>{let n=[];for(let t=e.length;t>=2;t-=1)n.push(t);return w(n,c1(n=>w(t(n),c4(t=>fB(e,n-1,t)))),cE(i0(e)))}))),fB=(e,t,n)=>{let s=e[t];return e[t]=e[n],e[n]=s,e},fq=w(tp(),tr(d6,new ft),tr(fL,fU),tr(fD,new fP(4294967296*Math.random()>>>0)),tr(fy,(e=>{let{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),s=e=>w(e,iw(t)),i=e=>e.split(t),r=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return fw(fS({load:(e,t,i=!0)=>{let a=s(e),o=r();return w(a in o?e5(o[a]):sw(),c8(()=>fp(e,`Expected ${a} to exist in the process context`)),cG(s=>fR(s,e,t,n,i)))},enumerateChildren:e=>ua(()=>ae(Object.keys(r()).map(e=>i(e.toUpperCase())).filter(t=>{for(let n=0;n<e.length;n++){let s=w(e,s2(n)),i=t[n];if(void 0===i||s!==i)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:ff}))})()),tr(cl,{[co]:co,span:(e,t,n,s,i,r)=>new cp(e,t,n,s,i,r),context:e=>e()})),fJ=I(Symbol.for("effect/DefaultServices/currentServices"),()=>uq(fq)),fK=e=>uF(fJ,t=>e(ta(t,d6))),fV=fK(e=>e.currentTimeMillis);r=e=>e.next,uF(fJ,e=>r(ta(e,fD)));let fG=e=>cG(cK,t=>pC(e,c2(t))),fH="Sequential",fW="Parallel",fY={_tag:fH},fQ=e=>e._tag===fH,fX=e=>e._tag===fW,fZ={_tag:fW},f0=e=>({_tag:"ParallelN",parallelism:e}),f1=Symbol.for("effect/FiberRefs");class f2{locals;[f1]=f1;constructor(e){this.locals=e}pipe(){return eI(this,arguments)}}let f3=(e,t,n,s=!1)=>{let i,r=t,a=n,o=s;for(;void 0===i;)if(sX(r)&&sX(a)){let e=s5(r)[0],t=s8(r),n=s5(a)[0],s=s5(a)[1],l=s8(a);e.startTimeMillis<n.startTimeMillis?(a=l,o=!0):e.startTimeMillis>n.startTimeMillis?r=t:e.id<n.id?(a=l,o=!0):e.id>n.id?r=t:i=[s,o]}else i=[e.initial,!0];return i},f5=b(3,(e,t,n)=>{let s=new Map(e.locals);return n.locals.forEach((e,n)=>{let i=e[0][1];if(!e[0][0][eb](t)){if(!s.has(n)){if(ex(i,n.initial))return;s.set(n,[[t,n.join(n.initial,i)]]);return}let r=s.get(n),[a,o]=f3(n,r,e);if(o){let e=n.diff(a,i),o=r[0][1],l=n.join(o,n.patch(e)(o));if(!ex(o,l)){let e;let i=r[0][0];e=i[eb](t)?[[i,l],...r.slice(1)]:[[t,l],...r],s.set(n,e)}}}}),new f2(s)}),f4=b(2,(e,t)=>{let n=new Map;return f6(e,n,t),new f2(n)}),f6=(e,t,n)=>{e.locals.forEach((e,s)=>{let i=e[0][1],r=s.patch(s.fork)(i);ex(i,r)?t.set(s,e):t.set(s,[[n,r],...e])})},f8=b(2,(e,t)=>{let n=new Map(e.locals);return n.delete(t),new f2(n)}),f7=b(2,(e,t)=>e.locals.has(t)?e5(s5(e.locals.get(t))[1]):sw()),f9=b(2,(e,t)=>w(f7(e,t),sO(()=>t.initial))),ge=b(2,(e,{fiberId:t,fiberRef:n,value:s})=>{if(0===e.locals.size)return new f2(new Map([[n,[[t,s]]]]));let i=new Map(e.locals);return gt(i,t,n,s),new f2(i)}),gt=(e,t,n,s)=>{let i;let r=e.get(n)??[];if(sX(r)){let[e,n]=s5(r);if(e[eb](t)){if(ex(n,s))return;i=[[t,s],...r.slice(1)]}else i=[[t,s],...r]}else i=[[t,s]];e.set(n,i)},gn=b(2,(e,{entries:t,forkAs:n})=>{if(0===e.locals.size)return new f2(new Map(t));let s=new Map(e.locals);return void 0!==n&&f6(e,s,n),t.forEach(([e,t])=>{1===t.length?gt(s,t[0][0],e,t[0][1]):t.forEach(([t,n])=>{gt(s,t,e,n)})}),new f2(s)}),gs="Empty",gi="Remove",gr="Update",ga="AndThen",go={_tag:gs},gl=(e,t)=>{let n=new Map(e.locals),s=go;for(let[e,i]of t.locals.entries()){let t=s5(i)[1],r=n.get(e);if(void 0!==r){let n=s5(r)[1];ex(n,t)||(s=gc({_tag:gr,fiberRef:e,patch:e.diff(n,t)})(s))}else s=gc({_tag:"Add",fiberRef:e,value:t})(s);n.delete(e)}for(let[e]of n.entries())s=gc({_tag:gi,fiberRef:e})(s);return s},gc=b(2,(e,t)=>({_tag:ga,first:e,second:t})),gu=b(3,(e,t,n)=>{let s=n,i=ih(e);for(;sX(i);){let e=s5(i),n=s8(i);switch(e._tag){case gs:i=n;break;case"Add":s=ge(s,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),i=n;break;case gi:s=f8(s,e.fiberRef),i=n;break;case gr:{let r=f9(s,e.fiberRef);s=ge(s,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(r)}),i=n;break}case ga:i=sG(e.first)(sG(e.second)(n))}}return s}),gp="effect/FiberStatus",gm=Symbol.for(gp),gh="Done",gd="Running",gf="Suspended",gg=em(`${gp}-${gh}`);class gb{[gm]=gm;_tag=gh;[er](){return gg}[eb](e){return g_(e)&&e._tag===gh}}class gx{runtimeFlags;[gm]=gm;_tag=gd;constructor(e){this.runtimeFlags=e}[er](){return w(ea(gp),el(ea(this._tag)),el(ea(this.runtimeFlags)),eg(this))}[eb](e){return g_(e)&&e._tag===gd&&this.runtimeFlags===e.runtimeFlags}}class gy{runtimeFlags;blockingOn;[gm]=gm;_tag=gf;constructor(e,t){this.runtimeFlags=e,this.blockingOn=t}[er](){return w(ea(gp),el(ea(this._tag)),el(ea(this.runtimeFlags)),el(ea(this.blockingOn)),eg(this))}[eb](e){return g_(e)&&e._tag===gf&&this.runtimeFlags===e.runtimeFlags&&ex(this.blockingOn,e.blockingOn)}}let gv=new gb,g_=e=>z(e,gm),gS=e=>new gx(e),gw=(e,t)=>new gy(e,t),gk=e=>e._tag===gh,gO={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eI(this,arguments)}},gE={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eI(this,arguments)}},gI={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eI(this,arguments)}},gT={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eI(this,arguments)}},gR=(a=w(sP,sz(e=>e.ordinal)),b(2,(e,t)=>1===a(e,t))),gN=e=>{switch(e){case"All":return uk;case"Debug":return uE;case"Error":return gE;case"Fatal":return gO;case"Info":return uO;case"Trace":return gT;case"None":return uI;case"Warning":return gI}},gF=Symbol.for("effect/Readable"),gM=Symbol.for("effect/Ref"),gA={_A:e=>e};class gj{ref;[gM]=gA;[gF];constructor(e){this.ref=e,this[gF]=gF,this.get=ua(()=>ao(this.ref))}get;modify(e){return ua(()=>{let t=ao(this.ref),[n,s]=e(t);return t!==s&&al(s)(this.ref),n})}pipe(){return eI(this,arguments)}}let gC=e=>new gj(ar(e)),gL=e=>ua(()=>gC(e)),gU=e=>e.get,g$=b(2,(e,t)=>e.modify(()=>[void 0,t])),gD=b(2,(e,t)=>e.modify(t)),gP=b(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class gz{buckets=[];scheduleTask(e,t){let n,s;for(n=0;n<this.buckets.length;n++)if(this.buckets[n][0]<=t)s=this.buckets[n];else break;if(s)s[1].push(e);else{let s=[];for(let e=0;e<n;e++)s.push(this.buckets[e]);s.push([t,[e]]);for(let e=n;e<this.buckets.length;e++)s.push(this.buckets[e]);this.buckets=s}}}class gB{maxNextTickBeforeTimer;running=!1;tasks=new gz;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,n]of(this.tasks.buckets=[],t))for(let e=0;e<n.length;e++)n[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(uG)&&e.getFiberRef(uV)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let gq=I(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new gB(2048));class gJ{tasks=new gz;deferred=!1;scheduleTask(e,t){this.deferred?gq.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(uG)&&e.getFiberRef(uV)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,n]of(this.tasks.buckets=[],e))for(let e=0;e<n.length;e++)n[e]()}this.deferred=!0}}let gK=I(Symbol.for("effect/FiberRef/currentScheduler"),()=>uP(gq)),gV=(e,t)=>({_tag:"Par",left:e,right:t}),gG=(e,t)=>({_tag:"Seq",left:e,right:t}),gH=e=>{let t=aV(e),n=aK();for(;;){let[e,s]=aY(t,[g2(),aK()],([e,t],n)=>{let[s,i]=gW(n);return[g5(e,s),aG(t,i)]});if(n=gY(n,e),aB(s))return aQ(n);t=s}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},gW=e=>{let t=e,n=g2(),s=aK(),i=aK();for(;;)switch(t._tag){case"Empty":if(aB(s))return[n,i];t=s.head,s=s.tail;break;case"Par":s=aJ(t.right,s),t=t.left;break;case"Seq":{let e=t.left,n=t.right;switch(e._tag){case"Empty":t=n;break;case"Par":{let s=e.left,i=e.right;t=gV(gG(s,n),gG(i,n));break}case"Seq":t=gG(e.left,gG(e.right,n));break;case"Single":t=e,i=aJ(n,i)}break}case"Single":if(n=g3(n,t),aB(s))return[n,i];t=s.head,s=s.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},gY=(e,t)=>{if(aB(e))return aV(g8(t));if(g4(t))return e;let n=bs(e.head),s=g6(t);return 1===n.length&&1===s.length&&ex(n[0],s[0])?aJ(bn(e.head,g8(t)),e.tail):aJ(g8(t),e)},gQ=Symbol.for("effect/RequestBlock/Entry"),gX={_R:e=>e},gZ=Symbol.for("effect/RequestBlock/RequestBlockParallel"),g0={_R:e=>e};class g1{map;[gZ]=g0;constructor(e){this.map=e}}let g2=()=>new g1(rT()),g3=(e,t)=>new g1(rD(e.map,t.dataSource,e=>sI(sM(e,i7(t.blockedRequest)),()=>iZ(t.blockedRequest)))),g5=(e,t)=>new g1(rJ(e.map,t.map,(e,t,n)=>rA(e,n,sk(rN(e,n),{onNone:()=>t,onSome:e=>rt(t,e)})))),g4=e=>aA(e.map),g6=e=>Array.from(rC(e.map)),g8=e=>bt(rB(e.map,e=>iZ(e))),g7=Symbol.for("effect/RequestBlock/RequestBlockSequential"),g9={_R:e=>e};class be{map;[g7]=g9;constructor(e){this.map=e}}let bt=e=>new be(e),bn=(e,t)=>new be(rJ(t.map,e.map,(e,t,n)=>rA(e,n,sk(rN(e,n),{onNone:()=>iQ(),onSome:e=>rt(e,t)})))),bs=e=>Array.from(rC(e.map)),bi=e=>Array.from(e.map),br=I(Symbol.for("effect/FiberRef/currentRequestMap"),()=>uP(new Map)),ba=(e,t,n,s)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return uF(uX,e=>"unbounded"===e?n():e>1?s(e):t());default:return e>1?s(e):t()}},bo=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return uF(uX,e=>"unbounded"===e||e>1?n():t());default:return e>1?n():t()}},bl=e=>{let t=p6(e);return fK(e=>e.sleep(t))},bc=e=>t=>{let n=t.label.replace(/[\s="]/g,"_");return`${n}=${e-t.startTime}ms`},bu="effect/MetricLabel",bp=Symbol.for(bu);class bm{key;value;[bp]=bp;_hash;constructor(e,t){this.key=e,this.value=t,this._hash=em(bu+this.key+this.value)}[er](){return this._hash}[eb](e){return bd(e)&&this.key===e.key&&this.value===e.value}pipe(){return eI(this,arguments)}}let bh=(e,t)=>new bm(e,t),bd=e=>z(e,bp),bf=e=>{let t,n;return"function"==typeof e?t=e:(t=e.try,n=e.catch),ua(()=>{try{return t()}catch(e){throw cf(lE(n?n(e):new ph(e)))}})},bg=b(3,(e,t,n)=>cA(e,B(t),n)),bb=b(2,(e,t)=>{let n;return cA(e,e=>(n??=Object.keys(t),z(e,"_tag")&&R(e._tag)&&n.includes(e._tag)),e=>t[e._tag](e))}),bx=e=>bN(e,by,gl),by=((e,t,n)=>cG(e,e=>t(e)?ui(e):n(e)),ck(e=>ui(e.getFiberRefs()))),bv=e=>(...t)=>{let n;let s=sT(e);for(let e=0,s=t.length;e<s;e++){let s=t[e];lF(s)&&(n=void 0!==n?lN(n,s):s,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return 0===t.length?t="":1===t.length&&(t=t[0]),void 0===n&&(n=lO),ck(e=>(e.log(t,n,s),um))},b_=bv(uE),bS=bv(uO),bw=bv(gI),bk=bv(gE),bO=b(2,(e,t)=>cX(e,{onFailure:e=>cJ(()=>t(e)),onSuccess:ui})),bE=e=>c4(e,e=>!e),bI=e=>bA((t,n)=>w(e,gu(t,n))),bT=b(3,(e,t,n)=>pq(s=>pJ(e,tr(s,t,n)))),bR=b(3,(e,t,n)=>pq(s=>cG(n,n=>pJ(e,w(s,tr(t,n)))))),bN=b(3,(e,t,n)=>cG(t,s=>cG(e,e=>c4(t,t=>[n(s,t),e])))),bF=b(2,(e,t)=>cX(e,{onFailure:e=>{let n=lP(e);switch(n._tag){case"Left":return uv(t(n.left),cq(e));case"Right":return cq(e)}},onSuccess:ui})),bM=e=>{let t,n;return("function"==typeof e?t=e:(t=e.try,n=e.catch),t.length>=1)?cN((e,s)=>{try{t(s).then(t=>e(pI(t)),t=>e(cz(n?n(t):new ph(t))))}catch(t){e(cz(n?n(t):new ph(t)))}}):cN(e=>{try{t().then(t=>e(pI(t)),t=>e(cz(n?n(t):new ph(t))))}catch(t){e(cz(n?n(t):new ph(t)))}})},bA=e=>ck(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),um)),bj=b(2,(e,t)=>ur(()=>t()?c4(e,e5):ui(sw()))),bC=BigInt(0),bL=(e,t,n)=>{if(!1===e.getFiberRef(u5))return pW(t);let s=e.getFiberRef(uK),i=e.getFiberRef(fJ),r=ta(i,cl),a=ta(i,d6),o=e.getFiberRef(u4),l=e.getFiberRefs(),c=f7(l,u6),u=f7(l,u8),p=n.parent?e5(n.parent):n.root?sw():to(s,cc),m="Some"===u._tag?void 0!==n.links?[...i2(u.value),...n.links??[]]:i2(u.value):n.links??im(),h=r.span(t,p,n.context??tp(),m,o?a.unsafeCurrentTimeNanos():bC,n.kind??"internal");return"function"==typeof n.captureStackTrace&&l8.set(h,n.captureStackTrace),"Some"===c._tag&&rq(c.value,(e,t)=>h.attribute(t,e)),void 0!==n.attributes&&Object.entries(n.attributes).forEach(([e,t])=>h.attribute(e,t)),h},bU=(e,...t)=>{let n=cm(1===t.length?void 0:t[0]),s=t[t.length-1];return ck(t=>{let i=bL(t,e,n),r=t.getFiberRef(u4),a=ta(t.getFiberRef(fJ),d6);return c7(s(i),e=>ua(()=>{"Ended"!==i.status._tag&&(pf(e)&&l8.has(i)&&i.attribute("code.stacktrace",l8.get(i)()),i.end(r?a.unsafeCurrentTimeNanos():bC,e))}))})},b$=b(2,(e,t)=>bT(e,cc,t)),bD="InterruptSignal",bP="Stateful",bz="Resume",bB="YieldNow",bq=e=>({_tag:bD,cause:e}),bJ=e=>({_tag:bP,onFiber:e}),bK=e=>({_tag:bz,effect:e}),bV=()=>({_tag:bB}),bG=Symbol.for("effect/FiberScope");class bH{[bG]=bG;fiberId=aI;roots=new Set;add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}}class bW{fiberId;parent;[bG]=bG;constructor(e,t){this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(bJ(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let bY=e=>new bW(e.id(),e),bQ=I(Symbol.for("effect/FiberScope/Global"),()=>new bH),bX=Symbol.for("effect/Fiber"),bZ={_E:e=>e,_A:e=>e},b0={[bX]:bZ,pipe(){return eI(this,arguments)}},b1=Symbol.for("effect/Fiber"),b2=((e,t)=>e.interruptAsFork(t),e=>uy(cY(e.await),e.inheritAll)),b3=((e,t)=>b3(e,e=>ua(()=>t(e))),b(2,(e,t)=>({...b0,id:()=>e.id(),await:cG(e.await,pS(t)),children:e.children,inheritAll:e.inheritAll,poll:cG(e.poll,e=>{switch(e._tag){case"None":return ui(sw());case"Some":return w(pS(e.value,t),c4(e5))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...b0,id:()=>aS(e.id(),t.id()),await:u_(e.await,t.await,(e,t)=>pg(e)?e:t),children:e.children,inheritAll:uv(t.inheritAll,e.inheritAll),poll:u_(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return sw();case"Some":return pg(e.value)?e:t}}),interruptAsFork:n=>w(uw(e,n),uv(w(t,uw(n))),cI)});let b5="effect/FiberCurrent",b4=Symbol.for("effect/Logger"),b6={_Message:e=>e,_Output:e=>e},b8=e=>({[b4]:b6,log:e,pipe(){return eI(this,arguments)}}),b7=b(2,(e,t)=>b8(n=>t(e.log(n)))),b9=((e,t)=>b8(n=>[e.log(n),t.log(n)]),b8(({annotations:e,cause:t,date:n,fiberId:s,logLevel:i,message:r,spans:a})=>{let o=n.getTime(),l=`timestamp=${n.toISOString()} level=${i.label} fiber=${aO(s)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eO(r[e]);t.length>0&&(l+=" message=",l=xn(t,l))}else{let e=eO(r);e.length>0&&(l+=" message=",l=xn(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xn(l3(t),l)),aq(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=w(t,bc(o))}if(w(e,rL)>0){l+=" ";let t=!0;for(let[n,s]of e)t?t=!1:l+=" ",l+=xr(n)+"=",l=xn(eO(s),l)}return l})),xe=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,xt=/^[^\s"=]+$/,xn=(e,t)=>t+(e.match(xt)?e:xe(e)),xs=(({annotations:e,cause:t,date:n,fiberId:s,logLevel:i,message:r,spans:a})=>{let o=n.getTime(),l=`timestamp=${n.toISOString()} level=${i.label} fiber=${aO(s)}`;if(Array.isArray(r))for(let e=0;e<r.length;e++){let t=eO(r[e],0);t.length>0&&(l+=" message=",l=xo(t,l))}else{let e=eO(r,0);e.length>0&&(l+=" message=",l=xo(e,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=xo(l3(t),l)),aq(a)){l+=" ";let e=!0;for(let t of a)e?e=!1:l+=" ",l+=w(t,xl(o))}if(w(e,rL)>0){l+=" ";let t=!0;for(let[n,s]of e)t?t=!1:l+=" ",l+=xr(n)+"=",l=xo(eO(s,0),l)}return l},b8(({annotations:e,cause:t,date:n,fiberId:s,logLevel:i,message:r,spans:a})=>{let o=n.getTime(),l={},c={};if(rL(e)>0)for(let[t,n]of e)l[t]=xi(n);if(aq(a))for(let e of a)c[e.label]=o-e.startTime;return{message:xi(r),logLevel:i.label,timestamp:n.toISOString(),cause:lA(t)?void 0:l3(t),annotations:l,spans:c,fiberId:aO(s)}})),xi=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return e}},xr=e=>e.replace(/[\s="]/g,"_"),xa=e=>JSON.stringify(e),xo=(e,t)=>t+(e.match(xt)?e:xa(e)),xl=e=>t=>{let n=xr(t.label);return`${n}=${e-t.startTime}ms`},xc=Symbol.for("effect/MetricKeyType"),xu="effect/MetricKeyType/Counter",xp=Symbol.for(xu),xm=Symbol.for("effect/MetricKeyType/Frequency"),xh=Symbol.for("effect/MetricKeyType/Gauge"),xd="effect/MetricKeyType/Histogram",xf=Symbol.for(xd),xg=Symbol.for("effect/MetricKeyType/Summary"),xb={_In:e=>e,_Out:e=>e};class xx{incremental;bigint;[xc]=xb;[xp]=xp;constructor(e,t){this.incremental=e,this.bigint=t,this._hash=em(xu)}_hash;[er](){return this._hash}[eb](e){return x_(e)}pipe(){return eI(this,arguments)}}class xy{boundaries;[xc]=xb;[xf]=xf;constructor(e){this.boundaries=e,this._hash=w(em(xd),el(ea(this.boundaries)))}_hash;[er](){return this._hash}[eb](e){return xk(e)&&ex(this.boundaries,e.boundaries)}pipe(){return eI(this,arguments)}}let xv=e=>new xx(e?.incremental??!1,e?.bigint??!1),x_=e=>z(e,xp),xS=e=>z(e,xm),xw=e=>z(e,xh),xk=e=>z(e,xf),xO=e=>z(e,xg),xE=Symbol.for("effect/MetricKey"),xI={_Type:e=>e},xT=s_(ex);class xR{name;keyType;description;tags;[xE]=xI;constructor(e,t,n,s=[]){this.name=e,this.keyType=t,this.description=n,this.tags=s,this._hash=w(em(this.name+this.description),el(ea(this.keyType)),el(ef(this.tags)))}_hash;[er](){return this._hash}[eb](e){return xN(e)&&this.name===e.name&&ex(this.keyType,e.keyType)&&ex(this.description,e.description)&&xT(this.tags,e.tags)}pipe(){return eI(this,arguments)}}let xN=e=>z(e,xE),xF=(e,t)=>new xR(e,xv(t),sT(t?.description)),xM=b(2,(e,t)=>0===t.length?e:new xR(e.name,e.keyType,e.description,ip(e.tags,t))),xA=Symbol.for("effect/MutableHashMap"),xj={[xA]:xA,[Symbol.iterator](){return new xC(this)},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}};class xC{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new xL(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new xC(this.self)}}class xL{backing;constructor(e){this.backing=e}currentBucket;next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let xU=()=>{let e=Object.create(xj);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},x$=b(2,(e,t)=>{if(!1===ev(t))return e.referential.has(t)?e5(e.referential.get(t)):sw();let n=t[er](),s=e.buckets.get(n);return void 0===s?sw():xD(e,s,t)}),xD=(e,t,n,s=!1)=>{for(let i=0,r=t.length;i<r;i++)if(n[eb](t[i][0])){let n=t[i][1];return s&&(t.splice(i,1),e.bucketsSize--),e5(n)}return sw()},xP=b(2,(e,t)=>e2(x$(e,t))),xz=b(3,(e,t,n)=>{if(!1===ev(t))return e.referential.set(t,n),e;let s=t[er](),i=e.buckets.get(s);return void 0===i?e.buckets.set(s,[[t,n]]):(xB(e,i,t),i.push([t,n])),e.bucketsSize++,e}),xB=(e,t,n)=>{for(let s=0,i=t.length;s<i;s++)if(n[eb](t[s][0])){t.splice(s,1),e.bucketsSize--;return}},xq=b(2,(e,t)=>{if(!1===ev(t))return e.referential.delete(t),e;let n=t[er](),s=e.buckets.get(n);return void 0===s||(xB(e,s,t),0===s.length&&e.buckets.delete(n)),e}),xJ=e=>e.referential.size+e.bucketsSize,xK=Symbol.for("effect/MetricState"),xV="effect/MetricState/Counter",xG=Symbol.for(xV),xH="effect/MetricState/Frequency",xW=Symbol.for(xH),xY="effect/MetricState/Gauge",xQ=Symbol.for(xY),xX="effect/MetricState/Histogram",xZ=Symbol.for(xX),x0="effect/MetricState/Summary",x1=Symbol.for(x0),x2={_A:e=>e};class x3{count;[xK]=x2;[xG]=xG;constructor(e){this.count=e}[er](){return w(ea(xV),el(ea(this.count)),eg(this))}[eb](e){return yi(e)&&this.count===e.count}pipe(){return eI(this,arguments)}}let x5=s_(ex);class x4{occurrences;[xK]=x2;[xW]=xW;constructor(e){this.occurrences=e}_hash;[er](){return w(em(xH),el(ef(sK(this.occurrences.entries()))),eg(this))}[eb](e){return yr(e)&&x5(sK(this.occurrences.entries()),sK(e.occurrences.entries()))}pipe(){return eI(this,arguments)}}class x6{value;[xK]=x2;[xQ]=xQ;constructor(e){this.value=e}[er](){return w(ea(xY),el(ea(this.value)),eg(this))}[eb](e){return ya(e)&&this.value===e.value}pipe(){return eI(this,arguments)}}class x8{buckets;count;min;max;sum;[xK]=x2;[xZ]=xZ;constructor(e,t,n,s,i){this.buckets=e,this.count=t,this.min=n,this.max=s,this.sum=i}[er](){return w(ea(xX),el(ea(this.buckets)),el(ea(this.count)),el(ea(this.min)),el(ea(this.max)),el(ea(this.sum)),eg(this))}[eb](e){return yo(e)&&ex(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eI(this,arguments)}}class x7{error;quantiles;count;min;max;sum;[xK]=x2;[x1]=x1;constructor(e,t,n,s,i,r){this.error=e,this.quantiles=t,this.count=n,this.min=s,this.max=i,this.sum=r}[er](){return w(ea(x0),el(ea(this.error)),el(ea(this.quantiles)),el(ea(this.count)),el(ea(this.min)),el(ea(this.max)),el(ea(this.sum)),eg(this))}[eb](e){return yl(e)&&this.error===e.error&&ex(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eI(this,arguments)}}let x9=e=>new x3(e),ye=e=>new x4(e),yt=e=>new x6(e),yn=e=>new x8(e.buckets,e.count,e.min,e.max,e.sum),ys=e=>new x7(e.error,e.quantiles,e.count,e.min,e.max,e.sum),yi=e=>z(e,xG),yr=e=>z(e,xW),ya=e=>z(e,xQ),yo=e=>z(e,xZ),yl=e=>z(e,x1),yc=Symbol.for("effect/MetricHook"),yu={_In:e=>e,_Out:e=>e},yp=e=>({[yc]:yu,pipe(){return eI(this,arguments)},...e}),ym=BigInt(0),yh=e=>{let t=e.keyType.bigint?ym:0,n=e.keyType.incremental?e.keyType.bigint?e=>e>=ym:e=>e>=0:e=>!0;return yp({get:()=>x9(t),update:e=>{n(e)&&(t+=e)}})},yd=e=>{let t=new Map;for(let n of e.keyType.preregisteredWords)t.set(n,0);return yp({get:()=>ye(t),update:e=>{let n=t.get(e)??0;t.set(e,n+1)}})},yf=(e,t)=>{let n=t;return yp({get:()=>yt(n),update:e=>{n=e}})},yg=e=>{let t=e.keyType.boundaries.values,n=t.length,s=new Uint32Array(n+1),i=new Float32Array(n),r=0,a=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;w(t,is(sP),id((e,t)=>{i[t]=e}));let c=()=>{let e=sJ(n),t=0;for(let r=0;r<n;r++){let n=i[r];t+=s[r],e[r]=[n,t]}return e};return yp({get:()=>yn({buckets:c(),count:r,min:o,max:l,sum:a}),update:e=>{let t=0,c=n;for(;t!==c;){let n=Math.floor(t+(c-t)/2);e<=i[n]?c=n:t=n,c===t+1&&(e<=i[t]?c=t:t=c)}s[t]=s[t]+1,r+=1,a+=e,e<o&&(o=e),e>l&&(l=e)}})},yb=e=>{let{error:t,maxAge:n,maxSize:s,quantiles:i}=e.keyType,r=w(i,is(sP)),a=sJ(s),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,m=e=>{let i=[],o=0;for(;o!==s-1;){let t=a[o];if(null!=t){let[s,r]=t,a=ma(e-s);mS(a,mn)&&a<=n&&i.push(r)}o+=1}return yx(t,r,is(i,sP))},h=(e,t)=>{s>0&&(a[(o+=1)%s]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return yp({get:()=>ys({error:t,quantiles:m(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>h(e,t)})},yx=(e,t,n)=>{let s=n.length;if(!sX(t))return im();let i=t[0],r=t.slice(1),a=yy(e,s,sw(),0,i,n),o=ih(a);return r.forEach(t=>{o.push(yy(e,s,a.value,a.consumed,t,a.rest))}),id(o,e=>[e.quantile,e.value])},yy=(e,t,n,s,i,r)=>{let a=e,o=t,l=n,c=s,u=i,p=r,m=e,h=t,d=n,f=s,g=i,b=r;for(;;){if(!sX(p))return{quantile:u,value:sw(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:e5(s6(p)),consumed:c+p.length,rest:[]};let e=s9(p,e=>e<=p[0]),t=u*o,n=a/2*t,s=c+e[0].length,i=Math.abs(s-t);if(s<t-n){m=a,h=o,d=s3(p),f=s,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue}if(s>t+n)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":m=a,h=o,d=s3(p),f=s,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue;case"Some":if(i<Math.abs(t-l.value)){m=a,h=o,d=s3(p),f=s,g=u,b=e[1],a=m,o=h,l=d,c=f,u=g,p=b;continue}return{quantile:u,value:e5(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},yv=Symbol.for("effect/MetricPair"),y_={_Type:e=>e},yS=(e,t)=>({[yv]:y_,metricKey:e,metricState:t,pipe(){return eI(this,arguments)}}),yw=Symbol.for("effect/MetricRegistry");class yk{[yw]=yw;map=xU();snapshot(){let e=[];for(let[t,n]of this.map)e.push(yS(t,n.get()));return e}get(e){let t=w(this.map,x$(e),sR);if(null!=t)return t;if(x_(e.keyType))return this.getCounter(e);if(xw(e.keyType))return this.getGauge(e);if(xS(e.keyType))return this.getFrequency(e);if(xk(e.keyType))return this.getHistogram(e);if(xO(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=w(this.map,x$(e),sR);if(null==t){let n=yh(e);w(this.map,xP(e))||w(this.map,xz(e,n)),t=n}return t}getFrequency(e){let t=w(this.map,x$(e),sR);if(null==t){let n=yd(e);w(this.map,xP(e))||w(this.map,xz(e,n)),t=n}return t}getGauge(e){let t=w(this.map,x$(e),sR);if(null==t){let n=yf(e,e.keyType.bigint?BigInt(0):0);w(this.map,xP(e))||w(this.map,xz(e,n)),t=n}return t}getHistogram(e){let t=w(this.map,x$(e),sR);if(null==t){let n=yg(e);w(this.map,xP(e))||w(this.map,xz(e,n)),t=n}return t}getSummary(e){let t=w(this.map,x$(e),sR);if(null==t){let n=yb(e);w(this.map,xP(e))||w(this.map,xz(e,n)),t=n}return t}}let yO=()=>new yk,yE=Symbol.for("effect/Metric"),yI={_Type:e=>e,_In:e=>e,_Out:e=>e},yT=I(Symbol.for("effect/Metric/globalMetricRegistry"),()=>yO()),yR=function(e,t,n){let s=Object.assign(e=>uo(e,e=>yj(s,e)),{[yE]:yI,keyType:e,unsafeUpdate:t,unsafeValue:n,register(){return this.unsafeValue([]),this},pipe(){return eI(this,arguments)}});return s},yN=(e,t)=>yF(xF(e,t)),yF=e=>{let t;let n=new WeakMap,s=s=>{if(0===s.length)return void 0!==t?t:t=yT.get(e);let i=n.get(s);return void 0!==i||(i=yT.get(xM(e,s)),n.set(s,i)),i};return yR(e.keyType,(e,t)=>s(t).update(e),e=>s(e).get())},yM=b(3,(e,t,n)=>yA(e,[bh(t,n)])),yA=b(2,(e,t)=>yR(e.keyType,(n,s)=>e.unsafeUpdate(n,ip(t,s)),n=>e.unsafeValue(ip(t,n)))),yj=b(2,(e,t)=>uF(u1,n=>ua(()=>e.unsafeUpdate(t,n)))),yC="effect/MetricBoundaries",yL=Symbol.for(yC);class yU{values;[yL]=yL;constructor(e){this.values=e,this._hash=w(em(yC),el(ef(this.values)))}_hash;[er](){return this._hash}[eb](e){return y$(e)&&ex(this.values,e.values)}pipe(){return eI(this,arguments)}}let y$=e=>z(e,yL),yD=b(2,(e,t)=>uF(br,n=>ua(()=>{if(n.has(e)){let s=n.get(e);s.state.completed||(s.state.completed=!0,pD(s.result,t))}})));class yP{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}}let yz=Symbol.for("effect/Supervisor"),yB={_T:e=>e};class yq{underlying;value0;[yz]=yB;constructor(e,t){this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,n,s){this.underlying.onStart(e,t,n,s)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new yq(this,w(this.value,c4(e)))}zip(e){return new yJ(this,e)}}class yJ{left;right;_tag="Zip";[yz]=yB;constructor(e,t){this.left=e,this.right=t}get value(){return ux(this.left.value,this.right.value)}onStart(e,t,n,s){this.left.onStart(e,t,n,s),this.right.onStart(e,t,n,s)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new yq(this,w(this.value,c4(e)))}zip(e){return new yJ(this,e)}}let yK=e=>z(e,yz)&&B(e,"Zip");class yV{[yz]=yB;fibers=new Set;get value(){return ua(()=>Array.from(this.fibers))}onStart(e,t,n,s){this.fibers.add(s)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new yq(this,w(this.value,c4(e)))}zip(e){return new yJ(this,e)}onRun(e,t){return e()}}class yG{effect;[yz]=yB;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,t,n,s){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new yq(this,w(this.value,c4(e)))}zip(e){return new yJ(this,e)}onRun(e,t){return e()}}let yH=ua(()=>new yV),yW=e=>new yG(e),yY=I("effect/Supervisor/none",()=>yW(um)),yQ="Empty",yX="AddSupervisor",yZ="RemoveSupervisor",y0="AndThen",y1={_tag:yQ},y2=(e,t)=>({_tag:y0,first:e,second:t}),y3=(e,t)=>{let n=e,s=t;for(;rs(s);){let e=rr(s);switch(e._tag){case yQ:s=ra(s);break;case yX:n=n.zip(e.supervisor),s=ra(s);break;case yZ:n=y5(n,e.supervisor),s=ra(s);break;case y0:s=i9(e.first)(i9(e.second)(ra(s)))}}return n},y5=(e,t)=>ex(e,t)?yY:yK(e)?y5(e.left,t).zip(y5(e.right,t)):e,y4=e=>ex(e,yY)?rQ():yK(e)?w(y4(e.left),r8(y4(e.right))):at(e),y6=o0({empty:y1,patch:(e,t)=>y3(t,iZ(e)),combine:y2,diff:(e,t)=>{if(ex(e,t))return y1;let n=y4(e),s=y4(t),i=w(s,r6(n),r9(y1,(e,t)=>y2(e,{_tag:yX,supervisor:t}))),r=w(n,r6(s),r9(y1,(e,t)=>y2(e,{_tag:yZ,supervisor:t})));return y2(i,r)}}),y8=yN("effect_fiber_started",{incremental:!0}),y7=yN("effect_fiber_active"),y9=yN("effect_fiber_successes",{incremental:!0}),ve=yN("effect_fiber_failures",{incremental:!0}),vt=yM(yF(new xR("effect_fiber_lifetimes",new xy(w(((e,t)=>{let n=Math.max(1,Math.floor(e)),s=Array(n);for(let e=0;e<n;e++)s[e]=t(e);return s})((o={start:.5,factor:2,count:35}).count-1,e=>o.start*Math.pow(o.factor,e)),i4,e=>new yU(w(e,sW(iZ(Number.POSITIVE_INFINITY)),iS)))),sT(l))),"time_unit","milliseconds"),vn="Continue",vs="Yield",vi={_E:e=>e,_A:e=>e},vr=e=>{throw Error(`BUG: FiberRuntime - ${eO(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},va=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),vo=I("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),vl={[eM]:(e,t,n)=>es(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>pI(pI(n)),[eA]:(e,t,n)=>es(()=>t.effect_instruction_i2(n)),[eP]:(e,t,n)=>(e.patchRuntimeFlags(e._runtimeFlags,t.patch),lr(e._runtimeFlags)&&e.isInterrupted())?p_(e.getInterruptedCause()):pI(n),[eU]:(e,t,n)=>(es(()=>t.effect_instruction_i2(n)),es(()=>t.effect_instruction_i0()))?(e.pushStack(t),es(()=>t.effect_instruction_i1())):um},vc={[bD]:(e,t,n,s)=>(e.processNewInterruptSignal(s.cause),lr(t)?p_(s.cause):n),[bz]:(e,t,n,s)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[bP]:(e,t,n,s)=>(s.onFiber(e,gS(t)),n),[bB]:(e,t,n,s)=>cG(ub(),()=>n)},vu=e=>c1(gH(e),e=>vO(bi(e),([e,t])=>{let n=new Map,s=[];for(let e of t)for(let t of(s.push(i2(e)),e))n.set(t.request,t);let i=s.flat();return u$(vZ(e.runAll(s),i,()=>i.forEach(e=>{e.listeners.interrupted=!0})),br,n)},!1,!1));class vp{[bX]=bZ;[b1]=vi;pipe(){return eI(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=[];_children=null;_observers=[];_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,t,n){if(this._runtimeFlags=n,this._fiberId=e,this._fiberRefs=t,this._supervisor=this.getFiberRef(vH),this._scheduler=this.getFiberRef(gK),lu(n)){let e=this.getFiberRef(u1);y8.unsafeUpdate(1,e),y7.unsafeUpdate(1,e)}this._tracer=ta(this.getFiberRef(fJ),cl)}id(){return this._fiberId}resume(e){this.tell(bK(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>gk(t)?e._runtimeFlags:t.runtimeFlags)}scope(){return bY(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(u3)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return ur(()=>{let t=pF(this._fiberId);return this.tell(bJ((n,s)=>{pD(t,ua(()=>e(n,s)))})),pj(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return cN(e=>{let t=t=>e(ui(t));return this.tell(bJ((e,n)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),ua(()=>this.tell(bJ((e,n)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return ck((e,t)=>{let n=e.id(),s=e.getFiberRefs(),i=t.runtimeFlags,r=f5(s,n,this.getFiberRefs());return e.setFiberRefs(r),uh(w(lm(i,e.getFiberRef(vG)),le(1),le(16)))})}get poll(){return ua(()=>sT(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return ua(()=>this.tell(bq(lT(e))))}unsafeInterruptAsFork(e){this.tell(bq(lT(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(vG,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=f8(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=ge(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this._tracer=ta(this.getFiberRef(fJ),cl),this._supervisor=this.getFiberRef(vH),this._scheduler=this.getFiberRef(gK)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=vn,n=globalThis[b5];globalThis[b5]=this;try{for(;t===vn;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[b5]=n}this._queue.length>0&&!this._running?(this._running=!0,t===vs?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(uV))}drainQueueWhileRunning(e,t){let n=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];n=vc[t._tag](this,e,n,t)}return n}isInterrupted(){return!lA(this.getFiberRef(u3))}addInterruptedCause(e){let t=this.getFiberRef(u3);this.setFiberRef(u3,lN(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(bq(lT(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return uf({while:()=>!t,body:()=>{let n=e.next();return n.done?ua(()=>{t=!0}):cI(n.value.await)},step:()=>{}})}return null}reportExitValue(e){if(lu(this._runtimeFlags)){let t=this.getFiberRef(u1),n=this.id().startTimeMillis,s=Date.now();switch(vt.unsafeUpdate(s-n,t),y7.unsafeUpdate(-1,t),e._tag){case ej:y9.unsafeUpdate(1,t);break;case eN:ve.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(u0);lC(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e)}getLoggers(){return this.getFiberRef(vg)}log(e,t,n){let s=e2(n)?n.value:this.getFiberRef(uW);if(gR(this.getFiberRef(vm),s))return;let i=this.getFiberRef(uY),r=this.getFiberRef(uH),a=this.getLoggers(),o=this.getFiberRefs();if(an(a)>0){let n=new Date(ta(this.getFiberRef(fJ),d6).unsafeCurrentTimeMillis());for(let l of a)l.log({fiberId:this.id(),logLevel:s,message:e,cause:t,context:o,spans:i,annotations:r,date:n})}}evaluateMessageWhileSuspended(e){switch(e._tag){case bB:return vs;case bD:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(p_(e.cause)),this._asyncInterruptor=null),vn;case bz:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),vn;case bP:return e.onFiber(this,null!==this._exitValue?gv:gw(this._runtimeFlags,this._asyncBlockingOn)),vn;default:return vr(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let t=lr(this._runtimeFlags)&&this.isInterrupted()?p_(this.getInterruptedCause()):e;for(;null!==t;){let e=t,n=this.runLoop(e);if(n===va){let e=vo.currentOp;vo.currentOp=null,e._op===eD?ls(this._runtimeFlags)?(this.tell(bV()),this.tell(bK(pT)),t=null):t=pT:e._op===eT&&(t=null)}else{this._runtimeFlags=w(this._runtimeFlags,li(16));let e=this.interruptAllChildren();null!==e?t=cG(e,()=>n):(0===this._queue.length?this.setExitValue(n):this.tell(bK(n)),t=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(bK(e));else{this._running=!0;let t=globalThis[b5];globalThis[b5]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[b5]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(bK(e))}patchRuntimeFlags(e,t){let n=lh(e,t);return globalThis[b5]=this,this._runtimeFlags=n,n}initiateAsync(e,t){let n=!1,s=e=>{n||(n=!0,this.tell(bK(e)))};lr(e)&&(this._asyncInterruptor=s);try{t(s)}catch(e){s(cq(lI(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==eF)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==eM&&e._op!==eU)return e;e=this.popStack()}}Tag(e){return c4(uN(uK),t=>ta(t,e))}Left(e){return cz(e.left)}None(e){return cz(new pp)}Right(e){return pI(e.right)}Some(e){return pI(e.value)}Micro(e){return cR(t=>{let n=tV().pipe(tH(t1,this.getFiberRef(uK))),s=t;return e[tI](n,e=>{if("Right"===e._tag)return s(pI(e.right));switch(e.left._tag){case"Aborted":return s(p_(lT(aI)));case"Expected":return s(cz(e.left.error));case"Unexpected":return s(cU(e.left.defect))}}),cN(e=>{s=t=>{e(um)},tG(n,tZ).abort()})})}[eC](e){let t=es(()=>e.effect_instruction_i0()),n=this.getNextSuccessCont();return void 0!==n?(n._op in vl||vr(n),vl[n._op](this,n,t)):(vo.currentOp=pI(t),va)}[ej](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in vl||vr(t),vl[t._op](this,t,e.effect_instruction_i0)):(vo.currentOp=e,va)}[eN](e){let t=e.effect_instruction_i0,n=this.getNextFailCont();if(void 0===n)return vo.currentOp=p_(t),va;switch(n._op){case eF:case eA:if(!(lr(this._runtimeFlags)&&this.isInterrupted()))return es(()=>n.effect_instruction_i1(t));return p_(lq(t));case"OnStep":if(!(lr(this._runtimeFlags)&&this.isInterrupted()))return pI(p_(t));return p_(lq(t));case eP:if(this.patchRuntimeFlags(this._runtimeFlags,n.patch),lr(this._runtimeFlags)&&this.isInterrupted())return p_(lN(t,this.getInterruptedCause()));return p_(t);default:vr(n)}}[e$](e){return es(()=>e.effect_instruction_i0(this,gS(this._runtimeFlags)))}Blocked(e){let t=this.getFiberRefs(),n=this._runtimeFlags;if(this._steps.length>0){let s=[],i=this._steps[this._steps.length-1],r=this.popStack();for(;r&&"OnStep"!==r._op;)s.push(r),r=this.popStack();this.setFiberRefs(i.refs),this._runtimeFlags=i.flags;let a=gl(i.refs,t),o=lm(i.flags,n);return pI(cg(e.effect_instruction_i0,ck(t=>{for(;s.length>0;)t.pushStack(s.pop());return t.setFiberRefs(gu(t.id(),t.getFiberRefs())(a)),t._runtimeFlags=lh(o)(t._runtimeFlags),e.effect_instruction_i1})))}return up(t=>cG(vI(cb(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return vu(e.effect_instruction_i0)}[eL](e){let t=e.effect_instruction_i0,n=this._runtimeFlags,s=lh(n,t);if(lr(s)&&this.isInterrupted())return p_(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,t),!e.effect_instruction_i1)return pT;{let t=lm(s,n);return this.pushStack(new cy(t,e)),es(()=>e.effect_instruction_i1(n))}}[eM](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[eF](e){return this.pushStack(e),e.effect_instruction_i0}[eA](e){return this.pushStack(e),e.effect_instruction_i0}[eT](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this._runtimeFlags,e.effect_instruction_i0),vo.currentOp=e,va}[eD](e){return this.isYielding=!1,vo.currentOp=e,va}[eU](e){let t=e.effect_instruction_i0,n=e.effect_instruction_i1;return t()?(this.pushStack(e),n()):pT}[eR](e){return es(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this._runtimeFlags)!=0&&this._supervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this._runtimeFlags,t)),!this.isYielding){this.currentOpCount+=1;let e=this._scheduler.shouldYield(this);if(!1!==e){this.isYielding=!0,this.currentOpCount=0;let n=t;t=cG(ub({priority:e}),()=>n)}}try{if("_op"in t&&t._op in this||vr(t),(t=this._tracer.context(()=>k()!==t[ez]._V?c$(`Cannot execute an Effect versioned ${t[ez]._V} with a Runtime of version ${k()}`):this[t._op](t),this))===va){let e=vo.currentOp;if(e._op===eD||e._op===eT)return va;return vo.currentOp=null,e._op===ej||e._op===eN?e:p_(lI(e))}}catch(e){t=cd(e)?p_(e.cause):pc(e)?p_(lN(lI(e),lT(aI))):cU(e)}}}run=()=>{this.drainQueueOnCurrentThread()}}let vm=I("effect/FiberRef/currentMinimumLogLevel",()=>uP(gN("Info"))),vh=e=>b8(t=>{ta(f9(t.context,fJ),fL).unsafe.log(e.log(t))}),vd=I(Symbol.for("effect/Logger/defaultLogger"),()=>vh(b9)),vf=I(Symbol.for("effect/Logger/tracerLogger"),()=>b8(({annotations:e,cause:t,context:n,fiberId:s,logLevel:i,message:r})=>{let a=sA(f7(n,uK),to(cc)),o=sM(f7(n,fJ),e=>ta(e,d6));if("None"===a._tag||"ExternalSpan"===a.value._tag||"None"===o._tag)return;let l=Object.fromEntries(rB(e,eO));l["effect.fiberId"]=aO(s),l["effect.logLevel"]=i.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=l3(t)),a.value.event(String(r),o.value.unsafeCurrentTimeNanos(),l)})),vg=I(Symbol.for("effect/FiberRef/currentLoggers"),()=>uz(at(vd,vf))),vb=b(e=>cw(e[0]),(e,t)=>uu(uo(e,e=>vx(n=>t(e,n))))),vx=e=>ck(t=>{let n=t.getFiberRefs(),s=t._runtimeFlags;return cG(vD,t=>pt(t,t=>ck(i=>{let r=i.getFiberRefs(),a=i._runtimeFlags,o=gl(r,n),l=lm(a,s),c=gl(n,r);return i.setFiberRefs(gu(o,i.id(),n)),vX(ug(e(t),l),ua(()=>{i.setFiberRefs(gu(c,i.id(),i.getFiberRefs()))}))})))}),vy=e=>{if(Array.isArray(e)||V(e))return[e,sw()];let t=Object.keys(e),n=t.length;return[t.map(t=>e[t]),e5(e=>{let s={};for(let i=0;i<n;i++)s[t[i]]=e[i];return s})]},vv=(e,t,n)=>{let s=[];for(let t of e)s.push(cD(t));return cG(vw(s,x,{concurrency:n?.concurrency,batching:n?.batching}),e=>{let s=sw(),i=e.length,r=Array(i),a=Array(i),o=!1;for(let t=0;t<i;t++){let n=e[t];"Left"===n._tag?(r[t]=e5(n.left),o=!0):(a[t]=n.right,r[t]=s)}return o?"Some"===t._tag?cz(t.value(r)):cz(r):n?.discard?um:"Some"===t._tag?ui(t.value(a)):ui(a)})},v_=(e,t,n)=>{let s=[];for(let t of e)s.push(cD(t));return n?.discard?vw(s,x,{concurrency:n?.concurrency,batching:n?.batching,discard:!0}):c4(vw(s,x,{concurrency:n?.concurrency,batching:n?.batching}),e=>"Some"===t._tag?t.value(e):e)},vS=(e,t)=>{let[n,s]=vy(e);return t?.mode==="validate"?vv(n,s,t):t?.mode==="either"?v_(n,s,t):t?.discard!==!0&&"Some"===s._tag?c4(vw(n,x,t),s.value):vw(n,x,t)},vw=((e,t)=>Array.from({length:t},()=>e),b(e=>V(e[0]),(e,t,n)=>ck(s=>{let i=n?.batching===!0||n?.batching==="inherit"&&s.getFiberRef(uZ);return n?.discard?ba(n.concurrency,()=>vj(fY)(n=>i?vO(e,(e,s)=>n(t(e,s)),!0,!1,1):c1(e,(e,s)=>n(t(e,s)))),()=>vj(fZ)(n=>vO(e,(e,s)=>n(t(e,s)),i,!1)),n=>vj(f0(n))(s=>vO(e,(e,n)=>s(t(e,n)),i,!1,n))):ba(n?.concurrency,()=>vj(fY)(n=>i?vE(e,1,(e,s)=>n(t(e,s)),!0):c0(e,(e,s)=>n(t(e,s)))),()=>vj(fZ)(n=>vk(e,(e,s)=>n(t(e,s)),i)),n=>vj(f0(n))(s=>vE(e,n,(e,n)=>s(t(e,n)),i)))}))),vk=(e,t,n)=>ur(()=>{let s=sK(e),i=Array(s.length);return uv(vO(s,(e,n)=>cG(t(e,n),e=>ua(()=>i[n]=e)),n,!1),ui(i))}),vO=(e,t,n,s,i)=>up(r=>ul(a=>ck(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return um;let u=0,p=!1,m=i?Math.min(l.length,i):l.length,h=new Set,d=[],f=()=>h.forEach(e=>{e._scheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],b=[],x=[],y=()=>{let e=d.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(pT),e},v=(e,t=!1)=>{let n=uu(a(e)),s=vR(n,o,o._runtimeFlags,bQ);return o._scheduler.scheduleTask(()=>{t&&s.unsafeInterruptAsFork(o.id()),s.resume(n)},0),s},_=()=>{s||(c-=l.length,l=[]),p=!0,f()},S=n?cW:cP,w=v(cN(e=>{let s=(e,t)=>{"Blocked"===e._op?x.push(e):(d.push({index:t,exit:e}),"Failure"!==e._op||p||_())},a=()=>{if(l.length>0){let m=l.pop(),f=u++,_=()=>{let e=l.pop();return f=u++,cG(ub(),()=>cG(S(r(t(e,f))),w))},w=e=>l.length>0&&(s(e,f),l.length>0)?_():ui(e),k=v(cG(S(r(t(m,f))),w));g.push(k),h.add(k),p&&k._scheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let r;r="Failure"===t._op?t:t.effect_instruction_i0,b.push(k),h.delete(k),s(r,f),d.length===c?e(ui(sO(py(y(),{parallel:!0}),()=>pT))):x.length+d.length===c?e(ui(cg(x.map(e=>e.effect_instruction_i0).reduce(gV),vO([sO(py(y(),{parallel:!0}),()=>pT),...x.map(e=>e.effect_instruction_i1)],e=>e,n,!0,i)))):a()})}};for(let e=0;e<m;e++)a()}));return cI(c7(cY(r(b2(w))),pO({onFailure:()=>{_();let e=x.length+1,t=Math.min("number"==typeof i?i:x.length,x.length),n=Array.from(x);return cN(s=>{let i=[],r=0,a=0,o=(t,a)=>o=>{i[t]=o,++r===e&&s(sF(py(i,{parallel:!0}))),n.length>0&&a&&l()},l=()=>{v(n.pop(),!0).addObserver(o(a,!0)),a++};w.addObserver(o(a,!1)),a++;for(let e=0;e<t;e++)l()})},onSuccess:()=>c0(b,e=>e.inheritAll)})))}))),vE=(e,t,n,s)=>ur(()=>{let i=sK(e),r=Array(i.length);return uv(vO(i,(e,t)=>c4(n(e,t),e=>r[t]=e),s,!1,t),ui(r))}),vI=e=>vF(e,bQ),vT=(e,t,n,s=null)=>{let i=vN(e,t,n,s);return i.resume(e),i},vR=(e,t,n,s=null)=>vN(e,t,n,s),vN=(e,t,n,s=null)=>{let i=aF(),r=f4(t.getFiberRefs(),i),a=new vp(i,r,n),o=f9(r,uK),l=a._supervisor;return l.onStart(o,e,e5(t),a),a.addObserver(e=>l.onEnd(e,a)),(null!==s?s:w(t.getFiberRef(u2),sO(()=>t.scope()))).add(n,a),a},vF=(e,t)=>ck((n,s)=>ui(vT(e,n,s.runtimeFlags,t))),vM=(e=>j(e[2]),e=>pq(t=>sk(to(t,v$),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return cG(ps(t,fZ),t=>vJ(e,t))}}}))),vA=e=>t=>pq(n=>sk(to(n,v$),{onNone:()=>t,onSome:n=>"ParallelN"===n.strategy._tag&&n.strategy.parallelism===e?t:cG(ps(n,f0(e)),e=>vJ(t,e))})),vj=e=>t=>pq(n=>sk(to(n,v$),{onNone:()=>t(x),onSome:n=>{let s="Parallel"===e._tag?vM:"Sequential"===e._tag?vL:vA(e.parallelism);switch(n.strategy._tag){case"Parallel":return s(t(vM));case"Sequential":return s(t(vL));case"ParallelN":return s(t(vA(n.strategy.parallelism)))}}})),vC=e=>cG(v$,e),vL=e=>pq(t=>sk(to(t,v$),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return cG(ps(t,fY),t=>vJ(e,t))}}})),vU=(e=>cw(e[1]),b(e=>cw(e[1]),(e,t,n,s)=>c4(vS([e,t],{concurrency:s?.concurrent?2:1,batching:s?.batching}),([e,t])=>n(e,t)))),v$=tc("effect/Scope"),vD=v$,vP=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},vz={[u7]:u7,[u9]:u9,pipe(){return eI(this,arguments)},fork(e){return ua(()=>{let t=vB(e);if("Closed"===this.state._tag)return t.state=this.state,t;let n=e=>t.close(e);return this.state.finalizers.add(n),vP(t,e=>ua(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(n)})),t})},close(e){return ur(()=>{if("Closed"===this.state._tag)return um;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?um:fQ(this.strategy)?w(c0(t,t=>cP(t(e))),cG(e=>w(py(e),sM(px),sO(()=>pT)))):fX(this.strategy)?w(vk(t,t=>cP(t(e)),!1),cG(e=>w(py(e,{parallel:!0}),sM(px),sO(()=>pT)))):w(vE(t,this.strategy.parallelism,t=>cP(t(e)),!1),cG(e=>w(py(e,{parallel:!0}),sM(px),sO(()=>pT))))})},addFinalizer(e){return ur(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),um))}},vB=(e=fY)=>{let t=Object.create(vz);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},vq=(e=fY)=>ua(()=>vB(e)),vJ=b(2,(e,t)=>pV(e,tl(ti(v$,t)))),vK=b(2,(e,t)=>cI(vb(cG(uN(e),n=>cE(uM(e,t),n)),t=>uM(e,t)))),vV=b(2,(e,t)=>uF(e,n=>vK(e,t(n)))),vG=uJ(lc,{differ:ld,fork:ld.empty}),vH=uJ(yY,{differ:y6,fork:y1}),vW=b(3,(e,t,n)=>vY(e,t,{onSelfWin:(e,t)=>cG(e.await,s=>{switch(s._tag){case ej:return cG(e.inheritAll,()=>n.onSelfDone(s,t));case eN:return n.onSelfDone(s,t)}}),onOtherWin:(e,t)=>cG(e.await,s=>{switch(s._tag){case ej:return cG(e.inheritAll,()=>n.onOtherDone(s,t));case eN:return n.onOtherDone(s,t)}})})),vY=((e,t)=>cV(n=>vW(e,t,{onSelfDone:(e,t)=>pE(e,{onFailure:e=>w(b2(t),bO(t=>lR(e,t))),onSuccess:e=>w(t,uw(n),cE(e))}),onOtherDone:(e,t)=>pE(e,{onFailure:e=>w(b2(t),bO(t=>lR(t,e))),onSuccess:e=>w(t,uw(n),cE(e))})})),b(3,(e,t,n)=>ck((s,i)=>{let r=i.runtimeFlags,a=ar(!0),o=vN(e,s,r,n.selfScope),l=vN(t,s,r,n.otherScope);return cN(s=>{o.addObserver(()=>vQ(o,l,n.onSelfWin,a,s)),l.addObserver(()=>vQ(l,o,n.onOtherWin,a,s)),o.startFork(e),l.startFork(t)},a_(o.id(),l.id()))}))),vQ=(e,t,n,s,i)=>{aa(!0,!1)(s)&&i(n(e,t))},vX=b(2,(e,t)=>up(n=>cX(n(e),{onFailure:e=>cX(t,{onFailure:t=>cq(lN(e,t)),onSuccess:()=>cq(e)}),onSuccess:e=>cE(t,e)}))),vZ=(e,t,n)=>cV(s=>cG(cG(vI(c3(e)),e=>cN(s=>{let i=t.map(e=>e.listeners.count),r=()=>{i.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&pd(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&lj(e.result.state.current.effect.cause)))&&(a.forEach(e=>e()),n?.(),s(uS(e)))};e.addObserver(e=>{a.forEach(e=>e()),s(e)});let a=t.map((e,t)=>{let n=e=>{i[t]=e,r()};return e.listeners.addObserver(n),()=>e.listeners.removeObserver(n)});return r(),ua(()=>{a.forEach(e=>e())})})),()=>ur(()=>c1(t.flatMap(e=>e.state.completed?[]:[e]),e=>yD(e.request,pw(s))))));class v0{s;stripped;index;length;constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!v1(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&v2(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new v0(this.s,this.stripped)}get done(){return this.index>=this.length}}let v1=e=>{let t=e.charCodeAt(0);return 13===t||10===t},v2=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),v3=((e,t)=>v5(e.minutes,t.minutes)&&v5(e.hours,t.hours)&&v5(e.days,t.days)&&v5(e.months,t.months)&&v5(e.weekdays,t.weekdays),s_(sx)),v5=(e,t)=>v3(sK(e),sK(t)),v4=Symbol.for("effect/ScheduleInterval"),v6={[v4]:v4,startMillis:0,endMillis:0},v8=(e,t)=>e>t?v6:{[v4]:v4,startMillis:e,endMillis:t},v7=b(2,(e,t)=>v9(e,t)===e),v9=b(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),_e=b(2,(e,t)=>v8(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),_t=e=>e.startMillis>=e.endMillis,_n=e=>ma(e.endMillis-e.startMillis),_s=e=>v8(e,Number.POSITIVE_INFINITY),_i=Symbol.for("effect/ScheduleIntervals"),_r=e=>({[_i]:_i,intervals:e}),_a=b(2,(e,t)=>rs(t.intervals)?rs(e.intervals)?rr(e.intervals).startMillis<rr(t.intervals).startMillis?_o(ra(e.intervals),t.intervals,rr(e.intervals),iQ()):_o(e.intervals,ra(t.intervals),rr(t.intervals),iQ()):t:e),_o=(e,t,n,s)=>{let i=e,r=t,a=n,o=s;for(;rs(i)||rs(r);)if(!rs(i)&&rs(r))a.endMillis<rr(r).startMillis?(o=w(o,i9(a)),a=rr(r)):a=v8(a.startMillis,rr(r).endMillis),r=ra(r),i=iQ();else if(rs(i)&&rn(r))a.endMillis<rr(i).startMillis?(o=w(o,i9(a)),a=rr(i)):a=v8(a.startMillis,rr(i).endMillis),r=iQ(),i=ra(i);else if(rs(i)&&rs(r))rr(i).startMillis<rr(r).startMillis?(a.endMillis<rr(i).startMillis?(o=w(o,i9(a)),a=rr(i)):a=v8(a.startMillis,rr(i).endMillis),i=ra(i)):(a.endMillis<rr(r).startMillis?(o=w(o,i9(a)),a=rr(r)):a=v8(a.startMillis,rr(r).endMillis),r=ra(r));else throw Error(W("Intervals.unionLoop"));return _r(w(o,i9(a),i3))},_l=b(2,(e,t)=>_c(e.intervals,t.intervals,iQ())),_c=(e,t,n)=>{let s=e,i=t,r=n;for(;rs(s)&&rs(i);){let e=w(rr(s),_e(rr(i))),t=_t(e)?r:w(r,i9(e));w(rr(s),v7(rr(i)))?s=ra(s):i=ra(i),r=t}return _r(i3(r))},_u=e=>w(e.intervals,ri,sO(()=>v6)).startMillis,_p=b(2,(e,t)=>_u(e)<_u(t)),_m=b(2,(e,t)=>_p(e,t)?t:e),_h=e=>w(e.intervals,ri,sO(()=>v6)).endMillis,_d=e=>rs(e.intervals),_f="Continue",_g="Done",_b=e=>({_tag:_f,intervals:e}),_x=e=>({_tag:_f,intervals:_r(iZ(e))}),_y={_tag:_g},_v=e=>e._tag===_f,__=e=>e._tag===_g,_S=Symbol.for("effect/Schedule"),_w=e=>z(e,_S),_k=Symbol.for("effect/ScheduleDriver"),_O={_Out:e=>e,_In:e=>e,_R:e=>e},_E={_Out:e=>e,_In:e=>e,_R:e=>e};class _I{initial;step;[_S]=_O;constructor(e,t){this.initial=e,this.step=t}pipe(){return eI(this,arguments)}}class _T{schedule;ref;[_k]=_E;constructor(e,t){this.schedule=e,this.ref=t}get state(){return c4(gU(this.ref),e=>e[1])}get last(){return cG(gU(this.ref),([e,t])=>{switch(e._tag){case"None":return cB(()=>new pp);case"Some":return ui(e.value)}})}get reset(){return g$(this.ref,[sw(),this.schedule.initial])}next(e){return w(c4(gU(this.ref),e=>e[1]),cG(t=>w(fV,cG(n=>w(ur(()=>this.schedule.step(n,e,t)),cG(([e,t,s])=>{let i=g$(this.ref,[e5(t),e]);if(__(s))return uv(i,cz(sw()));let r=_u(s.intervals)-n;return r<=0?cE(i,t):w(i,uv(bl(ma(r))),cE(t))}))))))}}let _R=(e,t)=>new _I(e,t),_N=b(2,(e,t)=>_F(e,e=>ua(()=>t(e)))),_F=b(2,(e,t)=>_q(e,(e,n)=>c4(t(e),e=>mv(n,p6(e))))),_M=((e,t)=>_R([e.initial,t.initial,!0],(n,s,i)=>i[2]?cG(e.step(n,s,i[0]),([e,r,a])=>__(a)?c4(t.step(n,s,i[1]),([t,n,s])=>[[e,t,!1],t_(n),s]):ui([[e,i[1],!0],tv(r),a])):c4(t.step(n,s,i[1]),([e,t,n])=>[[i[0],e,!1],t_(t),n])),b(2,(e,t)=>_A(e,(e,n)=>ua(()=>t(e,n))))),_A=b(2,(e,t)=>_R(e.initial,(n,s,i)=>cG(e.step(n,s,i),([e,n,i])=>__(i)?ui([e,n,_y]):c4(t(s,n),t=>t?[e,n,i]:[e,n,_y])))),_j=b(2,(e,t)=>_R([e.initial,t.initial],(n,s,i)=>cG(e.step(n,s,i[0]),([e,s,r])=>c4(t.step(n,s,i[1]),([t,n,s])=>__(r)?[[e,t],n,_y]:__(s)?[[e,t],n,_y]:[[e,t],n,_b(w(r.intervals,_m(s.intervals)))])))),_C=((e,t)=>_C(e,e=>ua(()=>t(e))),b(2,(e,t)=>_R(e.initial,(n,s,i)=>cG(t(s),t=>e.step(n,t,i))))),_L=((e,t)=>_q(e,(e,n)=>t(n)),e=>_N(e,e=>e)),_U=e=>w(gL([sw(),e.initial]),c4(t=>new _T(e,t))),_$=b(2,(e,t)=>_D(e,t,_l)),_D=b(3,(e,t,n)=>_R([e.initial,t.initial],(s,i,r)=>w(u_(e.step(s,i,r[0]),t.step(s,i,r[1]),(e,t)=>[e,t]),cG(([[s,r,a],[o,l,c]])=>_v(a)&&_v(c)?_P(e,t,i,s,r,a.intervals,o,l,c.intervals,n):ui([[s,o],[r,l],_y]))))),_P=(e,t,n,s,i,r,a,o,l,c)=>{let u=c(r,l);return _d(u)?ui([[s,a],[i,o],_b(u)]):w(r,_p(l))?cG(e.step(_h(r),n,s),([s,i,r])=>__(r)?ui([[s,a],[i,o],_y]):_P(e,t,n,s,i,r.intervals,a,o,l,c)):cG(t.step(_h(l),n,a),([a,o,l])=>__(l)?ui([[s,a],[i,o],_y]):_P(e,t,n,s,i,r,a,o,l.intervals,c))},_z=b(2,(e,t)=>_B(e,e=>ua(()=>t(e)))),_B=b(2,(e,t)=>_R(e.initial,(n,s,i)=>cG(e.step(n,s,i),([e,n,s])=>c4(t(n),t=>[e,t,s])))),_q=b(2,(e,t)=>_R(e.initial,(n,s,i)=>cG(e.step(n,s,i),([e,s,i])=>{if(__(i))return ui([e,s,i]);let r=i.intervals;return c4(t(s,_n(v8(n,_u(r)))),t=>{let i=p6(t),a=_u(r),o=n+mm(i),l=o-a;return[e,s,_x(v8(o,Math.max(0,_h(r)+l)))]})}))),_J=e=>_W(Se,t=>t<e),_K=((e,t,n)=>_R([e.initial,t],(t,s,[i,r])=>cG(e.step(t,s,i),([e,t,s])=>__(s)?ui([[e,r],r,s]):c4(n(r,t),t=>[[e,t],r,s]))),b(2,(e,t)=>_V(e,t,_a))),_V=b(3,(e,t,n)=>_R([e.initial,t.initial],(s,i,r)=>u_(e.step(s,i,r[0]),t.step(s,i,r[1]),([e,t,s],[i,r,a])=>{if(__(s)&&__(a))return[[e,i],[t,r],_y];if(__(s)&&_v(a))return[[e,i],[t,r],_b(a.intervals)];if(_v(s)&&__(a))return[[e,i],[t,r],_b(s.intervals)];if(_v(s)&&_v(a))return[[e,i],[t,r],_b(n(s.intervals,a.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")}))),_G=b(2,(e,t)=>_A(e,(e,n)=>bE(t(e)))),_H=b(2,(e,t)=>_A(e,(e,n)=>t(e))),_W=b(2,(e,t)=>_M(e,(e,n)=>t(n))),_Y=((e,t)=>_z(_$(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class _Q{error;[_Y];constructor(e){this.error=e,this[_Y]=_Y}}let _X=e=>z(e,_Y),_Z=e=>cM(e,e=>cU(new _Q(e))),_0=e=>cF(e,e=>sk(lW(e,e=>lM(e)&&_X(e.defect)?e5(e.defect):sw()),{onNone:()=>cq(e),onSome:e=>cz(e.error)})),_1=((e,t)=>_1(e,t,(e,t)=>cz(e)),b(3,(e,t,n)=>cG(_U(t),t=>cZ(e,{onFailure:e=>n(e,sw()),onSuccess:s=>_2(e,t,n,s)})))),_2=(e,t,n,s)=>cZ(t.next(s),{onFailure:()=>ut(t.last),onSuccess:s=>cZ(e,{onFailure:e=>n(e,e5(s)),onSuccess:s=>_2(e,t,n,s)})}),_3=b(2,(e,t)=>_4(e,t,(e,t)=>cz(e))),_5=b(2,(e,t)=>{if(_w(t))return _3(e,t);let n=t.schedule??Se,s=t.while?_H(n,e=>{let n=t.while(e);return"boolean"==typeof n?ui(n):_Z(n)}):n,i=t.until?_G(s,e=>{let n=t.until(e);return"boolean"==typeof n?ui(n):_Z(n)}):s;return _0(_3(e,t.times?_$(i,_J(t.times)):i))}),_4=b(3,(e,t,n)=>cG(_U(t),t=>_6(e,t,n))),_6=(e,t,n)=>cM(e,s=>cZ(t.next(s),{onFailure:()=>w(t.last,ut,cG(e=>n(s,e))),onSuccess:()=>_6(e,t,n)})),_8=((e,t)=>_8(e,void 0,t),b(3,(e,t,n)=>cG(_U(n),n=>_7(e,t,n)))),_7=(e,t,n)=>cZ(n.next(t),{onFailure:()=>ut(n.last),onSuccess:()=>cG(e,t=>_7(e,t,n))}),_9=_R(sw(),(e,t,n)=>{switch(n._tag){case"None":return ui([e5(e),mn,_x(_s(e))]);case"Some":return ui([e5(n.value),ma(e-n.value),_x(_s(e))])}}),Se=(c=e=>e+1,_R(0,(e,t,n)=>ua(()=>[c(n),n,_x(_s(e))])));class St{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>cN(t=>{if(this.free<e){let n=()=>{this.free<e||(this.waiters.delete(n),this.taken+=e,t(ui(e)))};return this.waiters.add(n),ua(()=>{this.waiters.delete(n)})}return this.taken+=e,t(ui(e))});updateTaken=e=>ck(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(gK).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(uV)),ui(this.free)));release=e=>this.updateTaken(t=>t-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>t=>up(n=>cG(n(this.take(e)),e=>vX(n(t),this.release(e))))}let Sn=e=>new St(e),Ss=((e,t)=>{let n=p6(t);return cG(pB(),t=>c4(Sp(sw()),s=>[pJ(Si(e,n,s),t),Sr(s)]))},(e,t,n)=>{let s=mm(p6(t));return w(pM(),uo(t=>c5(e,t)),c4(e=>e5([n+s,e])))}),Si=(e,t,n)=>up(s=>w(fK(e=>e.currentTimeMillis),cG(s=>Sh(n,n=>{switch(n._tag){case"None":return e5(Ss(e,t,s));case"Some":{let[i]=n.value;return i-s<=0?e5(Ss(e,t,s)):sw()}}})),cG(e=>e1(e)?c$("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):s(pj(e.value[1]))))),Sr=e=>g$(e,sw()),Sa=((e,t)=>cG(yH,n=>w(Sa(e,n),vX(cG(n.value,t)))),b(2,(e,t)=>uD(vH,e=>e.zip(t))(e))),So=((e,{duration:t,onTimeout:n})=>cY(So(e,{onTimeout:()=>cB(n),onSuccess:ui,duration:t})),b(2,(e,{duration:t,onSuccess:n,onTimeout:s})=>cV(i=>vY(e,c3(bl(t)),{onSelfWin:(e,t)=>cG(e.await,s=>"Success"===s._tag?cG(e.inheritAll,()=>cE(uw(t,i),n(s.value))):cG(uw(t,i),()=>p_(s.cause))),onOtherWin:(e,t)=>cG(e.await,n=>"Success"===n._tag?cG(e.inheritAll,()=>cE(uw(t,i),s())):cG(uw(t,i),()=>p_(n.cause))),otherScope:bQ})))),Sl=Symbol.for("effect/Ref/SynchronizedRef"),Sc={_A:e=>e};class Su{ref;withLock;[Sl]=Sc;[gM]=gA;[gF];constructor(e,t){this.ref=e,this.withLock=t,this[gF]=gF,this.get=gU(this.ref)}get;modify(e){return this.modifyEffect(t=>ui(e(t)))}modifyEffect(e){return this.withLock(w(cG(gU(this.ref),e),cG(([e,t])=>cE(g$(this.ref,t),e))))}pipe(){return eI(this,arguments)}}let Sp=e=>ua(()=>Sm(e)),Sm=e=>new Su(gC(e),Sn(1).withPermits(1)),Sh=b(2,(e,t)=>e.modifyEffect(e=>{let n=t(e);switch(n._tag){case"None":return ui([e,e]);case"Some":return c4(n.value,e=>[e,e])}})),Sd=((e,t,n)=>({[bX]:bZ,id:()=>w(e.id(),aS(t.id())),await:w(e.await,cY,vU(cY(t.await),n,{concurrent:!0}),cP),children:e.children,inheritAll:uv(t.inheritAll,e.inheritAll),poll:u_(e.poll,t.poll,(e,t)=>w(e,sA(e=>w(t,sM(t=>pR(e,t,{onSuccess:n,onFailure:lR})))))),interruptAsFork:n=>uv(e.interruptAsFork(n),t.interruptAsFork(n)),pipe(){return eI(this,arguments)}}),e=>(t,n)=>{let s=aF(),i=[[uK,[[s,e.context]]]];n?.scheduler&&i.push([gK,[[s,n.scheduler]]]);let r=gn(e.fiberRefs,{entries:i,forkAs:s});n?.updateRefs&&(r=n.updateRefs(r,s));let a=new vp(s,r,e.runtimeFlags),o=t;n?.scope&&(o=cG(ps(n.scope,fY),e=>uv(pe(e,cV(e=>ex(e,a.id())?um:uw(a,e))),c7(t,t=>pn(e,t)))));let l=a._supervisor;return l!==yY&&(l.onStart(e.context,o,sw(),a),a.addObserver(e=>l.onEnd(e,a))),bQ.add(e.runtimeFlags,a),n?.immediate===!1?a.resume(o):a.start(o),a});class Sf extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}}let Sg=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let n=new Sf(e);return Error.stackTraceLimit=t,n},Sb=Symbol.for("effect/Runtime/FiberFailure"),Sx=Symbol.for("effect/Runtime/FiberFailure/Cause");class Sy extends Error{[Sb];[Sx];constructor(e){super(),this[Sb]=Sb,this[Sx]=e;let t=ce(e);if(t.length>0){let e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,(void 0===this.message||0===this.message.length)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[Sx].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[eS](){return this.toString()}}let Sv=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let n=new Sy(e);return Error.stackTraceLimit=t,n},S_=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return pv(e.left);case"Right":return pI(e.right);case"Some":return pI(e.value);case"None":return pv(pp())}},SS=e=>t=>{let n=S_(t);if(n)return n;let s=new gJ,i=Sd(e)(t,{scheduler:s});s.flush();let r=i.unsafePoll();if(r)return r;throw Sg(i)},Sw=e=>(t,n)=>new Promise(s=>{let i=S_(t);i&&s(i);let r=Sd(e)(t);r.addObserver(e=>{s(e)}),n?.signal!==void 0&&(n.signal.aborted?r.unsafeInterruptAsFork(r.id()):n.signal.addEventListener("abort",()=>{r.unsafeInterruptAsFork(r.id())},{once:!0}))});class Sk{context;runtimeFlags;fiberRefs;constructor(e,t,n){this.context=e,this.runtimeFlags=t,this.fiberRefs=n}pipe(){return eI(this,arguments)}}let SO=ll(1,32,4),SE=new Sk((u={context:tp(),runtimeFlags:SO,fiberRefs:new f2(new Map)}).context,u.runtimeFlags,u.fiberRefs),SI=(e,t)=>Sw(SE)(e,t).then(e=>{switch(e._tag){case ej:return e.effect_instruction_i0;case eN:throw Sv(e.effect_instruction_i0)}}),ST=e=>{let t=SS(SE)(e);if("Failure"!==t._tag)return t.effect_instruction_i0;throw Sv(t.effect_instruction_i0)},SR=b(2,(e,t)=>e.modifyEffect(t)),SN=Symbol.for("effect/Layer"),SF={[SN]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eI(this,arguments)}},SM=Symbol.for("effect/Layer/MemoMap"),SA=e=>z(e,SN),Sj=e=>"Fresh"===e._tag;class SC{ref;[SM];constructor(e){this.ref=e,this[SM]=SM}getOrElseMemoize(e,t){return w(SR(this.ref,n=>{let s=n.get(e);if(void 0!==s){let[e,i]=s;return ui([w(e,cG(([e,t])=>w(bI(e),cE(t))),c7(pO({onFailure:()=>um,onSuccess:()=>pt(t,i)}))),n])}return w(gL(0),cG(s=>w(pM(),cG(i=>w(gL(()=>um),c4(r=>{let a=up(a=>w(vq(),cG(o=>w(a(cG(S$(e,o,!0),e=>bx(e(this)))),cP,cG(a=>{switch(a._tag){case eN:return w(pU(i,a.effect_instruction_i0),uv(pn(o,a)),uv(cq(a.effect_instruction_i0)));case ej:return w(g$(r,e=>w(pn(o,e),ud(gD(s,e=>[1===e,e-1])),cI)),uv(gP(s,e=>e+1)),uv(pt(t,t=>w(ua(()=>n.delete(e)),uv(gU(r)),cG(e=>e(t))))),uv(p$(i,a.effect_instruction_i0)),cE(a.effect_instruction_i0[1]))}}))))),o=[w(pj(i),c7(pE({onFailure:()=>um,onSuccess:()=>gP(s,e=>e+1)}))),e=>w(gU(r),cG(t=>t(e)))];return[a,Sj(e)?n:n.set(e,o)]}))))))}),cY)}}let SL=ur(()=>c4(Sp(new Map),e=>new SC(e))),SU=b(2,(e,t)=>cG(SL,n=>cG(S$(e,t),e=>e(n)))),S$=(e,t,n=!1)=>{switch(e._tag){case"Locally":return ua(()=>n=>e.f(n.getOrElseMemoize(e.self,t)));case"ExtendScope":return ua(()=>t=>vC(n=>t.getOrElseMemoize(e.layer,n)));case"Fold":return ua(()=>n=>w(n.getOrElseMemoize(e.layer,t),cX({onFailure:s=>n.getOrElseMemoize(e.failureK(s),t),onSuccess:s=>n.getOrElseMemoize(e.successK(s),t)})));case"Fresh":return ua(()=>n=>w(e.layer,SU(t)));case"FromEffect":return n?ua(()=>t=>e.effect):ua(()=>n=>n.getOrElseMemoize(e,t));case"Provide":return ua(()=>n=>w(n.getOrElseMemoize(e.first,t),cG(s=>w(n.getOrElseMemoize(e.second,t),pJ(s)))));case"Scoped":return n?ua(()=>n=>vJ(e.effect,t)):ua(()=>n=>n.getOrElseMemoize(e,t));case"Suspend":return ua(()=>n=>n.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return ua(()=>n=>w(n.getOrElseMemoize(e.first,t),u_(n.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return ua(()=>n=>w(n.getOrElseMemoize(e.first,t),vU(n.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},SD=e=>SP(lE(e)),SP=e=>Sq(cq(e)),Sz=b(2,(e,t)=>SK(e,{onFailure:SD,onSuccess:t})),SB=b(2,(e,t)=>{let n=tu(e),s=n?e:t;return Sq(c4(n?t:e,e=>ti(s,e)))});function Sq(e){let t=Object.create(SF);return t._tag="FromEffect",t.effect=e,t}let SJ=b(2,(e,{onFailure:t,onSuccess:n})=>{let s=Object.create(SF);return s._tag="Fold",s.layer=e,s.failureK=t,s.successK=n,s}),SK=b(2,(e,{onFailure:t,onSuccess:n})=>SJ(e,{onFailure:e=>{let n=lP(e);switch(n._tag){case"Left":return t(n.left);case"Right":return SP(n.right)}},onSuccess:n})),SV=b(2,(e,t)=>{let n=tu(e),s=n?e:t;return SH(c4(n?t:e,e=>ti(s,e)))}),SG=e=>SH(w(e,cE(tp()))),SH=e=>{let t=Object.create(SF);return t._tag="Scoped",t.effect=e,t},SW=b(2,(e,t)=>cO(vq(),n=>cG(SU(t,n),t=>pK(e,t)),(e,t)=>pn(e,t))),SY=b(2,(e,t)=>{let n=gl(SE.fiberRefs,t.fiberRefs),s=lm(SE.runtimeFlags,t.runtimeFlags);return up(i=>ck(r=>{let a=r.getFiberRef(uK),o=r.getFiberRefs(),l=gu(r.id(),o)(n),c=r._runtimeFlags,u=lh(s)(c),p=gl(l,o),m=lm(u,c);return r.setFiberRefs(l),r._runtimeFlags=u,vX(pK(i(e),tl(a,t.context)),ck(e=>(e.setFiberRefs(gu(e.id(),e.getFiberRefs())(p)),e._runtimeFlags=lh(m)(e._runtimeFlags),um)))}))}),SQ=b(2,(e,t)=>SA(t)?SW(e,t):tn(t)?pK(e,t):SY(e,t)),SX=Symbol.for("effect/MutableList"),SZ={[SX]:SX,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let n=t.value;return t=t.next,{done:e,value:n}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},S0=e=>({value:e,removed:!1,prev:void 0,next:void 0}),S1=()=>{let e=Object.create(SZ);return e.head=void 0,e.tail=void 0,e._length=0,e},S2=e=>0===S3(e),S3=e=>e._length,S5=b(2,(e,t)=>{let n=S0(t);return void 0===e.head&&(e.head=n),void 0===e.tail||(e.tail.next=n,n.prev=e.tail),e.tail=n,e._length+=1,e}),S4=e=>{let t=e.head;if(void 0!==t)return S6(e,t),t.value},S6=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},S8=Symbol.for("effect/MutableQueue"),S7=Symbol.for("effect/mutable/MutableQueue/Empty"),S9={[S8]:S8,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return ek(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(ew)}},[eS](){return this.toJSON()},pipe(){return eI(this,arguments)}},we=e=>{let t=Object.create(S9);return t.queue=S1(),t.capacity=e,t},wt=()=>we(void 0),wn=b(2,(e,t)=>{let n=S3(e.queue);return(void 0===e.capacity||n!==e.capacity)&&(S5(t)(e.queue),!0)}),ws=b(2,(e,t)=>S2(e.queue)?t:S4(e.queue)),wi=(e,t,n,s)=>a2({_tag:"Complete",key:e,exit:t,entryStats:n,timeToLiveMillis:s}),wr=(e,t)=>a2({_tag:"Pending",key:e,deferred:t}),wa=(e,t)=>a2({_tag:"Refreshing",deferred:e,complete:t}),wo=Symbol.for("effect/Cache/MapKey");class wl{current;[wo]=wo;previous=void 0;next=void 0;constructor(e){this.current=e}[er](){return w(ea(this.current),el(ea(this.previous)),el(ea(this.next)),eg(this))}[eb](e){return this===e||wu(e)&&ex(this.current,e.current)&&ex(this.previous,e.previous)&&ex(this.next,e.next)}}let wc=e=>new wl(e),wu=e=>z(e,wo);class wp{head=void 0;tail=void 0;add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,n=e.next;void 0!==n&&(e.next=void 0,void 0!==t?(t.next=n,n.previous=t):(this.head=n,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}}let wm=()=>new wp,wh=(e,t,n,s,i,r)=>({map:e,keys:t,accesses:n,updating:s,hits:i,misses:r}),wd=()=>wh(xU(),wm(),wt(),ar(!1),0,0),wf=Symbol.for("effect/Cache"),wg={_Key:e=>e,_Error:e=>e,_Value:e=>e},wb=e=>e,wx=e=>({loadedMillis:e});class wy{capacity;context;fiberId;lookup;timeToLive;[wf]=wg;cacheState;constructor(e,t,n,s,i){this.capacity=e,this.context=t,this.fiberId=n,this.lookup=s,this.timeToLive=i,this.cacheState=wd()}get(e){return c4(this.getEither(e),tw)}get cacheStats(){return ua(()=>wb({hits:this.cacheState.hits,misses:this.cacheState.misses,size:xJ(this.cacheState.map)}))}getOption(e){return ur(()=>sk(x$(this.cacheState.map,e),{onNone:()=>{let t=wc(e);return this.trackAccess(t),this.trackMiss(),ui(sw())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return ur(()=>sk(x$(this.cacheState.map,e),{onNone:()=>{let t=wc(e);return this.trackAccess(t),this.trackMiss(),ui(sw())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return ua(()=>xP(this.cacheState.map,e))}entryStats(e){return ua(()=>{let t=x$(this.cacheState.map,e);if(e2(t))switch(t.value._tag){case"Complete":return e5(wx(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return e5(wx(t.value.complete.entryStats.loadedMillis))}return sw()})}getEither(e){return ur(()=>{let t,n;let s=sR(x$(this.cacheState.map,e));return(void 0===s&&(n=pF(this.fiberId),t=wc(e),xP(this.cacheState.map,e)?s=sR(x$(this.cacheState.map,e)):xz(this.cacheState.map,e,wr(t,n))),void 0===s)?(this.trackAccess(t),this.trackMiss(),c4(this.lookupValueOf(e,n),t_)):cG(this.resolveMapValue(s),sk({onNone:()=>this.getEither(e),onSome:e=>ui(tv(e))}))})}invalidate(e){return ua(()=>{xq(this.cacheState.map,e)})}invalidateWhen(e,t){return ua(()=>{let n=x$(this.cacheState.map,e);e2(n)&&"Complete"===n.value._tag&&"Success"===n.value.exit._tag&&t(n.value.exit.value)&&xq(this.cacheState.map,e)})}get invalidateAll(){return ua(()=>{this.cacheState.map=xU()})}refresh(e){return fK(t=>ur(()=>{let n=pF(this.fiberId),s=sR(x$(this.cacheState.map,e));if(void 0===s&&(xP(this.cacheState.map,e)?s=sR(x$(this.cacheState.map,e)):xz(this.cacheState.map,e,wr(wc(e),n))),void 0===s)return cI(this.lookupValueOf(e,n));switch(s._tag){case"Complete":if(this.hasExpired(t,s.timeToLiveMillis))return ex(sR(x$(this.cacheState.map,e)),s)&&xq(this.cacheState.map,e),cI(this.get(e));return w(this.lookupValueOf(e,n),bj(()=>{if(ex(sR(x$(this.cacheState.map,e)),s)){let t=wa(n,s);return xz(this.cacheState.map,e,t),!0}return!1}),cI);case"Pending":case"Refreshing":return pj(s.deferred)}}))}set(e,t){return fK(n=>ua(()=>{let s=n.unsafeCurrentTimeMillis(),i=pI(t),r=wi(wc(e),i,wx(s),s+mm(p6(this.timeToLive(i))));xz(this.cacheState.map,e,r)}))}get size(){return ua(()=>xJ(this.cacheState.map))}get values(){return ua(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return ua(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return ua(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return fK(n=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(n,e.timeToLiveMillis))return xq(this.cacheState.map,e.key.current),ui(sw());return this.trackHit(),c4(e.exit,e5);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return ui(sw());return c4(pj(e.deferred),e5);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(n,e.complete.timeToLiveMillis)){if(t)return ui(sw());return c4(pj(e.deferred),e5)}return c4(e.complete.exit,e5)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(wn(this.cacheState.accesses,e),aa(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=ws(this.cacheState.accesses,S7);t===S7?e=!1:this.cacheState.keys.add(t)}let t=xJ(this.cacheState.map);for(e=t>this.capacity;e;){let n=this.cacheState.keys.remove();void 0!==n?xP(this.cacheState.map,n.current)&&(xq(this.cacheState.map,n.current),t-=1,e=t>this.capacity):e=!1}al(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return fK(n=>ur(()=>w(this.lookup(e),pJ(this.context),cP,cG(s=>{let i=n.unsafeCurrentTimeMillis(),r=wx(i),a=wi(wc(e),s,r,i+mm(p6(this.timeToLive(s))));return xz(this.cacheState.map,e,a),uv(pL(t,s),s)}),c9(()=>uv(fG(t),ua(()=>{xq(this.cacheState.map,e)}))))))}}let wv=(e,t,n)=>new wy(e,tp(),ax,t,e=>p6(n(e))),w_=(()=>uP(wv(65536,()=>c4(pM(),e=>({listeners:new yP,handle:e})),()=>mo(60))),function(){let e;return e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]),ur(()=>{let t=e(w),n=es(()=>t.next()),s=e=>e.done?ui(e.value):cG(et(e.value),e=>s(es(()=>t.next(e))));return s(n)})}),wS=function(){let e="string"!=typeof arguments[0],t=e?arguments[1]:arguments[0],n=cm(e?arguments[2]:arguments[1]);if(e){let e=arguments[0];return bU(t,n,t=>b$(e,t))}return e=>bU(t,n,t=>b$(e,t))},ww=(e,t=[])=>({value:e,forest:t}),wk=e=>c4(wJ(e),e=>wE(e)),wO=e=>ST(wk(e)),wE=e=>e.value+wI("\n",e.forest),wI=(e,t)=>{let n,s="",i=t.length;for(let r=0;r<i;r++){n=t[r];let a=r===i-1;s+=e+(a?"└":"├")+"─ "+n.value+wI(e+(i>1&&!a?"│  ":"   "),n.forest)}return s},wT=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},wR=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},wN=e=>"ast"in e?e5(e.ast):sw(),wF=e=>wN(e).pipe(sA(hx),cG(t=>{let n=t(e);return R(n)?ui({message:n,override:!1}):cw(n)?c4(n,e=>({message:e,override:!1})):R(n.message)?ui({message:n.message,override:n.override}):c4(n.message,e=>({message:e,override:n.override}))})),wM=e=>t=>t._tag===e,wA=wM("Composite"),wj=wM("Refinement"),wC=wM("Transformation"),wL=e=>wF(e).pipe(cG(t=>!t.override&&(wA(e)||wj(e)&&"From"===e.kind||wC(e)&&"Transformation"!==e.kind)?wC(e)||wj(e)?wL(e.issue):sw():ui(t.message))),wU=e=>wN(e).pipe(sA(hO),sj(t=>sT(t(e)))),w$=e=>wL(e).pipe(ue(()=>wU(e)),cM(()=>ui(e.message??`Expected ${String(e.ast)}, actual ${mW(e.actual)}`))),wD=e=>sO(wU(e),()=>String(e.ast)),wP=e=>e.message??"is forbidden",wz=e=>e.message??"is unexpected",wB=e=>hy(e.ast).pipe(cG(e=>{let t=e();return R(t)?ui(t):t}),cM(()=>ui(e.message??"is missing"))),wq=(e,t)=>cZ(wL(e),{onFailure:t,onSuccess:e=>ui(ww(e))}),wJ=e=>{switch(e._tag){case"Type":return c4(w$(e),ww);case"Forbidden":return ui(ww(wD(e),[ww(wP(e))]));case"Unexpected":return ui(ww(wz(e)));case"Missing":return c4(wB(e),ww);case"Transformation":return wq(e,()=>c4(wJ(e.issue),t=>ww(wD(e),[ww(wT(e.kind),[t])])));case"Refinement":return wq(e,()=>c4(wJ(e.issue),t=>ww(wD(e),[ww(wR(e.kind),[t])])));case"Pointer":return c4(wJ(e.issue),t=>ww(m0(e.path),[t]));case"Composite":{let t=wD(e);return wq(e,()=>mQ(e.issues)?c4(vw(e.issues,wJ),e=>ww(t,e)):c4(wJ(e.issues),e=>ww(t,[e])))}}};class wK{path;actual;issue;_tag="Pointer";constructor(e,t,n){this.path=e,this.actual=t,this.issue=n}}class wV{actual;message;_tag="Unexpected";constructor(e,t){this.actual=e,this.message=t}}class wG{ast;message;_tag="Missing";actual=void 0;constructor(e,t){this.ast=e,this.message=t}}class wH{ast;actual;issues;output;_tag="Composite";constructor(e,t,n,s){this.ast=e,this.actual=t,this.issues=n,this.output=s}}class wW{ast;actual;kind;issue;_tag="Refinement";constructor(e,t,n,s){this.ast=e,this.actual=t,this.kind=n,this.issue=s}}class wY{ast;actual;kind;issue;_tag="Transformation";constructor(e,t,n,s){this.ast=e,this.actual=t,this.kind=n,this.issue=s}}class wQ{ast;actual;message;_tag="Type";constructor(e,t,n){this.ast=e,this.actual=t,this.message=n}}class wX{ast;actual;message;_tag="Forbidden";constructor(e,t,n){this.ast=e,this.actual=t,this.message=n}}let wZ=Symbol.for("@effect/schema/ParseErrorTypeId");class w0 extends pQ("ParseError"){[wZ]=wZ;get message(){return this.toString()}toString(){return wO(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[eS](){return this.toJSON()}}let w1=e=>new w0({issue:e}),w2=t_,w3=tv,w5=tS,w4=b(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):cG(e,t)),w6=b(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t_(t(e.right)):c4(e,t)),w8=b(2,(e,t)=>"Left"===e._tag?tv(t(e.left)):"Right"===e._tag?e:c8(e,t)),w7=e=>{if("Left"===e._tag||"Right"===e._tag)return e},w9=b(2,(e,t)=>"Left"===e._tag?tv(t.onFailure(e.left)):"Right"===e._tag?t_(t.onSuccess(e.right)):c6(e,t)),ke=(e,t)=>void 0===t||N(t)?e:void 0===e?t:{...e,...t},kt=(e,t,n)=>{let s=ku(e,t);return(e,t)=>s(e,ke(n,t))},kn=(e,t,n)=>{let s=kt(e,t,n);return(e,t)=>tk(s(e,t),w1)},ks=(e,t,n)=>{let s=ku(e,t);return(e,t)=>s(e,{...ke(n,t),isEffectAllowed:!0})},ki=(e,t)=>ks(e.ast,!0,t),kr=(e,t)=>ks(e.ast,!1,t),ka=(e,t)=>kn(dL(e.ast),!0,t),ko=(e,t)=>{let n=ku(dL(e.ast),!0);return(e,s)=>ty(n(e,{exact:!0,...ke(t,s)}))},kl=I(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),kc=I(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),ku=(e,t)=>{let n=t?kl:kc,s=n.get(e);if(s)return s;let i=kh(e,t),r=hE(e),a=e2(r)?(e,t)=>i(e,ke(t,r.value)):i;return n.set(e,a),a},kp=e=>sR(hw(e)),km=e=>sR(hk(e)),kh=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=ku(e.from,!0);return(n,s)=>kx(w4(w8(t(n,s),t=>new wW(e,n,"From",t)),t=>sk(e.filter(t,s??dw,e),{onNone:()=>t_(t),onSome:t=>tv(new wW(e,n,"Predicate",t))})),e,n,s)}{let t=ku(dL(e),!0),n=ku(kb(e.from),!1);return(s,i)=>kx(w4(t(s,i),e=>n(e,i)),e,s,i)}case"Transformation":{let n=k_(e.transformation,t),s=t?ku(e.from,!0):ku(e.to,!1),i=t?ku(e.to,!0):ku(e.from,!1);return(r,a)=>kx(w4(w8(s(r,a),n=>new wY(e,r,t?"Encoded":"Type",n)),s=>w4(w8(n(s,a??dw,e),t=>new wY(e,r,"Transformation",t)),n=>w8(i(n,a),n=>new wY(e,r,t?"Type":"Encoded",n)))),e,r,a)}case"Declaration":{let n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,s)=>kx(n(t,s??dw,e),e,t,s)}case"Literal":return kd(e,t=>t===e.literal);case"UniqueSymbol":return kd(e,t=>t===e.symbol);case"UndefinedKeyword":case"VoidKeyword":return kd(e,C);case"NeverKeyword":return kd(e,$);case"UnknownKeyword":case"AnyKeyword":return t_;case"StringKeyword":return kd(e,R);case"NumberKeyword":return kd(e,N);case"BooleanKeyword":return kd(e,F);case"BigIntKeyword":return kd(e,M);case"SymbolKeyword":return kd(e,A);case"ObjectKeyword":return kd(e,P);case"Enums":return kd(e,t=>e.enums.some(([e,n])=>n===t));case"TemplateLiteral":{let t=dM(e);return kd(e,e=>R(e)&&t.test(e))}case"TupleType":{let n=e.elements.map(e=>ku(e.type,t)),s=e.rest.map(e=>ku(e.type,t)),i=e.elements.filter(e=>!e.isOptional);e.rest.length>0&&(i=i.concat(e.rest.slice(1)));let r=i.length,a=e.elements.length>0?e.elements.map((e,t)=>t).join(" | "):"never",o=kp(e),l=km(e);return(t,c)=>{let u;if(!sY(t))return tv(new wQ(e,t));let p=c?.errors==="all",m=[],h=0,d=[],f=t.length;for(let n=f;n<=r-1;n++){let s=new wK(n,t,new wG(i[n-f]));if(!p)return tv(new wH(e,t,s,d));m.push([h++,s])}if(0===e.rest.length)for(let n=e.elements.length;n<=f-1;n++){let s=new wK(n,t,new wV(t[n],`is unexpected, expected: ${a}`));if(!p)return tv(new wH(e,t,s,d));m.push([h++,s])}let g=0;for(;g<n.length;g++)if(f<g+1){if(e.elements[g].isOptional)continue}else{let s=(0,n[g])(t[g],c),i=w7(s);if(i){if(tx(i)){let n=new wK(g,t,i.left);if(!p)return tv(new wH(e,t,n,kv(d)));m.push([h++,n]);continue}d.push([h++,i.right])}else{let n=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cG(cD(s),s=>{if(tx(s)){let o=new wK(i,t,s.left);return p?(r.push([n,o]),um):tv(new wH(e,t,o,kv(a)))}return a.push([n,s.right]),um}))}}if(sX(s)){let[n,...i]=s;for(;g<f-i.length;g++){let s=n(t[g],c),i=w7(s);if(i){if(tx(i)){let n=new wK(g,t,i.left);if(!p)return tv(new wH(e,t,n,kv(d)));m.push([h++,n]);continue}d.push([h++,i.right])}else{let n=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cG(cD(s),s=>{if(!tx(s))return a.push([n,s.right]),um;{let o=new wK(i,t,s.left);return p?(r.push([n,o]),um):tv(new wH(e,t,o,kv(a)))}}))}}for(let n=0;n<i.length;n++)if(!(f<(g+=n)+1)){let s=i[n](t[g],c),r=w7(s);if(r){if(tx(r)){let n=new wK(g,t,r.left);if(!p)return tv(new wH(e,t,n,kv(d)));m.push([h++,n]);continue}d.push([h++,r.right])}else{let n=h++,i=g;u||(u=[]),u.push(({es:r,output:a})=>cG(cD(s),s=>{if(tx(s)){let o=new wK(i,t,s.left);return p?(r.push([n,o]),um):tv(new wH(e,t,o,kv(a)))}return a.push([n,s.right]),um}))}}}let b=({es:n,output:s})=>sS(n)?tv(new wH(e,t,kv(n),kv(s))):t_(kv(s));if(u&&u.length>0){let e=u;return ur(()=>{let t={es:ic(m),output:ic(d)};return cG(vw(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>b(t))})}return b({output:d,es:m})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return kd(e,J);let n=[],s={},i=[];for(let r of e.propertySignatures)n.push([ku(r.type,t),r]),s[r.name]=null,i.push(r.name);let r=e.indexSignatures.map(e=>[ku(e.parameter,t),ku(e.type,t),e.parameter]),a=df.make(e.indexSignatures.map(e=>e.parameter).concat(i.map(e=>A(e)?new hL(e):new hA(e)))),o=ku(a,t),l=kp(e),c=km(e);return(t,u)=>{let p,m;if(!G(t))return tv(new wQ(e,t));let h=u?.errors==="all",d=[],f=0,g=u?.onExcessProperty==="error",b=u?.onExcessProperty==="preserve",x={};if(g||b){for(let n of p=mG(t))if(tx(w7(o(n,u)))){if(g){let s=new wK(n,t,new wV(t[n],`is unexpected, expected: ${String(a)}`));if(!h)return tv(new wH(e,t,s,x));d.push([f++,s]);continue}x[n]=t[n]}}let y=u?.exact===!0;for(let s=0;s<n.length;s++){let i=n[s][1],r=i.name,a=Object.prototype.hasOwnProperty.call(t,r);if(!a){if(i.isOptional)continue;if(y){let n=new wK(r,t,new wG(i));if(!h)return tv(new wH(e,t,n,x));d.push([f++,n]);continue}}let o=(0,n[s][0])(t[r],u),l=w7(o);if(l){if(tx(l)){let n=new wK(r,t,a?l.left:new wG(i));if(!h)return tv(new wH(e,t,n,x));d.push([f++,n]);continue}x[r]=l.right}else{let n=f++;m||(m=[]),m.push(({es:s,output:l})=>cG(cD(o),o=>{if(tx(o)){let c=new wK(r,t,a?o.left:new wG(i));return h?(s.push([n,c]),um):tv(new wH(e,t,c,l))}return l[r]=o.right,um}))}}for(let n=0;n<r.length;n++){let i=r[n],a=i[0],o=i[1];for(let n of mV(t,i[2])){let i=w7(a(n,u));if(i&&ty(i)){let i=o(t[n],u),r=w7(i);if(r){if(tx(r)){let s=new wK(n,t,r.left);if(!h)return tv(new wH(e,t,s,x));d.push([f++,s]);continue}Object.prototype.hasOwnProperty.call(s,n)||(x[n]=r.right)}else{let r=f++,a=n;m||(m=[]),m.push(({es:o,output:l})=>cG(cD(i),i=>{if(!tx(i))return Object.prototype.hasOwnProperty.call(s,n)||(l[n]=i.right),um;{let n=new wK(a,t,i.left);return h?(o.push([r,n]),um):tv(new wH(e,t,n,l))}}))}}}}let v=({es:n,output:s})=>{if(sS(n))return tv(new wH(e,t,kv(n),s));if(u?.propertyOrder==="original"){let e=p||mG(t);for(let t of i)-1===e.indexOf(t)&&e.push(t);let n={};for(let t of e)Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t]);return t_(n)}return t_(s)};if(m&&m.length>0){let e=m;return ur(()=>{let t={es:ic(d),output:Object.assign({},x)};return cG(vw(e,e=>e(t),{concurrency:l,batching:c,discard:!0}),()=>v(t))})}return v({es:d,output:x})}}case"Union":{let n=kg(e.types,t),s=mG(n.keys),i=s.length,r=new Map;for(let n=0;n<e.types.length;n++)r.set(e.types[n],ku(e.types[n],t));let a=kp(e)??1,o=km(e);return(t,l)=>{let c;let u=[],p=0,m=[];if(i>0){if(G(t))for(let e=0;e<i;e++){let i=s[e],r=n.keys[i].buckets;if(Object.prototype.hasOwnProperty.call(t,i)){let e=String(t[i]);if(Object.prototype.hasOwnProperty.call(r,e))m=m.concat(r[e]);else{let e=df.make(n.keys[i].literals);u.push([p++,new wH(new da([new ds(i,e,!1,!0)],[]),t,new wK(i,t,new wQ(e,t[i])))])}}else{let e=df.make(n.keys[i].literals),s=new ds(i,e,!1,!0);u.push([p++,new wH(new da([s],[]),t,new wK(i,t,new wG(s)))])}}else u.push([p++,new wQ(e,t)])}n.otherwise.length>0&&(m=m.concat(n.otherwise));for(let e=0;e<m.length;e++){let n=m[e],s=r.get(n)(t,l),i=c&&0!==c.length?void 0:w7(s);if(i){if(ty(i))return t_(i.right);u.push([p++,i.left])}else{let e=p++;c||(c=[]),c.push(t=>ur(()=>"finalResult"in t?um:cG(cD(s),n=>(ty(n)?t.finalResult=t_(n.right):t.es.push([e,n.left]),um))))}}let h=n=>sS(n)?1===n.length&&"Type"===n[0][1]._tag?tv(n[0][1]):tv(new wH(e,t,kv(n))):tv(new wQ(e,t));if(c&&c.length>0){let e=c;return ur(()=>{let t={es:ic(u)};return cG(vw(e,e=>e(t),{concurrency:a,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:h(t.es))})}return h(u)}}case"Suspend":{let n=mH(()=>ku(dF(e.f(),e.annotations),t));return(e,t)=>n()(e,t)}}},kd=(e,t)=>n=>t(n)?t_(n):tv(new wQ(e,n)),kf=(e,t)=>{switch(e._tag){case"Declaration":{let n=hI(e);if(e2(n))return kf(n.value,t);break}case"TypeLiteral":{let n=[];for(let s=0;s<e.propertySignatures.length;s++){let i=e.propertySignatures[s],r=t?dz(i.type):dL(i.type);hj(r)&&!i.isOptional&&n.push([i.name,r])}return n}case"Refinement":return kf(e.from,t);case"Suspend":return kf(e.f(),t);case"Transformation":return kf(t?e.from:e.to,t)}return[]},kg=(e,t)=>{let n={},s=[];for(let i=0;i<e.length;i++){let r=e[i],a=kf(r,t);if(a.length>0)for(let e=0;e<a.length;e++){let[t,s]=a[e],i=String(s.literal);n[t]=n[t]||{buckets:{},literals:[]};let o=n[t].buckets;if(Object.prototype.hasOwnProperty.call(o,i)){if(e<a.length-1)continue;o[i].push(r),n[t].literals.push(s)}else{o[i]=[r],n[t].literals.push(s);break}}else s.push(r)}return{keys:n,otherwise:s}},kb=e=>dS(e)?kb(e.from):e,kx=(e,t,n,s)=>{let i=w7(e);if(i)return i;if(s?.isEffectAllowed===!0)return e;try{return ST(cD(e))}catch(e){return tv(new wX(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},ky=([e],[t])=>e>t?1:e<t?-1:0;function kv(e){return e.sort(ky).map(e=>e[1])}let k_=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return t_;case"TypeLiteralTransformation":return n=>{let s=t_(n);for(let n of e.propertySignatureTransformations){let[e,i]=t?[n.from,n.to]:[n.to,n.from],r=t?n.decode:n.encode;s=w6(s,t=>{let n=r(Object.prototype.hasOwnProperty.call(t,e)?e5(t[e]):sw());return delete t[e],e2(n)&&(t[i]=n.value),t})}return s}}},kS=Symbol.for("@effect/schema/PrettyHookId"),kw=hb(kS),kk=Symbol.for("@effect/schema/Schema"),kO=e=>class{[kk]=kE;static Type;static Encoded;static [kk]=kE;static ast=e;static annotations(e){return kO(kT(this.ast,e))}static pipe(){return eI(this,arguments)}static toString(){return String(e)}},kE={_A:e=>e,_I:e=>e,_R:e=>e},kI=e=>{if(!e)return{};let t={};for(let n of Object.getOwnPropertySymbols(e))t[n]=e[n];if(void 0!==e.typeId){let n=e.typeId;"object"==typeof n?(t[ht]=n.id,t[n.id]=n.annotation):t[ht]=n}let n=(n,s)=>{void 0!==e[n]&&(t[s]=e[n])};return n("message",hn),n("missingMessage",hs),n("identifier",hi),n("title",hr),n("description",ha),n("examples",ho),n("default",hl),n("documentation",hu),n("jsonSchema",hc),n("arbitrary",mF),n("pretty",kS),n("equivalence",dQ),n("concurrency",hp),n("batching",hm),n("parseIssueTitle",hh),n("parseOptions",hd),t},kT=(e,t)=>dF(e,kI(t)),kR=e=>String(e.ast),kN=e=>kO(dz(e.ast)),kF=e=>kO(dL(e.ast)),kM=(e,t)=>{let n=ki(e,t);return(e,t)=>w8(n(e,t),w1)},kA=e=>z(e,kk)&&P(e[kk]),kj=e=>db(e)?df.make(dg(e,e=>new hA(e))):new hA(e[0]),kC=(e,t=kj(e))=>class extends kO(t){static annotations(e){return kC(this.literals,kT(this.ast,e))}static literals=[...e]};function kL(...e){return sX(e)?kC(e):kJ}let kU=e=>{switch(e._tag){case"Literal":return[String(e.literal)];case"NumberKeyword":case"StringKeyword":return[new AST.TemplateLiteral("",[new AST.TemplateLiteralSpan(e,"")])];case"Union":return array_.flatMap(e.types,kU)}throw Error(errors_.getSchemaUnsupportedLiteralSpanErrorMessage(e))},k$=(e,t,n)=>kO(new hF(e.map(e=>e.ast),(...e)=>t.decode(...e.map(kO)),(...e)=>t.encode(...e.map(kO)),kI(n))),kD=(e,t)=>{let n=()=>(t,n,s)=>e(t)?w2(t):w3(new wQ(s,t));return kO(new hF([],n,n,kI(t)))},kP=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],n=arguments[2];return k$(e,t,n)}let e=arguments[0],t=arguments[1];return kD(e,t)};class kz extends kO(h$){static annotations=super.annotations}class kB extends kO(hP){static annotations=super.annotations}class kq extends kO(hC){static annotations=super.annotations}class kJ extends kO(hB){static annotations=super.annotations}class kK extends kO(hJ){static annotations=super.annotations}class kV extends kO(hV){static annotations=super.annotations}class kG extends kO(h2){static annotations=super.annotations}class kH extends kO(h5){static annotations=super.annotations}class kW extends kO(hH){static annotations=super.annotations}class kY extends kO(hQ){static annotations=super.annotations}class kQ extends kO(h0){static annotations=super.annotations}class kX extends kO(h8){static annotations=super.annotations}let kZ=e=>df.members(e.map(e=>e.ast)),k0=(e,t=kZ(e))=>class extends kO(t){static annotations(e){return k0(this.members,kT(this.ast,e))}static members=[...e]};function k1(...e){return db(e)?k0(e):sX(e)?e[0]:kJ}let k2=e=>k1(e,kq),k3=e=>k1(e,kz),k5=e=>k1(e,kq,kz);class k4{ast;from;[kk];_Token;constructor(e,t){this.ast=e,this.from=t}annotations(e){return new k4(new AST.OptionalType(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...kI(e)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}}let k6=(e,t)=>new dt(e.map(e=>kA(e)?new h9(e.ast,!1):e.ast),t.map(e=>kA(e)?new h7(e.ast):e.ast),!0),k8=(e,t,n=k6(e,t))=>class extends kO(n){static annotations(e){return k8(this.elements,this.rest,kT(this.ast,e))}static elements=[...e];static rest=[...t]},k7=(e,t)=>class extends k8([],[e],t){static annotations(e){return k7(this.value,kT(this.ast,e))}static value=e},k9=e=>k7(e),Oe=e=>e?'"?:"':'":"';class Ot extends h9{isReadonly;defaultValue;_tag="PropertySignatureDeclaration";constructor(e,t,n,s,i){super(e,t,s),this.isReadonly=n,this.defaultValue=i}toString(){let e=Oe(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class On extends h9{isReadonly;fromKey;constructor(e,t,n,s,i){super(e,t,s),this.isReadonly=n,this.fromKey=i}}class Os extends h9{isReadonly;defaultValue;constructor(e,t,n,s,i){super(e,t,s),this.isReadonly=n,this.defaultValue=i}}let Oi=e=>void 0===e?"never":R(e)?JSON.stringify(e):String(e);class Or{from;to;decode;encode;_tag="PropertySignatureTransformation";constructor(e,t,n,s){this.from=e,this.to=t,this.decode=n,this.encode=s}toString(){return`PropertySignature<${Oe(this.to.isOptional)}, ${this.to.type}, ${Oi(this.from.fromKey)}, ${Oe(this.from.isOptional)}, ${this.from.type}>`}}let Oa=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new Ot(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new Or(new On(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new Os(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},Oo=Symbol.for("@effect/schema/PropertySignature");class Ol{ast;[kk];[Oo]=null;_TypeToken;_Key;_EncodedToken;_HasDefault;constructor(e){this.ast=e}pipe(){return eI(this,arguments)}annotations(e){return new Ol(Oa(this.ast,kI(e)))}toString(){return String(this.ast)}}let Oc=e=>new Ol(e);class Ou extends Ol{from;constructor(e,t){super(e),this.from=t}annotations(e){return new Ou(Oa(this.ast,kI(e)),this.from)}}let Op=b(2,(e,t)=>{let n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return Oc(new Ot(n.type,n.isOptional,n.isReadonly,n.annotations,t));case"PropertySignatureTransformation":return Oc(new Or(n.from,new Os(n.to.type,n.to.isOptional,n.to.isReadonly,n.to.annotations,t),n.decode,n.encode))}}),Om=(e,t,n)=>Oc(new Or(new On(e.ast,!0,!0,{},void 0),new Os(t.ast,!1,!0,{},void 0),e=>e5(n.decode(e)),sA(n.encode))),Oh=(e,t,n)=>Oc(new Or(new On(e.ast,!0,!0,{},void 0),new Os(t.ast,!0,!0,{},void 0),n.decode,n.encode)),Od=(e,t)=>{let n=t?.exact,s=t?.default,i=t?.nullable,r=t?.as=="Option",a=t?.onNoneEncoding?sE(t.onNoneEncoding):x;return n?s?i?Op(Om(k2(e),kF(e),{decode:sk({onNone:s,onSome:e=>null===e?s():e}),encode:e5}),s).ast:Op(Om(e,kF(e),{decode:sk({onNone:s,onSome:x}),encode:e5}),s).ast:r?i?Om(k2(e),EK(kF(e)),{decode:sC(U),encode:a}).ast:Om(e,EK(kF(e)),{decode:x,encode:x}).ast:i?Oh(k2(e),kF(e),{decode:sC(U),encode:x}).ast:new Ot(e.ast,!0,!0,{},void 0):s?i?Op(Om(k5(e),kF(e),{decode:sk({onNone:s,onSome:e=>null==e?s():e}),encode:e5}),s).ast:Op(Om(k3(e),kF(e),{decode:sk({onNone:s,onSome:e=>void 0===e?s():e}),encode:e5}),s).ast:r?i?Om(k5(e),EK(kF(e)),{decode:sC(e=>null!=e),encode:a}).ast:Om(k3(e),EK(kF(e)),{decode:sC(L),encode:a}).ast:i?Oh(k5(e),k3(kF(e)),{decode:sC(U),encode:x}).ast:new Ot(k3(e).ast,!0,!0,{},void 0)},Of=b(e=>kA(e[0]),(e,t)=>new Ou(Od(e,t),e)),Og=e=>z(e,Oo),Ob=(e,t)=>{let n=mG(e),s=[];if(n.length>0){let i=[],r=[],a=[];for(let t=0;t<n.length;t++){let o=n[t],l=e[o];if(Og(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,n=e.isOptional,a=e.annotations;i.push(new ds(o,t,n,!0)),r.push(new ds(o,dL(t),n,!0,a)),s.push(new ds(o,t,n,!0,a));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;i.push(new ds(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),r.push(new ds(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),a.push(new dT(t,o,e.decode,e.encode))}}}else i.push(new ds(o,l.ast,!1,!0)),r.push(new ds(o,dL(l.ast),!1,!0)),s.push(new ds(o,l.ast,!1,!0))}if(sX(a)){let e=[],n=[];for(let s of t){let{indexSignatures:t,propertySignatures:a}=dj(s.key.ast,s.value.ast);a.forEach(e=>{i.push(e),r.push(new ds(e.name,dL(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),n.push(new dr(t.parameter,dL(t.type),t.isReadonly))})}return new dk(new da(i,e,{[hr]:"Struct (Encoded side)"}),new da(r,n,{[hr]:"Struct (Type side)"}),new dR(a))}}let i=[];for(let e of t){let{indexSignatures:t,propertySignatures:n}=dj(e.key.ast,e.value.ast);n.forEach(e=>s.push(e)),t.forEach(e=>i.push(e))}return new da(s,i)},Ox=(e,t)=>{for(let n of mG(e)){let s=e[n];if(void 0===t[n]&&Og(s)){let e=s.ast,i="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==i&&(t[n]=i())}}return t},Oy=(e,t,n=Ob(e,t))=>class extends kO(n){static annotations(e){return Oy(this.fields,this.records,kT(this.ast,e))}static fields={...e};static records=[...t];static make=(t,n)=>{let s=Ox(e,{...t});return E4(n)?s:ka(this)(s)}};function Ov(e,...t){return Oy(e,t)}let O_=(e,t,n)=>class extends Oy({},[{key:e,value:t}],n){static annotations(n){return O_(e,t,kT(this.ast,n))}static key=e;static value=t},OS=(e,t)=>O_(e,t),Ow=(e,t,n)=>{if(dc(e)&&dc(t)){let s=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,i=s.findIndex(e=>e.name===t);if(-1===i)s.push(e);else{let{isOptional:r,type:a}=s[i];s[i]=new ds(t,OE(a,e.type,n.concat(t)),r,!0)}}return new da(s,e.indexSignatures.concat(t.indexSignatures))}throw Error(m3(e,t,n))},Ok=(p=[hn,hc],e=>{let t;for(let n of p)Object.prototype.hasOwnProperty.call(e.annotations,n)&&(void 0===t&&(t={}),t[n]=e.annotations[n]);return t}),OO=(e,t)=>t.map(t=>new d_(t,e.filter,Ok(e))),OE=(e,t,n)=>df.make(OT([e],[t],n)),OI=e=>dx(e)?e.types:[e],OT=(e,t,n)=>ig(e,e=>ig(t,t=>{switch(e._tag){case"Union":return OT(e.types,OI(t),n);case"Suspend":return[new dv(()=>OE(e.f(),t,n))];case"Refinement":return OO(e,OT(OI(e.from),OI(t),n));case"TypeLiteral":switch(t._tag){case"Union":return OT([e],t.types,n);case"Suspend":return[new dv(()=>OE(e,t.f(),n))];case"Refinement":return OO(t,OT([e],OI(t.from),n));case"TypeLiteral":return[Ow(e,t,n)];case"Transformation":if(dN(t.transformation))return[new dk(Ow(e,t.from,n),Ow(dL(e),t.to,n),new dR(t.transformation.propertySignatureTransformations))]}break;case"Transformation":if(dN(e.transformation))switch(t._tag){case"TypeLiteral":return[new dk(Ow(e.from,t,n),Ow(e.to,dL(t),n),new dR(e.transformation.propertySignatureTransformations))];case"Transformation":if(dN(t.transformation))return[new dk(Ow(e.from,t.from,n),Ow(e.to,t.to,n),new dR(e.transformation.propertySignatureTransformations.concat(t.transformation.propertySignatureTransformations)))]}}throw Error(m3(e,t,n))})),OR=b(2,(e,t)=>kO(OE(e.ast,t.ast,[]))),ON=e=>kO(new dv(()=>e().ast)),OF=Symbol.for("@effect/schema/refine"),OM=(e,t,n)=>class extends kO(n){static annotations(e){return OM(this.from,this.filter,kT(this.ast,e))}static [OF]=e;static from=e;static filter=t;static make=(e,t)=>E4(t)?e:ka(this)(e)},OA=(e,t,n)=>{if(F(e))return e?sw():e5(new wQ(t,n));if(R(e))return e5(new wQ(t,n,e));if(void 0!==e){if("_tag"in e)return e5(e);let s=new wQ(t,n,e.message);return e5(sX(e.path)?new wK(e.path,n,s):s)}return sw()},Oj=(e,t,n)=>{if(mX(e))return OA(e,t,n);if(sX(e)){let s=ix(e,e=>OA(e,t,n));if(sX(s))return e5(1===s.length?s[0]:new wH(t,n,s))}return sw()};function OC(e,t){return n=>{function s(t,n,s){return Oj(e(t,n,s),s,t)}let i=new d_(n.ast,s,kI(t));return OM(n,s,i)}}let OL=(e,t,n)=>class extends kO(n){static annotations(e){return OL(this.from,this.to,kT(this.ast,e))}static from=e;static to=t},OU=b(e=>kA(e[0])&&kA(e[1]),(e,t,n)=>OL(e,t,new dk(e.ast,t.ast,new dE(n.decode,n.encode)))),O$=b(e=>kA(e[0])&&kA(e[1]),(e,t,n)=>OU(e,t,{decode:e=>w2(n.decode(e)),encode:e=>w2(n.encode(e))})),OD=Symbol.for("@effect/schema/TypeId/Trimmed"),OP=e=>t=>t.pipe(OC(e=>e===e.trim(),{typeId:OD,description:"a string with no leading or trailing whitespace",jsonSchema:{pattern:"^\\S[\\s\\S]*\\S$|^\\S$|^$"},...e})),Oz=(e,t)=>n=>n.pipe(OC(t=>t.length>=e,{typeId:d3,description:`a string at least ${e} character(s) long`,jsonSchema:{minLength:e},...t})),OB=Symbol.for("@effect/schema/TypeId/Pattern"),Oq=(e,t)=>n=>{let s=e.source;return n.pipe(OC(t=>(e.lastIndex=0,e.test(t)),{typeId:{id:OB,annotation:{regex:e}},description:`a string matching the pattern ${s}`,jsonSchema:{pattern:s},arbitrary:()=>t=>t.stringMatching(e),...t}))},OJ=Symbol.for("@effect/schema/TypeId/Lowercased"),OK=e=>t=>t.pipe(OC(e=>e===e.toLowerCase(),{typeId:OJ,description:"a lowercase string",...e}));class OV extends kW.pipe(OK({identifier:"Lowercased",title:"Lowercased"})){static annotations=super.annotations}let OG=Symbol.for("@effect/schema/TypeId/Uppercased"),OH=e=>t=>t.pipe(OC(e=>e===e.toUpperCase(),{typeId:OG,description:"an uppercase string",...e}));class OW extends kW.pipe(OH({identifier:"Uppercased",title:"Uppercased"})){static annotations=super.annotations}let OY=(e,t)=>n=>{let s=P(e)?Math.max(0,Math.floor(e.min)):Math.max(0,Math.floor(e)),i=P(e)?Math.max(s,Math.floor(e.max)):s;return s!==i?n.pipe(OC(e=>e.length>=s&&e.length<=i,{typeId:d5,description:`a string at least ${s} character(s) and at most ${i} character(s) long`,jsonSchema:{minLength:s,maxLength:i},...t})):n.pipe(OC(e=>e.length===s,{typeId:d5,description:1===s?"a single character":`a string ${s} character(s) long`,jsonSchema:{minLength:s,maxLength:s},...t}))};class OQ extends kW.pipe(OY(1,{identifier:"Char"})){static annotations=super.annotations}let OX=e=>Oz(1,{description:"a non empty string",...e});class OZ extends O$(kW,OV,{decode:e=>e.toLowerCase(),encode:x}).annotations({identifier:"Lowercase"}){static annotations=super.annotations}class O0 extends O$(kW,OW,{decode:e=>e.toUpperCase(),encode:x}).annotations({identifier:"Uppercase"}){static annotations=super.annotations}class O1 extends kW.pipe(OP({identifier:"Trimmed",title:"Trimmed"})){static annotations=super.annotations}class O2 extends O$(kW,O1,{decode:e=>e.trim(),encode:x}).annotations({identifier:"Trim"}){static annotations=super.annotations}class O3 extends kW.pipe(OX({identifier:"NonEmpty",title:"NonEmpty"})){static annotations=super.annotations}let O5=Symbol.for("@effect/schema/TypeId/UUID"),O4=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;class O6 extends kW.pipe(Oq(O4,{typeId:O5,identifier:"UUID",title:"UUID",description:"a Universally Unique Identifier",arbitrary:()=>e=>e.uuid()})){static annotations=super.annotations}let O8=Symbol.for("@effect/schema/TypeId/ULID"),O7=/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i;class O9 extends kW.pipe(Oq(O7,{typeId:O8,identifier:"ULID",title:"ULID",description:"a Universally Unique Lexicographically Sortable Identifier",arbitrary:()=>e=>e.ulid()})){static annotations=super.annotations}let Ee=Symbol.for("@effect/schema/TypeId/Finite"),Et=e=>t=>t.pipe(OC(e=>Number.isFinite(e),{typeId:Ee,description:"a finite number",...e})),En=(e,t)=>n=>n.pipe(OC(t=>t>e,{typeId:dX,description:0===e?"a positive number":`a number greater than ${e}`,jsonSchema:{exclusiveMinimum:e},...t})),Es=(e,t)=>n=>n.pipe(OC(t=>t>=e,{typeId:dZ,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),Ei=e=>t=>t.pipe(OC(e=>Number.isSafeInteger(e),{typeId:d2,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...e})),Er=(e,t)=>n=>n.pipe(OC(t=>t<e,{typeId:d0,description:0===e?"a negative number":`a number less than ${e}`,jsonSchema:{exclusiveMaximum:e},...t})),Ea=(e,t)=>n=>n.pipe(OC(t=>t<=e,{typeId:d1,description:0===e?"a non-positive number":`a number less than or equal to ${e}`,jsonSchema:{maximum:e},...t})),Eo=Symbol.for("@effect/schema/TypeId/NonNaN"),El=e=>t=>t.pipe(OC(e=>!Number.isNaN(e),{typeId:Eo,description:"a number excluding NaN",...e})),Ec=e=>En(0,e),Eu=e=>Er(0,e),Ep=e=>Ea(0,e),Em=e=>Es(0,e),Eh=e=>OU(e,kY,{strict:!1,decode:(e,t,n)=>w5(mN(e),()=>new wQ(n,e)),encode:e=>w2(String(e))});class Ed extends Eh(kW).annotations({identifier:"NumberFromString"}){static annotations=super.annotations}class Ef extends kY.pipe(Et({identifier:"Finite",title:"Finite"})){static annotations=super.annotations}class Eg extends kY.pipe(Ei({identifier:"Int",title:"Int"})){static annotations=super.annotations}class Eb extends kY.pipe(El({identifier:"NonNaN",title:"NonNaN"})){static annotations=super.annotations}class Ex extends kY.pipe(Ec({identifier:"Positive",title:"Positive"})){static annotations=super.annotations}class Ey extends kY.pipe(Eu({identifier:"Negative",title:"Negative"})){static annotations=super.annotations}class Ev extends kY.pipe(Ep({identifier:"NonPositive",title:"NonPositive"})){static annotations=super.annotations}class E_ extends kY.pipe(Em({identifier:"NonNegative",title:"NonNegative"})){static annotations=super.annotations}let ES=Symbol.for("@effect/schema/TypeId/JsonNumber");class Ew extends kY.pipe(OC(e=>!Number.isNaN(e)&&Number.isFinite(e),{typeId:ES,identifier:"JsonNumber",title:"JSON-compatible number",description:"a JSON-compatible number, excluding NaN, +Infinity, and -Infinity",jsonSchema:{type:"number"}})){static annotations=super.annotations}class Ek extends O$(kQ,kQ,{decode:iq,encode:iq}){static annotations=super.annotations}class EO extends O$(kW,kH,{strict:!1,decode:e=>Symbol.for(e),encode:e=>e.description}).annotations({identifier:"symbol"}){static annotations=super.annotations}class EE extends OU(kW,kG,{decode:(e,t,n)=>w5(iz(e),()=>new wQ(n,e)),encode:e=>w2(String(e))}).annotations({identifier:"bigint"}){static annotations=super.annotations}class EI extends OU(kY,kG,{decode:(e,t,n)=>w5(iB(e),()=>new wQ(n,e)),encode:(e,t,n)=>w5(iP(e),()=>new wQ(n,e))}).annotations({identifier:"BigintFromNumber"}){static annotations=super.annotations}let ET=(e,t,n,s)=>w9(e,{onFailure:e=>new wH(n,s,e),onSuccess:t});class ER extends kP(mt,{identifier:"DurationFromSelf",pretty:()=>String,arbitrary:()=>e=>e.oneof(e.constant(ms),e.bigUint().map(e=>mi(e)),e.bigUint().map(e=>mr(e)),e.maxSafeNat().map(e=>ma(e)),e.maxSafeNat().map(e=>mo(e)),e.maxSafeNat().map(e=>ml(e)),e.maxSafeNat().map(e=>mc(e)),e.maxSafeNat().map(e=>mu(e)),e.maxSafeNat().map(e=>mp(e))),equivalence:()=>mx}){static annotations=super.annotations}class EN extends OU(kG,ER,{decode:e=>w2(mi(e)),encode:(e,t,n)=>sk(mh(e),{onNone:()=>w3(new wQ(n,e)),onSome:e=>w2(e)})}).annotations({identifier:"DurationFromNanos"}){static annotations=super.annotations}class EF extends O$(kY,ER,{decode:e=>ma(e),encode:e=>mm(e)}).annotations({identifier:"DurationFromMillis"}){static annotations=super.annotations}let EM=function(...e){return Array.isArray(e[0])?k8(e[0],e.slice(1)):k8(e,[])}(E_.pipe(Et({[hr]:"seconds",[ha]:"seconds"})),E_.pipe(Et({[hr]:"nanos",[ha]:"nanos"})));class EA extends O$(EM,ER,{decode:([e,t])=>mi(BigInt(e)*BigInt(1e9)+BigInt(t)),encode:e=>mf(e)}).annotations({identifier:"Duration"}){static annotations=super.annotations}let Ej=Symbol.for("@effect/schema/TypeId/ValidDate"),EC=e=>t=>t.pipe(OC(e=>!Number.isNaN(e.getTime()),{typeId:Ej,description:"a valid Date",...e}));class EL extends kP(K,{identifier:"DateFromSelf",description:"a potentially invalid Date instance",pretty:()=>e=>`new Date(${JSON.stringify(e)})`,arbitrary:()=>e=>e.date({noInvalidDate:!1}),equivalence:()=>sv}){static annotations=super.annotations}class EU extends EL.pipe(EC({identifier:"ValidDateFromSelf",description:"a valid Date instance"})){static annotations=super.annotations}class E$ extends O$(kW,EL,{decode:e=>new Date(e),encode:e=>e.toISOString()}).annotations({identifier:"DateFromString"}){static annotations=super.annotations}class ED extends E$.pipe(EC({identifier:"Date"})){static annotations=super.annotations}class EP extends O$(kY,EL,{decode:e=>new Date(e),encode:e=>e.getTime()}).annotations({identifier:"DateFromNumber"}){static annotations=super.annotations}let Ez=e=>"None"===e._tag?sw():e5(e.value),EB=e=>t=>t.oneof(t.record({_tag:t.constant("None")}),t.record({_tag:t.constant("Some"),value:e(t)})).map(Ez),Eq=e=>sk({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),EJ=e=>(t,n,s)=>e0(t)?e1(t)?w2(sw()):ET(e(t.value,n),e5,s,t):w3(new wQ(s,t)),EK=e=>kP([e],{decode:e=>EJ(ki(e)),encode:e=>EJ(kr(e))},{description:`Option<${kR(e)}>`,pretty:Eq,arbitrary:EB,equivalence:sL}),EV=()=>e=>`BigDecimal(${i$(iM(e))})`,EG=()=>e=>e.tuple(e.bigInt(),e.integer()).map(([e,t])=>iI(e,t));class EH extends kP(iE,{identifier:"BigDecimalFromSelf",pretty:EV,arbitrary:EG,equivalence:()=>ij}){static annotations=super.annotations}class EW extends OU(kW,EH,{decode:(e,t,n)=>iU(e).pipe(sk({onNone:()=>w3(new wQ(n,e)),onSome:e=>w2(iM(e))})),encode:e=>w2(i$(iM(e)))}).annotations({identifier:"BigDecimal"}){static annotations=super.annotations}class EY extends OU(kY,EH,{decode:e=>w2(iL(e)),encode:e=>w2(iD(e))}).annotations({identifier:"BigDecimalFromNumber"}){static annotations=super.annotations}let EQ=e=>kA(e)||Og(e),EX=e=>mG(e).every(t=>EQ(e[t])),EZ=e=>"fields"in e?e.fields:EZ(e[OF]),E0=e=>EX(e)?Ov(e):kA(e)?e:Ov(EZ(e)),E1=e=>EX(e)?e:EZ(e),E2=e=>(t,n)=>E6({kind:"Class",identifier:e,schema:E0(t),fields:E1(t),Base:a1,annotations:n}),E3=(e,t)=>{let n={...e};for(let s of mG(t)){if(s in e)throw Error(he(s));n[s]=t[s]}return n},E5=(e,t)=>e1(hv(e.ast))?e.annotations({title:t}):e,E4=e=>F(e)?e:e?.disableValidation??!1,E6=({Base:e,annotations:t,fields:n,identifier:s,kind:i,schema:r,toStringOverride:a})=>{let o=Symbol.for(`@effect/schema/${i}/${s}`),l=E5(r,`${s} (Constructor)`),c=E5(r,`${s} (Encoded side)`),u=E5(kF(r),`${s} (Type side)`),p=e=>z(e,o)&&ko(u)(e);return class extends e{constructor(e={},t=!1){e={...e},"Class"!==i&&delete e._tag,e=Ox(n,e),E4(t)||(e=ka(l)(e)),super(e,!0)}static [kk]=kE;static get ast(){return O$(c,kP([u],{decode:()=>(e,t,n)=>e instanceof this||p(e)?w2(e):w3(new wQ(n,e)),encode:()=>(e,t)=>e instanceof this?w2(e):w6(kr(u)(e,t),e=>new this(e,!0))},{identifier:s,title:s,description:`an instance of ${s}`,pretty:e=>t=>`${s}(${e(t)})`,arbitrary:e=>t=>e(t).map(e=>new this(e)),equivalence:x,[hf]:u.ast,...t}),{decode:e=>new this(e,!0),encode:x}).annotations({[hf]:r.ast}).ast}static pipe(){return eI(this,arguments)}static annotations(e){return kO(this.ast).annotations(e)}static toString(){return`(${String(c)} <-> ${s})`}static make(...e){return new this(...e)}static fields={...n};static identifier=s;static extend(e){return(t,s)=>{let a=E1(t),o=E0(t),l=E3(n,a);return E6({kind:i,identifier:e,schema:OR(r,o),fields:l,Base:this,annotations:s})}}static transformOrFail(e){return(t,s,a)=>{let o=E3(n,t);return E6({kind:i,identifier:e,schema:OU(r,kF(Ov(o)),s),fields:o,Base:this,annotations:a})}}static transformOrFailFrom(e){return(t,s,a)=>{let o=E3(n,t);return E6({kind:i,identifier:e,schema:OU(kN(r),Ov(o),s),fields:o,Base:this,annotations:a})}}get[o](){return o}toString(){if(void 0!==a){let e=a(this);if(void 0!==e)return e}return`${s}({ ${mG(n).map(e=>`${mY(e)}: ${mW(this[e])}`).join(", ")} })`}}},E8=k1(Ov({_tag:kL("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Ov({_tag:kL("Runtime"),id:Eg.annotations({title:"id",description:"id"}),startTimeMillis:Eg.annotations({title:"startTimeMillis",description:"startTimeMillis"})}).annotations({identifier:"FiberIdRuntimeEncoded"}),Ov({_tag:kL("Composite"),left:ON(()=>E8),right:ON(()=>E8)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),E7=e=>e.letrec(t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))})).FiberId.map(It),E9=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${E9(e.right)}, ${E9(e.left)})`}};class Ie extends kP(aN,{identifier:"FiberIdFromSelf",pretty:()=>E9,arbitrary:()=>E7}){static annotations=super.annotations}let It=e=>{switch(e._tag){case"None":return aI;case"Runtime":return aT(e.id,e.startTimeMillis);case"Composite":return aR(It(e.left),It(e.right))}},In=e=>{switch(e._tag){case"None":return{_tag:"None"};case"Runtime":return{_tag:"Runtime",id:e.id,startTimeMillis:e.startTimeMillis};case"Composite":return{_tag:"Composite",left:In(e.left),right:In(e.right)}}};class Is extends O$(E8,Ie,{decode:It,encode:In}).annotations({identifier:"FiberId"}){static annotations=super.annotations}class Ii extends O$(kK,kQ,{decode:T,encode:x}).annotations({identifier:"BooleanFromUnknown"}){static annotations=super.annotations}let Ir=(e,t=2)=>{let n=p6(e);return _L(_z(Se,e=>my(n,Math.pow(t,e))))},Ia=e=>_N(Se,()=>e),Io={silent:Number.NEGATIVE_INFINITY,fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,ready:3,start:3,box:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},Il={silent:{level:-1},fatal:{level:Io.fatal},error:{level:Io.error},warn:{level:Io.warn},log:{level:Io.log},info:{level:Io.info},success:{level:Io.success},fail:{level:Io.fail},ready:{level:Io.info},start:{level:Io.info},box:{level:Io.info},debug:{level:Io.debug},trace:{level:Io.trace},verbose:{level:Io.verbose}};function Ic(e){return null!==e&&"object"==typeof e}let Iu=(...e)=>e.reduce((e,t)=>(function e(t,n,s=".",i){if(!Ic(n))return e(t,{},s,i);let r=Object.assign({},n);for(let n in t){if("__proto__"===n||"constructor"===n)continue;let a=t[n];null==a||i&&i(r,n,a,s)||(Array.isArray(a)&&Array.isArray(r[n])?r[n]=[...a,...r[n]]:Ic(a)&&Ic(r[n])?r[n]=e(a,r[n],(s?`${s}.`:"")+n.toString(),i):r[n]=a)}return r})(e,t,"",void 0),{}),Ip=!1,Im=[];class Ih{constructor(e={}){let t=e.types||Il;for(let n in this.options=Iu({...e,defaults:{...e.defaults},level:Id(e.level,t),reporters:[...e.reporters||[]]},{types:Il,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}}),t){let e={type:n,...this.options.defaults,...t[n]};this[n]=this._wrapLogFn(e),this[n].raw=this._wrapLogFn(e,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=Id(e,this.options.types,this.options.level)}prompt(e,t){if(!this.options.prompt)throw Error("prompt is not supported!");return this.options.prompt(e,t)}create(e){let t=new Ih({...this.options,...e});return this._mockFn&&t.mockTypes(this._mockFn),t}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){let t=this.options.reporters.indexOf(e);if(t>=0)return this.options.reporters.splice(t,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(let e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(let e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,t){e&&(e.__write||(e.__write=e.write),e.write=e=>{this[t].raw(String(e).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){Ip=!0}resumeLogs(){for(let e of(Ip=!1,Im.splice(0)))e[0]._logFn(e[1],e[2])}mockTypes(e){let t=e||this.options.mockFn;if(this._mockFn=t,"function"==typeof t)for(let e in this.options.types)this[e]=t(e,this.options.types[e])||this[e],this[e].raw=this[e]}_wrapLogFn(e,t){return(...n)=>{if(Ip){Im.push([this,e,n,t]);return}return this._logFn(e,n,t)}}_logFn(e,t,n){var s,i;if((e.level||0)>this.level)return!1;let r={date:new Date,args:[],...e,level:Id(e.level,this.options.types)};n||1!==t.length||((i=s=t[0],"[object Object]"===Object.prototype.toString.call(i)&&(s.message||s.args)&&!s.stack)?0:1)?r.args=[...t]:Object.assign(r,t[0]),r.message&&(r.args.unshift(r.message),delete r.message),r.additional&&(Array.isArray(r.additional)||(r.additional=r.additional.split("\n")),r.args.push("\n"+r.additional.join("\n")),delete r.additional),r.type="string"==typeof r.type?r.type.toLowerCase():"log",r.tag="string"==typeof r.tag?r.tag:"";let a=(e=!1)=>{let t=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&t>0){let e=[...this._lastLog.object.args];t>1&&e.push(`(repeated ${t} times)`),this._log({...this._lastLog.object,args:e}),this._lastLog.count=1}e&&(this._lastLog.object=r,this._log(r))};clearTimeout(this._lastLog.timeout);let o=this._lastLog.time&&r.date?r.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=r.date,o<this.options.throttle)try{let e=JSON.stringify([r.type,r.tag,r.args]),t=this._lastLog.serialized===e;if(this._lastLog.serialized=e,t&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(a,this.options.throttle);return}}catch{}a(!0)}_log(e){for(let t of this.options.reporters)t.log(e,{options:this.options})}}function Id(e,t={},n=3){return void 0===e?n:"number"==typeof e?e:t[e]&&void 0!==t[e].level?t[e].level:n}Ih.prototype.add=Ih.prototype.addReporter,Ih.prototype.remove=Ih.prototype.removeReporter,Ih.prototype.clear=Ih.prototype.removeReporter,Ih.prototype.withScope=Ih.prototype.withTag,Ih.prototype.mock=Ih.prototype.mockTypes,Ih.prototype.pause=Ih.prototype.pauseLogs,Ih.prototype.resume=Ih.prototype.resumeLogs;let If=b(2,(e,t)=>u$(vm,t)(e)),Ig=e=>SG(vV(vg,r5(e))),Ib=e=>SG(vV(vg,r4(e))),Ix=b(2,(e,t)=>Sz(Ib(e),()=>Ig(t))),Iy=Symbol("uploadthing-custom-id-symbol"),Iv=["upload","failure","multipart-complete"],I_=e=>"string"==typeof e&&Iv.includes(e),IS=["callback"],Iw=e=>"string"==typeof e&&IS.includes(e);var Ik="6.13.2";let IO=kL("inline","attachment");kL("public-read","private");class IE extends E2("FileUploadData")({name:kW,size:kY,type:kW}){}class II extends IE.extend("FileUploadDataWithCustomId")({customId:k2(kW)}){}class IT extends II.extend("UploadedFileData")({key:kW,url:kW}){}class IR extends E2("PresignedBaseSchema")({key:kW,fileName:kW,fileType:kW,fileUrl:kW,pollingJwt:kW,pollingUrl:kW,contentDisposition:IO,customId:k2(kW)}){}class IN extends IR.extend("MPUResponseSchema")({urls:k9(kW),uploadId:kW,chunkSize:kY,chunkCount:kY}){}class IF extends IR.extend("PSPResponseSchema")({url:kW,fields:OS(kW,kW)}){}let IM=k9(k1(IF,IN));class IA extends E2("PollUploadResponse")({status:kW,fileData:Of(Ov({fileKey:k2(kW),fileName:kW,fileSize:kY,fileType:kW,metadata:k2(kW),customId:k2(kW),callbackUrl:Of(kW),callbackSlug:Of(kW)}))}){}class Ij extends E2("FailureCallbackResponse")({success:kQ,message:Of(kW)}){}class IC extends E2("ServerCallbackPostResponse")({status:kW}){}class IL extends E2("UploadActionPayload")({files:k9(IE),input:kK}){}class IU extends E2("FailureActionPayload")({fileKey:kW,uploadId:k2(kW),storageProviderError:Of(kW),fileName:kW}){}class I$ extends E2("MultipartCompleteActionPayload")({fileKey:kW,uploadId:kW,etags:k9(Ov({tag:kW,partNumber:kY}))}){}let ID=e=>!!(e.ok&&!(e.status>=400)&&e.headers.has("x-uploadthing-version")),IP=(e,t)=>w_(function*(){let n=yield*su(se(`/api/pollUpload/${e}`)).pipe(cH(sp),cH(kM(IA)),cH(e=>"done"===e.status&&e.fileData?ui(e.fileData):cz(new n3)),_5({while:e=>e instanceof n3,schedule:Ir(10,4).pipe(_K(Ia(1e3)),_j(_9),_W(m_(ml(1))))}),bg("RetryError",()=>new sl({code:"UPLOAD_FAILED",message:"File took too long to upload"}))),s=n.callbackUrl+`?slug=${n.callbackSlug}`;s.startsWith("http")||(s="http://"+s),yield*bS("SIMULATING FILE UPLOAD WEBHOOK CALLBACK",s);let i=JSON.stringify({status:"uploaded",metadata:JSON.parse(n.metadata??"{}"),file:new IT({url:`https://utfs.io/f/${encodeURIComponent(e)}`,key:e,name:n.fileName,size:n.fileSize,customId:n.customId,type:n.fileType})}),r=yield*bM({try:()=>sf(i,t),catch:e=>new sl({code:"INTERNAL_SERVER_ERROR",message:"Failed to sign payload",cause:e})});return ID((yield*su(s,{method:"POST",body:i,headers:{"Content-Type":"application/json","uploadthing-hook":"callback","x-uploadthing-signature":r}}).pipe(bg("FetchError",()=>ui(new Response(null,{status:500}))))))?yield*bS("Successfully simulated callback for file",e):yield*bk(`
Failed to simulate callback for file '${n.fileKey}'. Is your webhook configured correctly?
  - Make sure the URL '${s}' is accessible without any authentication. You can verify this by running 'curl -X POST ${s}' in your terminal
  - Still facing issues? Read https://docs.uploadthing.com/faq for common issues
`.trim()),n}),Iz=(e,t)=>{switch(t){case"error":case"fatal":return`\x1b[41m\x1b[30m${e}\x1b[0m`;case"warn":return`\x1b[43m\x1b[30m${e}\x1b[0m`;case"info":case"log":return`\x1b[44m\x1b[30m${e}\x1b[0m`;case"debug":case"trace":return`\x1b[47m\x1b[30m${e}\x1b[0m`;case"success":return`\x1b[42m\x1b[30m${e}\x1b[0m`;default:return e}},IB={fatal:"⨯",error:"⨯",warn:"⚠️",info:"ℹ",log:"ℹ",debug:"⚙",trace:"→",success:"✓"},Iq=function(e={}){return new Ih(e)}({reporters:[{log:e=>{let{type:t,tag:n,date:s,args:i}=e,r=IB[t],a=Iz(` ${r} ${n} ${s.toLocaleTimeString()} `,t);console.log(i.map(e=>sr(e)&&"string"==typeof e.stack?e.message+"\n"+function(e){let t="cwd"in nz&&"function"==typeof nz.cwd?nz.cwd():"__UnknownCWD__";return"  "+e.split("\n").splice(1).map(e=>e.trim().replace("file://","").replace(t+"/","")).join("\n  ")}(e.stack):e).map(e=>"string"==typeof e?e:JSON.stringify(e,null,4)).join(" ").split("\n").map(e=>a+" "+e).join("\n"))}}],defaults:{tag:"UPLOADTHING"}}),IJ={All:"verbose",Fatal:"error",Error:"error",Info:"info",Debug:"debug",Trace:"trace",Warning:"warn",None:"silent"},IK=(e="info")=>(Iq.level=Io[e],If({silent:uI,error:gE,warn:gI,info:uO,debug:uE,trace:gT,verbose:uk}[e])),IV=Ix(vd,b8(({logLevel:e,message:t})=>{Iq[IJ[e._tag]](t)})),IG=(e,t)=>su(se("/api/completeMultipart"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId,etags:t}),headers:{"Content-Type":"application/json"}}).pipe(cH(sp),cH(kM(Ov({success:kQ,message:Of(kW)}))),wS("completeMultipartUpload",{attributes:{etags:t,presigned:e}})),IH=e=>su(se("/api/failureCallback"),{method:"POST",body:JSON.stringify({fileKey:e.key,uploadId:e.uploadId}),headers:{"Content-Type":"application/json"}}).pipe(cH(sp),cH(kM(Ij)),wS("abortMultipartUpload",{attributes:{presigned:e}})),IW=e=>e||(nz.env.UPLOADTHING_SECRET?nz.env.UPLOADTHING_SECRET:void 0);class IY extends pY{constructor(e,t,n){super({reason:`You uploaded a ${e} file that was ${ss(n)}, but the limit for that type is ${t}`}),this._tag="FileSizeMismatch",this.name="FileSizeMismatchError"}}class IQ extends pY{constructor(e,t,n,s){super({reason:`You uploaded ${s} file(s) of type '${e}', but the ${t} for that type is ${n}`}),this._tag="FileCountMismatch",this.name="FileCountMismatchError"}}let IX=(e,t)=>w_(function*(){let n={};for(let s of e){let e=yield*n9(s.name,si(t));n[e]=(n[e]??0)+1;let i=t[e]?.maxFileSize;if(!i)return yield*new nX(e,"maxFileSize");let r=yield*sn(i);if(s.size>r)return yield*new IY(e,i,s.size)}for(let e in n){let s=t[e];if(!s)return yield*new nX(e);let i=n[e],r=s.minFileCount,a=s.maxFileCount;if(r>a)return yield*new sl({code:"BAD_REQUEST",message:"Invalid config during file count - minFileCount > maxFileCount",cause:`minFileCount must be less than maxFileCount for key ${e}. got: ${r} > ${a}`});if(i<r)return yield*new IQ(e,"minimum",r,i);if(i>a)return yield*new IQ(e,"maximum",a,i)}return null});class IZ extends tm("uploadthing/RequestInput")(){}let I0=(e,t,n)=>w_(function*(){let s=yield*cw(e.req)?e.req:ui(e.req),i=new URL(s.url),r=s.headers,a=i.searchParams,o=a.get("actionType"),l=a.get("slug"),c=r.get("uploadthing-hook"),u=r.get("x-uploadthing-package")??"unknown",p=r.get("x-uploadthing-version"),m=IW(t.config?.uploadthingSecret);if(null!=p&&p!==Ik)return yield*bk(`Client version mismatch. Server version: ${Ik}, Client version: ${p}`),yield*new sl({code:"BAD_REQUEST",message:"Client version mismatch",cause:`Server version: ${Ik}, Client version: ${p}`});if(!l)return yield*bk("No slug provided in params:",a),yield*new sl({code:"BAD_REQUEST",message:"No slug provided in params"});if(l&&"string"!=typeof l){let e=`Expected slug to be of type 'string', got '${typeof l}'`;return yield*bk(e),yield*new sl({code:"BAD_REQUEST",message:"`slug` must be a string",cause:e})}if(!m){let e="No secret provided, please set UPLOADTHING_SECRET in your env file or in the config";return yield*bk(e),yield*new sl({code:"MISSING_ENV",message:"No secret provided",cause:e})}if(!m.startsWith("sk_")){let e="Invalid secret provided, UPLOADTHING_SECRET must start with 'sk_'";return yield*bk(e),yield*new sl({code:"MISSING_ENV",message:"Invalid API key. API keys must start with 'sk_'.",cause:e})}if(u&&"string"!=typeof u){let e=`Expected x-uploadthing-package to be of type 'string', got '${typeof u}'`;return yield*bk(e),yield*new sl({code:"BAD_REQUEST",message:"`x-uploadthing-package` must be a string. eg. '@uploadthing/react'",cause:e})}let h=t.router[l];if(!h){let e=`No file route found for slug ${l}`;return yield*bk(e),yield*new sl({code:"NOT_FOUND",message:e})}if(o&&!I_(o)){let e=`Expected ${Iv.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${o}"`;return yield*bk("Invalid action type",e),yield*new sl({code:"BAD_REQUEST",cause:`Invalid action type ${o}`,message:e})}if(c&&!Iw(c)){let e=`Expected ${IS.map(e=>`"${e}"`).join(", ").replace(/,(?!.*,)/," or")} but got "${c}"`;return yield*bk("Invalid uploadthing hook",e),yield*new sl({code:"BAD_REQUEST",cause:`Invalid uploadthing hook ${c}`,message:e})}if(!o&&!c||o&&c){let e="Exactly one of 'actionType' or 'uploadthing-hook' must be provided";return yield*bk(e),yield*new sl({code:"BAD_REQUEST",message:e})}yield*b_("✔︎ All request input is valid");let d=yield*sc;d.baseHeaders["x-uploadthing-api-key"]=m,d.baseHeaders["x-uploadthing-fe-package"]=u,d.baseHeaders["x-uploadthing-be-adapter"]=n;let{isDev:f=nL}=t.config??{};f&&(yield*bS("UploadThing dev server is now running!"));let g={req:s,config:t.config??{},middlewareArgs:e.middlewareArgs,isDev:f,apiKey:m,slug:l,uploadable:h,hook:null,action:null};return o?{...g,action:o}:{...g,hook:c}}),I1=w_(function*(){let{config:e,req:t,isDev:n}=yield*IZ,s=new URL(t.url);if(e?.callbackUrl?s=yield*sa(e.callbackUrl):nz.env.UPLOADTHING_URL&&(s=yield*sa(nz.env.UPLOADTHING_URL)),n||!s.host.includes("localhost"))return s;let i=t.headers.get("origin")??t.headers.get("referer")??t.headers.get("host")??t.headers.get("x-forwarded-host");return(i&&!i.includes("http")&&(i=(t.headers.get("x-forwarded-proto")??"https")+"://"+i),!i||i.includes("localhost"))?(bw("You are using a localhost callback url in production which is not supported.","Read more and learn how to fix it here: https://docs.uploadthing.com/faq#my-callback-runs-in-development-but-not-in-production"),s):yield*sa(i)}),I2=(e,t,n)=>e(t).pipe(IK(n?.logLevel),SQ(IV),bT(sc,{fetch:n?.fetch??globalThis.fetch,baseHeaders:{"x-uploadthing-version":Ik,"x-uploadthing-api-key":void 0,"x-uploadthing-be-adapter":void 0,"x-uploadthing-fe-package":void 0}}),I3,SI),I3=e=>cM(e,e=>ui({success:!1,error:e})),I5=IZ.pipe(cH(({action:e,hook:t})=>{if("callback"===t)return I6;switch(e){case"upload":return I7;case"multipart-complete":return I9;case"failure":return Te}}),c4(e=>({success:!0,...e}))),I4=(e,t)=>n=>I5.pipe(bR(IZ,I0(n,e,t)),bb({InvalidJson:e=>new sl({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e}),BadRequestError:e=>new sl({code:"INTERNAL_SERVER_ERROR",message:e.getMessage(),cause:e,data:e.json}),FetchError:e=>new sl({code:"INTERNAL_SERVER_ERROR",message:"string"==typeof e.error?e.error:e.message,cause:e,data:e.error}),ParseError:e=>new sl({code:"INTERNAL_SERVER_ERROR",message:"An error occured while parsing input/output",cause:e})}),bF(e=>bk(e.message))),I6=w_(function*(){let{req:e,uploadable:t,apiKey:n}=yield*IZ,s=yield*bM({try:async()=>sg(await e.clone().text(),e.headers.get("x-uploadthing-signature"),n),catch:()=>new sl({code:"BAD_REQUEST",message:"Invalid signature"})});if(yield*b_("Signature verified:",s),!s)return yield*bk("Invalid signature"),yield*new sl({code:"BAD_REQUEST",message:"Invalid signature"});let i=yield*cG(sm(e),kM(Ov({status:kW,file:IT,metadata:OS(kW,kK)})));yield*b_("Handling callback request with input:",i);let r=yield*bM({try:async()=>t.resolver({file:i.file,metadata:i.metadata}),catch:e=>new sl({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadComplete",cause:e})}).pipe(bF(e=>bk("Failed to run onUploadComplete. You probably shouldn't be throwing errors here.",e))),a={fileKey:i.file.key,callbackData:r??null};return yield*b_("'onUploadComplete' callback finished. Sending response to UploadThing:",a),yield*su(se("/api/serverCallback"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).pipe(cH(sp),cH(kM(IC))),{body:null}}),I8=e=>w_(function*(){let{uploadable:t,middlewareArgs:n}=yield*IZ,{files:s,input:i}=e;yield*b_("Running middleware");let r=yield*bM({try:async()=>t._def.middleware({...n,input:i,files:s}),catch:e=>e instanceof sl?e:new sl({code:"INTERNAL_SERVER_ERROR",message:"Failed to run middleware",cause:e})}).pipe(bF(e=>bk("An error occured in your middleware function",e)));if(r[Iy]&&r[Iy].length!==s.length){let e=`Expected files override to have the same length as original files, got ${r[Iy].length} but expected ${s.length}`;return yield*bk(e),yield*new sl({code:"BAD_REQUEST",message:"Files override must have the same length as files",cause:e})}let a=yield*vw(s,(e,t)=>w_(function*(){let n=r[Iy]?.[t];return n&&n.size!==e.size&&(yield*bw("File size mismatch. Reverting to original size")),{name:n?.name??e.name,size:e.size,customId:n?.customId}}));return{metadata:r,filesWithCustomIds:a}}),I7=w_(function*(){let e;let t=yield*IZ,{files:n,input:s}=yield*cG(sm(t.req),kM(IL));yield*b_("Handling upload request with input:",{files:n,input:s}),yield*b_("Parsing user input");let i=t.uploadable._def.inputParser,r=yield*bM({try:async()=>(function(e){if("function"==typeof e.parse)return e.parse;throw Error("Invalid parser")})(i)(s),catch:e=>new sl({code:"BAD_REQUEST",message:"Invalid input",cause:e})}).pipe(bF(e=>bk("An error occured trying to parse input",e)));yield*b_("Input parsed successfully",r);let{metadata:a,filesWithCustomIds:o}=yield*I8({input:r,files:n});yield*b_("Parsing route config",t.uploadable._def.routerConfig);let l=yield*n7(t.uploadable._def.routerConfig).pipe(bg("InvalidRouteConfig",e=>new sl({code:"BAD_REQUEST",message:"Invalid config",cause:e})));yield*b_("Route config parsed successfully",l),yield*b_("Validating files meet the config requirements",n),yield*IX(n,l).pipe(c8(e=>new sl({code:"BAD_REQUEST",message:`Invalid config: ${e._tag}`,cause:"reason"in e?e.reason:e.message})));let c=yield*I1.pipe(bF(e=>bk("Failed to resolve callback URL",e)),bg("InvalidURL",e=>new sl({code:"INTERNAL_SERVER_ERROR",message:e.message})));yield*b_("Retrieving presigned URLs from UploadThing. Callback URL is:",c.href);let u=yield*su(se("/api/prepareUpload"),{method:"POST",body:JSON.stringify({files:o,routeConfig:l,metadata:a,callbackUrl:c.origin+c.pathname,callbackSlug:t.slug}),headers:{"Content-Type":"application/json"}}).pipe(cH(sp),cH(kM(IM)));if(yield*b_("UploadThing responded with:",u),yield*b_("Sending presigned URLs to client"),t.isDev){let n=yield*sc;e=vw(u,e=>IP(e.key,t.apiKey).pipe(cD),{concurrency:10}).pipe(SQ(IV),bT(sc,n),SI)}return{body:u,cleanup:e}}),I9=w_(function*(){let e=yield*IZ,t=yield*cG(sm(e.req),kM(I$));yield*b_("Handling multipart-complete request with input:",t),yield*b_("Notifying UploadThing that multipart upload is complete");let n=yield*IG({key:t.fileKey,uploadId:t.uploadId},t.etags);return yield*b_("UploadThing responded with:",n),{body:null}}),Te=w_(function*(){let{req:e,uploadable:t}=yield*IZ,{fileKey:n,uploadId:s}=yield*cG(sm(e),kM(IU));yield*b_("Handling failure request with input:",{fileKey:n,uploadId:s}),yield*b_("Notifying UploadThing that upload failed");let i=yield*IH({key:n,uploadId:s});return yield*b_("UploadThing responded with:",i),yield*b_("Running 'onUploadError' callback"),yield*bf({try:()=>{t._def.onUploadError({error:new sl({code:"UPLOAD_FAILED",message:`Upload failed for ${n}`}),fileKey:n})},catch:e=>new sl({code:"INTERNAL_SERVER_ERROR",message:"Failed to run onUploadError",cause:e})}).pipe(bF(e=>bk("Failed to run onUploadError. You probably shouldn't be throwing errors here.",e))),{body:null}}),Tt=e=>()=>si(e.router).map(t=>{let n=ST(n7(e.router[t]._def.routerConfig));return{slug:t,config:n}}),Tn=(e,t)=>{!function(){let e,t;if(void 0===nz)return;let n=nz.versions?.node?.split(".");n&&([e,t]=n.map(e=>parseInt(e,10)));let s=nz.env?.NODE;if(!e&&s){let n=/v(\d+)\.(\d+)\.(\d+)/.exec(s)?.[0];n&&([e,t]=n.substring(1).split(".").map(e=>parseInt(e,10)))}e&&t&&!(e>18)&&(18===e&&t>=13||(ST(bk(`YOU ARE USING A LEGACY (${e}.${t}) NODE VERSION WHICH ISN'T OFFICIALLY SUPPORTED. PLEASE UPGRADE TO NODE ^18.13.`)),nz.exit?.(1)))}();let n=I4(e,t),s=Tt(e);return{GET:e=>Response.json(s(),{headers:{"x-uploadthing-version":Ik}}),POST:async t=>{let s=t instanceof Request?t:t.request,i=await I2(n,{req:s,middlewareArgs:{req:s,event:void 0,res:void 0}},e.config);if(!1===i.success)return Response.json(function(e,t){return(t[Object.keys(t)[0]]?._def.errorFormatter??function(e){return{message:e.message}})(e)}(i.error,e.router),{status:so[i.error.code]??500,headers:{"x-uploadthing-version":Ik}});let r=Response.json(i.body,{headers:{"x-uploadthing-version":Ik}});return r.cleanup=i.cleanup,r}}};function Ts(e){return{message:e.message}}let Ti=e=>({id:"fakeId"}),{GET:Tr,POST:Ta}=(e=>{let t=Tn(e,"nextjs-app");return{POST:e=>t.POST(e),GET:e=>t.GET(e)}})({router:{imageUploader:(function e(t={}){let n={routerConfig:{image:{maxFileSize:"4MB"}},inputParser:{parse:()=>void 0,_input:void 0,_output:void 0},middleware:()=>({}),onUploadError:()=>({}),errorFormatter:t.errorFormatter??Ts,...t};return{input:t=>e({...n,inputParser:t}),middleware:t=>e({...n,middleware:t}),onUploadComplete:e=>({_def:n,resolver:e}),onUploadError:t=>e({...n,onUploadError:t})}})({routerConfig:{image:{maxFileSize:"32MB",maxFileCount:10}},...m}).middleware(async({req:e})=>{let t=await Ti(e);if(!t)throw new sl("Unauthorized");return{userId:t.id}}).onUploadComplete(async({metadata:e,file:t})=>(console.log("Upload complete for userId:",e.userId),console.log("file url",t.url),{uploadedBy:e.userId}))}}),To=new d.AppRouteRouteModule({definition:{kind:f.x.APP_ROUTE,page:"/api/uploadthing/route",pathname:"/api/uploadthing",filename:"route",bundlePath:"app/api/uploadthing/route"},resolvedPagePath:"D:\\Shoping Store Next.Js with zubair\\ecommerce\\src\\app\\api\\uploadthing\\route.ts",nextConfigOutput:"",userland:h}),{requestAsyncStorage:Tl,staticGenerationAsyncStorage:Tc,serverHooks:Tu}=To,Tp="/api/uploadthing/route";function Tm(){return(0,g.patchFetch)({serverHooks:Tu,staticGenerationAsyncStorage:Tc})}},49303:(e,t,n)=>{e.exports=n(30517)}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[948],()=>n(6044));module.exports=s})();